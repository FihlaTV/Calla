/**
 * https://github.com/csnover/TraceKit
 * @license MIT
 * @namespace TraceKit
 */
var t,e;!function(t,e){if(t){var n={},i=t.TraceKit,s=[].slice,o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;n.noConflict=function(){return t.TraceKit=i,n},n.wrap=function(t){return function(){try{return t.apply(this,arguments)}catch(t){throw n.report(t),t}}},n.report=function(){var e,i,s=[],a=null,c=null;function l(t,e,i){var o=null;if(!e||n.collectWindowErrors){for(var a in s)if(r(s,a))try{s[a](t,e,i)}catch(t){o=t}if(o)throw o}}function u(t,i,s,r,a){if(c)n.computeStackTrace.augmentStackTraceWithInitialElement(c,i,s,t),h();else if(a)l(n.computeStackTrace(a),!0,a);else{var u,d={url:i,line:s,column:r},A=t;if("[object String]"==={}.toString.call(t)){var p=t.match(o);p&&(u=p[1],A=p[2])}d.func=n.computeStackTrace.guessFunctionName(d.url,d.line),d.context=n.computeStackTrace.gatherContext(d.url,d.line),l({name:u,message:A,mode:"onerror",stack:[d]},!0,null)}return!!e&&e.apply(this,arguments)}function h(){var t=c,e=a;c=null,a=null,l(t,!1,e)}function d(t){if(c){if(a===t)return;h()}var e=n.computeStackTrace(t);throw c=e,a=t,setTimeout((function(){a===t&&h()}),e.incomplete?2e3:0),t}return d.subscribe=function(n){!function(){if(!0===i)return;e=t.onerror,t.onerror=u,i=!0}(),s.push(n)},d.unsubscribe=function(n){for(var o=s.length-1;o>=0;--o)s[o]===n&&s.splice(o,1);0===s.length&&(t.onerror=e,i=!1)},d}(),n.computeStackTrace=function(){var e={};function i(i){if("string"!=typeof i)return[];if(!r(e,i)){var s="",o="";try{o=t.document.domain}catch(t){}var a=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(i);a&&a[2]===o&&(s=function(e){if(!n.remoteFetching)return"";try{var i=function(){try{return new t.XMLHttpRequest}catch(e){return new t.ActiveXObject("Microsoft.XMLHTTP")}}();return i.open("GET",e,!1),i.send(""),i.responseText}catch(t){return""}}(i)),e[i]=s?s.split("\n"):[]}return e[i]}function s(t,e){var n,s=/function ([^(]*)\(([^)]*)\)/,o=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,r="",c=i(t);if(!c.length)return"?";for(var l=0;l<10;++l)if(!a(r=c[e-l]+r)){if(n=o.exec(r))return n[1];if(n=s.exec(r))return n[1]}return"?"}function o(t,e){var s=i(t);if(!s.length)return null;var o=[],r=Math.floor(n.linesOfContext/2),c=r+n.linesOfContext%2,l=Math.max(0,e-r-1),u=Math.min(s.length,e+c-1);e-=1;for(var h=l;h<u;++h)a(s[h])||o.push(s[h]);return o.length>0?o:null}function c(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function l(t){return c(t).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function u(t,e){for(var n,s,o=0,r=e.length;o<r;++o)if((n=i(e[o])).length&&(n=n.join("\n"),s=t.exec(n)))return{url:e[o],line:n.substring(0,s.index).split("\n").length,column:s.index-n.lastIndexOf("\n",s.index)-1};return null}function h(t,e,n){var s,o=i(e),r=new RegExp("\\b"+c(t)+"\\b");return n-=1,o&&o.length>n&&(s=r.exec(o[n]))?s.index:null}function d(e){if(!a(t&&t.document)){for(var n,i,s,o,r=[t.location.href],h=t.document.getElementsByTagName("script"),d=""+e,A=0;A<h.length;++A){var p=h[A];p.src&&r.push(p.src)}if(s=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(d)){var g=s[1]?"\\s+"+s[1]:"",f=s[2].split(",").join("\\s*,\\s*");n=c(s[3]).replace(/;$/,";?"),i=new RegExp("function"+g+"\\s*\\(\\s*"+f+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else i=new RegExp(c(d).replace(/\s+/g,"\\s+"));if(o=u(i,r))return o;if(s=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(d)){var m=s[1];if(n=l(s[2]),o=u(i=new RegExp("on"+m+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),r[0]))return o;if(o=u(i=new RegExp(n),r))return o}return null}}function A(t){if(!t.stack)return null;for(var e,n,i,r=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,c=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,d=/\((\S*)(?::(\d+))(?::(\d+))\)/,A=t.stack.split("\n"),p=[],g=/^(.*) is undefined$/.exec(t.message),f=0,m=A.length;f<m;++f){if(n=r.exec(A[f])){var v=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=d.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]),i={url:v?null:n[2],func:n[1]||"?",args:v?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=l.exec(A[f]))i={url:n[2],func:n[1]||"?",args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=c.exec(A[f])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(e=u.exec(n[3]))?(n[3]=e[1],n[4]=e[2],n[5]=null):0!==f||n[5]||a(t.columnNumber)||(p[0].column=t.columnNumber+1),i={url:n[3],func:n[1]||"?",args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!i.func&&i.line&&(i.func=s(i.url,i.line)),i.context=i.line?o(i.url,i.line):null,p.push(i)}return p.length?(p[0]&&p[0].line&&!p[0].column&&g&&(p[0].column=h(g[1],p[0].url,p[0].line)),{mode:"stack",name:t.name,message:t.message,stack:p}):null}function p(t,e,n,i){var r={url:e,line:n};if(r.url&&r.line){t.incomplete=!1,r.func||(r.func=s(r.url,r.line)),r.context||(r.context=o(r.url,r.line));var a=/ '([^']+)' /.exec(i);if(a&&(r.column=h(a[1],r.url,r.line)),t.stack.length>0&&t.stack[0].url===r.url){if(t.stack[0].line===r.line)return!1;if(!t.stack[0].line&&t.stack[0].func===r.func)return t.stack[0].line=r.line,t.stack[0].context=r.context,!1}return t.stack.unshift(r),t.partial=!0,!0}return t.incomplete=!0,!1}function g(t,e){for(var i,o,r,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,c=[],l={},u=!1,A=g.caller;A&&!u;A=A.caller)if(A!==f&&A!==n.report){if(o={url:null,func:"?",args:[],line:null,column:null},A.name?o.func=A.name:(i=a.exec(A.toString()))&&(o.func=i[1]),void 0===o.func)try{o.func=i.input.substring(0,i.input.indexOf("{"))}catch(t){}if(r=d(A)){o.url=r.url,o.line=r.line,"?"===o.func&&(o.func=s(o.url,o.line));var m=/ '([^']+)' /.exec(t.message||t.description);m&&(o.column=h(m[1],r.url,r.line))}l[""+A]?u=!0:l[""+A]=!0,c.push(o)}e&&c.splice(0,e);var v={mode:"callers",name:t.name,message:t.message,stack:c};return p(v,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),v}function f(e,n){var a=null;n=null==n?0:+n;try{if(a=function(t){var e=t.stacktrace;if(e){for(var n,i=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,r=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,a=e.split("\n"),c=[],l=0;l<a.length;l+=2){var u=null;if((n=i.exec(a[l]))?u={url:n[2],line:+n[1],column:null,func:n[3],args:[]}:(n=r.exec(a[l]))&&(u={url:n[6],line:+n[1],column:+n[2],func:n[3]||n[4],args:n[5]?n[5].split(","):[]}),u){if(!u.func&&u.line&&(u.func=s(u.url,u.line)),u.line)try{u.context=o(u.url,u.line)}catch(t){}u.context||(u.context=[a[l+1]]),c.push(u)}}return c.length?{mode:"stacktrace",name:t.name,message:t.message,stack:c}:null}}(e))return a}catch(t){false}try{if(a=A(e))return a}catch(t){false}try{if(a=function(e){var n=e.message.split("\n");if(n.length<4)return null;var a,c=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,h=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,d=/^\s*Line (\d+) of function script\s*$/i,A=[],p=t&&t.document&&t.document.getElementsByTagName("script"),g=[];for(var f in p)r(p,f)&&!p[f].src&&g.push(p[f]);for(var m=2;m<n.length;m+=2){var v=null;if(a=c.exec(n[m]))v={url:a[2],func:a[3],args:[],line:+a[1],column:null};else if(a=h.exec(n[m])){v={url:a[3],func:a[4],args:[],line:+a[1],column:null};var y=+a[1],w=g[a[2]-1];if(w){var b=i(v.url);if(b){var x=(b=b.join("\n")).indexOf(w.innerText);x>=0&&(v.line=y+b.substring(0,x).split("\n").length)}}}else if(a=d.exec(n[m])){var C=t.location.href.replace(/#.*$/,""),D=u(new RegExp(l(n[m+1])),[C]);v={url:C,func:"",args:[],line:D?D.line:a[1],column:null}}if(v){v.func||(v.func=s(v.url,v.line));var S=o(v.url,v.line),_=S?S[Math.floor(S.length/2)]:null;S&&_.replace(/^\s*/,"")===n[m+1].replace(/^\s*/,"")?v.context=S:v.context=[n[m+1]],A.push(v)}}return A.length?{mode:"multiline",name:e.name,message:n[0],stack:A}:null}(e))return a}catch(t){false}try{if(a=g(e,n+1))return a}catch(t){false}return{name:e.name,message:e.message,mode:"failed"}}return f.augmentStackTraceWithInitialElement=p,f.computeStackTraceFromStackProp=A,f.guessFunctionName=s,f.gatherContext=o,f.ofCaller=function(t){t=1+(null==t?0:+t);try{throw new Error}catch(e){return f(e,t+1)}},f.getSource=i,f}(),n.extendToAsynchronousCallbacks=function(){var e=function(e){var i=t[e];t[e]=function(){var t=s.call(arguments),e=t[0];return"function"==typeof e&&(t[0]=n.wrap(e)),i.apply?i.apply(this,t):i(t[0],t[1])}};e("setTimeout"),e("setInterval")},n.remoteFetching||(n.remoteFetching=!0),n.collectWindowErrors||(n.collectWindowErrors=!0),(!n.linesOfContext||n.linesOfContext<1)&&(n.linesOfContext=11),"function"==typeof define&&define.amd?define("TraceKit",[],n):"undefined"!=typeof module&&module.exports&&t.module!==module?module.exports=n:t.TraceKit=n}function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t){return void 0===t}}("undefined"!=typeof window?window:global),t=!0,TraceKit.report.subscribe(e=>{if(t)try{e.userAgent=navigator.userAgent;const n=new XMLHttpRequest;n.onerror=function(){t=!1},n.open("POST","/ErrorLog"),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(e))}catch(e){t=!1}});try{function n(t,...e){if(!t||void 0===t.length)throw new Error("Must provide an array as the first parameter.");for(let n of e)for(let e of t)if(n(e))return e;return null}
/*!
 * jQuery JavaScript Library v3.5.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2020-05-04T22:49Z
 */
!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}(window,(function(t,e){var n=[],i=Object.getPrototypeOf,s=n.slice,o=n.flat?function(t){return n.flat.call(t)}:function(t){return n.concat.apply([],t)},r=n.push,a=n.indexOf,c={},l=c.toString,u=c.hasOwnProperty,h=u.toString,d=h.call(Object),A={},p=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},g=function(t){return null!=t&&t===t.window},f=t.document,m={type:!0,src:!0,nonce:!0,noModule:!0};function v(t,e,n){var i,s,o=(n=n||f).createElement("script");if(o.text=t,e)for(i in m)(s=e[i]||e.getAttribute&&e.getAttribute(i))&&o.setAttribute(i,s);n.head.appendChild(o).parentNode.removeChild(o)}function y(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[l.call(t)]||"object":typeof t}var w=function(t,e){return new w.fn.init(t,e)};function b(t){var e=!!t&&"length"in t&&t.length,n=y(t);return!p(t)&&!g(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}w.fn=w.prototype={jquery:"3.5.1",constructor:w,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(w.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:r,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var t,e,n,i,s,o,r=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[a]||{},a++),"object"==typeof r||p(r)||(r={}),a===c&&(r=this,a--);a<c;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&r!==i&&(l&&i&&(w.isPlainObject(i)||(s=Array.isArray(i)))?(n=r[e],o=s&&!Array.isArray(n)?[]:s||w.isPlainObject(n)?n:{},s=!1,r[e]=w.extend(l,o,i)):void 0!==i&&(r[e]=i));return r},w.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==l.call(t))&&(!(e=i(t))||"function"==typeof(n=u.call(e,"constructor")&&e.constructor)&&h.call(n)===d)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){v(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(b(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(b(Object(t))?w.merge(n,"string"==typeof t?[t]:t):r.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:a.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,s=t.length;i<n;i++)t[s++]=e[i];return t.length=s,t},grep:function(t,e,n){for(var i=[],s=0,o=t.length,r=!n;s<o;s++)!e(t[s],s)!==r&&i.push(t[s]);return i},map:function(t,e,n){var i,s,r=0,a=[];if(b(t))for(i=t.length;r<i;r++)null!=(s=e(t[r],r,n))&&a.push(s);else for(r in t)null!=(s=e(t[r],r,n))&&a.push(s);return o(a)},guid:1,support:A}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){c["[object "+e+"]"]=e.toLowerCase()}));var x=
/*!
 * Sizzle CSS Selector Engine v2.3.5
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2020-03-14
 */
function(t){var e,n,i,s,o,r,a,c,l,u,h,d,A,p,g,f,m,v,y,w="sizzle"+1*new Date,b=t.document,x=0,C=0,D=ct(),S=ct(),_=ct(),E=ct(),P=function(t,e){return t===e&&(h=!0),0},M={}.hasOwnProperty,B=[],k=B.pop,T=B.push,I=B.push,F=B.slice,L=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",N="(?:\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",H="\\["+R+"*("+N+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+R+"*\\]",z=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+H+")*)|.*)\\)|)",j=new RegExp(R+"+","g"),Q=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),U=new RegExp("^"+R+"*,"+R+"*"),W=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),G=new RegExp(R+"|>"),q=new RegExp(z),V=new RegExp("^"+N+"$"),Y={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,st=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){d()},rt=wt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{I.apply(B=F.call(b.childNodes),b.childNodes),B[b.childNodes.length].nodeType}catch(t){I={apply:B.length?function(t,e){T.apply(t,F.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function at(t,e,i,s){var o,a,l,u,h,p,m,v=e&&e.ownerDocument,b=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==b&&9!==b&&11!==b)return i;if(!s&&(d(e),e=e||A,g)){if(11!==b&&(h=$.exec(t)))if(o=h[1]){if(9===b){if(!(l=e.getElementById(o)))return i;if(l.id===o)return i.push(l),i}else if(v&&(l=v.getElementById(o))&&y(e,l)&&l.id===o)return i.push(l),i}else{if(h[2])return I.apply(i,e.getElementsByTagName(t)),i;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return I.apply(i,e.getElementsByClassName(o)),i}if(n.qsa&&!E[t+" "]&&(!f||!f.test(t))&&(1!==b||"object"!==e.nodeName.toLowerCase())){if(m=t,v=e,1===b&&(G.test(t)||W.test(t))){for((v=tt.test(t)&&mt(e.parentNode)||e)===e&&n.scope||((u=e.getAttribute("id"))?u=u.replace(it,st):e.setAttribute("id",u=w)),a=(p=r(t)).length;a--;)p[a]=(u?"#"+u:":scope")+" "+yt(p[a]);m=p.join(",")}try{return I.apply(i,v.querySelectorAll(m)),i}catch(e){E(t,!0)}finally{u===w&&e.removeAttribute("id")}}}return c(t.replace(Q,"$1"),e,i,s)}function ct(){var t=[];return function e(n,s){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=s}}function lt(t){return t[w]=!0,t}function ut(t){var e=A.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),s=n.length;s--;)i.attrHandle[n[s]]=e}function dt(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function At(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&rt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ft(t){return lt((function(e){return e=+e,lt((function(n,i){for(var s,o=t([],n.length,e),r=o.length;r--;)n[s=o[r]]&&(n[s]=!(i[s]=n[s]))}))}))}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=at.support={},o=at.isXML=function(t){var e=t.namespaceURI,n=(t.ownerDocument||t).documentElement;return!X.test(e||n&&n.nodeName||"HTML")},d=at.setDocument=function(t){var e,s,r=t?t.ownerDocument||t:b;return r!=A&&9===r.nodeType&&r.documentElement?(p=(A=r).documentElement,g=!o(A),b!=A&&(s=A.defaultView)&&s.top!==s&&(s.addEventListener?s.addEventListener("unload",ot,!1):s.attachEvent&&s.attachEvent("onunload",ot)),n.scope=ut((function(t){return p.appendChild(t).appendChild(A.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=ut((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ut((function(t){return t.appendChild(A.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=K.test(A.getElementsByClassName),n.getById=ut((function(t){return p.appendChild(t).id=w,!A.getElementsByName||!A.getElementsByName(w).length})),n.getById?(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,i,s,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(s=e.getElementsByName(t),i=0;o=s[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[s++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},m=[],f=[],(n.qsa=K.test(A.querySelectorAll))&&(ut((function(t){var e;p.appendChild(t).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+R+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||f.push("\\["+R+"*(?:value|"+O+")"),t.querySelectorAll("[id~="+w+"-]").length||f.push("~="),(e=A.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||f.push("\\["+R+"*name"+R+"*="+R+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||f.push(":checked"),t.querySelectorAll("a#"+w+"+*").length||f.push(".#.+[+~]"),t.querySelectorAll("\\\f"),f.push("[\\r\\n\\f]")})),ut((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=A.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&f.push("name"+R+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&f.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),f.push(",.*:")}))),(n.matchesSelector=K.test(v=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ut((function(t){n.disconnectedMatch=v.call(t,"*"),v.call(t,"[s!='']:x"),m.push("!=",z)})),f=f.length&&new RegExp(f.join("|")),m=m.length&&new RegExp(m.join("|")),e=K.test(p.compareDocumentPosition),y=e||K.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},P=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t==A||t.ownerDocument==b&&y(b,t)?-1:e==A||e.ownerDocument==b&&y(b,e)?1:u?L(u,t)-L(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,s=t.parentNode,o=e.parentNode,r=[t],a=[e];if(!s||!o)return t==A?-1:e==A?1:s?-1:o?1:u?L(u,t)-L(u,e):0;if(s===o)return dt(t,e);for(n=t;n=n.parentNode;)r.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;r[i]===a[i];)i++;return i?dt(r[i],a[i]):r[i]==b?-1:a[i]==b?1:0},A):A},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(d(t),n.matchesSelector&&g&&!E[e+" "]&&(!m||!m.test(e))&&(!f||!f.test(e)))try{var i=v.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){E(e,!0)}return at(e,A,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!=A&&d(t),y(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=A&&d(t);var s=i.attrHandle[e.toLowerCase()],o=s&&M.call(i.attrHandle,e.toLowerCase())?s(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},at.escape=function(t){return(t+"").replace(it,st)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,i=[],s=0,o=0;if(h=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(P),h){for(;e=t[o++];)e===t[o]&&(s=i.push(o));for(;s--;)t.splice(i[s],1)}return u=null,t},s=at.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=s(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=s(e);return n},(i=at.selectors={cacheLength:50,createPseudo:lt,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Y.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&q.test(n)&&(e=r(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=D[t+" "];return e||(e=new RegExp("(^|"+R+")"+t+"("+R+"|$)"))&&D(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var s=at.attr(i,t);return null==s?"!="===e:!e||(s+="","="===e?s===n:"!="===e?s!==n:"^="===e?n&&0===s.indexOf(n):"*="===e?n&&s.indexOf(n)>-1:"$="===e?n&&s.slice(-n.length)===n:"~="===e?(" "+s.replace(j," ")+" ").indexOf(n)>-1:"|="===e&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,s){var o="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===s?function(t){return!!t.parentNode}:function(e,n,c){var l,u,h,d,A,p,g=o!==r?"nextSibling":"previousSibling",f=e.parentNode,m=a&&e.nodeName.toLowerCase(),v=!c&&!a,y=!1;if(f){if(o){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[r?f.firstChild:f.lastChild],r&&v){for(y=(A=(l=(u=(h=(d=f)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&l[1])&&l[2],d=A&&f.childNodes[A];d=++A&&d&&d[g]||(y=A=0)||p.pop();)if(1===d.nodeType&&++y&&d===e){u[t]=[x,A,y];break}}else if(v&&(y=A=(l=(u=(h=(d=e)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&l[1]),!1===y)for(;(d=++A&&d&&d[g]||(y=A=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++y||(v&&((u=(h=d[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[x,y]),d!==e)););return(y-=s)===i||y%i==0&&y/i>=0}}},PSEUDO:function(t,e){var n,s=i.pseudos[t]||i.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return s[w]?s(e):s.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?lt((function(t,n){for(var i,o=s(t,e),r=o.length;r--;)t[i=L(t,o[r])]=!(n[i]=o[r])})):function(t){return s(t,0,n)}):s}},pseudos:{not:lt((function(t){var e=[],n=[],i=a(t.replace(Q,"$1"));return i[w]?lt((function(t,e,n,s){for(var o,r=i(t,null,s,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))})):function(t,s,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}})),has:lt((function(t){return function(e){return at(t,e).length>0}})),contains:lt((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||s(e)).indexOf(t)>-1}})),lang:lt((function(t){return V.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return J.test(t.nodeName)},input:function(t){return Z.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ft((function(){return[0]})),last:ft((function(t,e){return[e-1]})),eq:ft((function(t,e,n){return[n<0?n+e:n]})),even:ft((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:ft((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:ft((function(t,e,n){for(var i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t})),gt:ft((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=At(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=pt(e);function vt(){}function yt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function wt(t,e,n){var i=e.dir,s=e.next,o=s||i,r=n&&"parentNode"===o,a=C++;return e.first?function(e,n,s){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,s);return!1}:function(e,n,c){var l,u,h,d=[x,a];if(c){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,c))return!0}else for(;e=e[i];)if(1===e.nodeType||r)if(u=(h=e[w]||(e[w]={}))[e.uniqueID]||(h[e.uniqueID]={}),s&&s===e.nodeName.toLowerCase())e=e[i]||e;else{if((l=u[o])&&l[0]===x&&l[1]===a)return d[2]=l[2];if(u[o]=d,d[2]=t(e,n,c))return!0}return!1}}function bt(t){return t.length>1?function(e,n,i){for(var s=t.length;s--;)if(!t[s](e,n,i))return!1;return!0}:t[0]}function xt(t,e,n,i,s){for(var o,r=[],a=0,c=t.length,l=null!=e;a<c;a++)(o=t[a])&&(n&&!n(o,i,s)||(r.push(o),l&&e.push(a)));return r}function Ct(t,e,n,i,s,o){return i&&!i[w]&&(i=Ct(i)),s&&!s[w]&&(s=Ct(s,o)),lt((function(o,r,a,c){var l,u,h,d=[],A=[],p=r.length,g=o||function(t,e,n){for(var i=0,s=e.length;i<s;i++)at(t,e[i],n);return n}(e||"*",a.nodeType?[a]:a,[]),f=!t||!o&&e?g:xt(g,d,t,a,c),m=n?s||(o?t:p||i)?[]:r:f;if(n&&n(f,m,a,c),i)for(l=xt(m,A),i(l,[],a,c),u=l.length;u--;)(h=l[u])&&(m[A[u]]=!(f[A[u]]=h));if(o){if(s||t){if(s){for(l=[],u=m.length;u--;)(h=m[u])&&l.push(f[u]=h);s(null,m=[],l,c)}for(u=m.length;u--;)(h=m[u])&&(l=s?L(o,h):d[u])>-1&&(o[l]=!(r[l]=h))}}else m=xt(m===r?m.splice(p,m.length):m),s?s(null,r,m,c):I.apply(r,m)}))}function Dt(t){for(var e,n,s,o=t.length,r=i.relative[t[0].type],a=r||i.relative[" "],c=r?1:0,u=wt((function(t){return t===e}),a,!0),h=wt((function(t){return L(e,t)>-1}),a,!0),d=[function(t,n,i){var s=!r&&(i||n!==l)||((e=n).nodeType?u(t,n,i):h(t,n,i));return e=null,s}];c<o;c++)if(n=i.relative[t[c].type])d=[wt(bt(d),n)];else{if((n=i.filter[t[c].type].apply(null,t[c].matches))[w]){for(s=++c;s<o&&!i.relative[t[s].type];s++);return Ct(c>1&&bt(d),c>1&&yt(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(Q,"$1"),n,c<s&&Dt(t.slice(c,s)),s<o&&Dt(t=t.slice(s)),s<o&&yt(t))}d.push(n)}return bt(d)}return vt.prototype=i.filters=i.pseudos,i.setFilters=new vt,r=at.tokenize=function(t,e){var n,s,o,r,a,c,l,u=S[t+" "];if(u)return e?0:u.slice(0);for(a=t,c=[],l=i.preFilter;a;){for(r in n&&!(s=U.exec(a))||(s&&(a=a.slice(s[0].length)||a),c.push(o=[])),n=!1,(s=W.exec(a))&&(n=s.shift(),o.push({value:n,type:s[0].replace(Q," ")}),a=a.slice(n.length)),i.filter)!(s=Y[r].exec(a))||l[r]&&!(s=l[r](s))||(n=s.shift(),o.push({value:n,type:r,matches:s}),a=a.slice(n.length));if(!n)break}return e?a.length:a?at.error(t):S(t,c).slice(0)},a=at.compile=function(t,e){var n,s=[],o=[],a=_[t+" "];if(!a){for(e||(e=r(t)),n=e.length;n--;)(a=Dt(e[n]))[w]?s.push(a):o.push(a);(a=_(t,function(t,e){var n=e.length>0,s=t.length>0,o=function(o,r,a,c,u){var h,p,f,m=0,v="0",y=o&&[],w=[],b=l,C=o||s&&i.find.TAG("*",u),D=x+=null==b?1:Math.random()||.1,S=C.length;for(u&&(l=r==A||r||u);v!==S&&null!=(h=C[v]);v++){if(s&&h){for(p=0,r||h.ownerDocument==A||(d(h),a=!g);f=t[p++];)if(f(h,r||A,a)){c.push(h);break}u&&(x=D)}n&&((h=!f&&h)&&m--,o&&y.push(h))}if(m+=v,n&&v!==m){for(p=0;f=e[p++];)f(y,w,r,a);if(o){if(m>0)for(;v--;)y[v]||w[v]||(w[v]=k.call(c));w=xt(w)}I.apply(c,w),u&&!o&&w.length>0&&m+e.length>1&&at.uniqueSort(c)}return u&&(x=D,l=b),y};return n?lt(o):o}(o,s))).selector=t}return a},c=at.select=function(t,e,n,s){var o,c,l,u,h,d="function"==typeof t&&t,A=!s&&r(t=d.selector||t);if(n=n||[],1===A.length){if((c=A[0]=A[0].slice(0)).length>2&&"ID"===(l=c[0]).type&&9===e.nodeType&&g&&i.relative[c[1].type]){if(!(e=(i.find.ID(l.matches[0].replace(et,nt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(o=Y.needsContext.test(t)?0:c.length;o--&&(l=c[o],!i.relative[u=l.type]);)if((h=i.find[u])&&(s=h(l.matches[0].replace(et,nt),tt.test(c[0].type)&&mt(e.parentNode)||e))){if(c.splice(o,1),!(t=s.length&&yt(c)))return I.apply(n,s),n;break}}return(d||a(t,A))(s,e,!g,n,!e||tt.test(t)&&mt(e.parentNode)||e),n},n.sortStable=w.split("").sort(P).join("")===w,n.detectDuplicates=!!h,d(),n.sortDetached=ut((function(t){return 1&t.compareDocumentPosition(A.createElement("fieldset"))})),ut((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ht("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ut((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ht("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ut((function(t){return null==t.getAttribute("disabled")}))||ht(O,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),at}(t);w.find=x,w.expr=x.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=x.uniqueSort,w.text=x.getText,w.isXMLDoc=x.isXML,w.contains=x.contains,w.escapeSelector=x.escape;var C=function(t,e,n){for(var i=[],s=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&w(t).is(n))break;i.push(t)}return i},D=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},S=w.expr.match.needsContext;function _(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var E=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(t,e,n){return p(e)?w.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?w.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?w.grep(t,(function(t){return a.call(e,t)>-1!==n})):w.filter(e,t,n)}w.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?w.find.matchesSelector(i,t)?[i]:[]:w.find.matches(t,w.grep(e,(function(t){return 1===t.nodeType})))},w.fn.extend({find:function(t){var e,n,i=this.length,s=this;if("string"!=typeof t)return this.pushStack(w(t).filter((function(){for(e=0;e<i;e++)if(w.contains(s[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)w.find(t,s[e],n);return i>1?w.uniqueSort(n):n},filter:function(t){return this.pushStack(P(this,t||[],!1))},not:function(t){return this.pushStack(P(this,t||[],!0))},is:function(t){return!!P(this,"string"==typeof t&&S.test(t)?w(t):t||[],!1).length}});var M,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,n){var i,s;if(!t)return this;if(n=n||M,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:B.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof w?e[0]:e,w.merge(this,w.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:f,!0)),E.test(i[1])&&w.isPlainObject(e))for(i in e)p(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(s=f.getElementById(i[2]))&&(this[0]=s,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):p(t)?void 0!==n.ready?n.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,M=w(f);var k=/^(?:parents|prev(?:Until|All))/,T={children:!0,contents:!0,next:!0,prev:!0};function I(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(w.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,s=this.length,o=[],r="string"!=typeof t&&w(t);if(!S.test(t))for(;i<s;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?a.call(w(t),this[0]):a.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return C(t,"parentNode")},parentsUntil:function(t,e,n){return C(t,"parentNode",n)},next:function(t){return I(t,"nextSibling")},prev:function(t){return I(t,"previousSibling")},nextAll:function(t){return C(t,"nextSibling")},prevAll:function(t){return C(t,"previousSibling")},nextUntil:function(t,e,n){return C(t,"nextSibling",n)},prevUntil:function(t,e,n){return C(t,"previousSibling",n)},siblings:function(t){return D((t.parentNode||{}).firstChild,t)},children:function(t){return D(t.firstChild)},contents:function(t){return null!=t.contentDocument&&i(t.contentDocument)?t.contentDocument:(_(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},(function(t,e){w.fn[t]=function(n,i){var s=w.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(s=w.filter(i,s)),this.length>1&&(T[t]||w.uniqueSort(s),k.test(t)&&s.reverse()),this.pushStack(s)}}));var F=/[^\x20\t\r\n\f]+/g;function L(t){return t}function O(t){throw t}function R(t,e,n,i){var s;try{t&&p(s=t.promise)?s.call(t).done(e).fail(n):t&&p(s=t.then)?s.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}w.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return w.each(t.match(F)||[],(function(t,n){e[n]=!0})),e}(t):w.extend({},t);var e,n,i,s,o=[],r=[],a=-1,c=function(){for(s=s||t.once,i=e=!0;r.length;a=-1)for(n=r.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=o.length,n=!1);t.memory||(n=!1),e=!1,s&&(o=n?[]:"")},l={add:function(){return o&&(n&&!e&&(a=o.length-1,r.push(n)),function e(n){w.each(n,(function(n,i){p(i)?t.unique&&l.has(i)||o.push(i):i&&i.length&&"string"!==y(i)&&e(i)}))}(arguments),n&&!e&&c()),this},remove:function(){return w.each(arguments,(function(t,e){for(var n;(n=w.inArray(e,o,n))>-1;)o.splice(n,1),n<=a&&a--})),this},has:function(t){return t?w.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return s=r=[],o=n="",this},disabled:function(){return!o},lock:function(){return s=r=[],n||e||(o=n=""),this},locked:function(){return!!s},fireWith:function(t,n){return s||(n=[t,(n=n||[]).slice?n.slice():n],r.push(n),e||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},w.extend({Deferred:function(e){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],i="pending",s={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var t=arguments;return w.Deferred((function(e){w.each(n,(function(n,i){var s=p(t[i[4]])&&t[i[4]];o[i[1]]((function(){var t=s&&s.apply(this,arguments);t&&p(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,s?[t]:arguments)}))})),t=null})).promise()},then:function(e,i,s){var o=0;function r(e,n,i,s){return function(){var a=this,c=arguments,l=function(){var t,l;if(!(e<o)){if((t=i.apply(a,c))===n.promise())throw new TypeError("Thenable self-resolution");l=t&&("object"==typeof t||"function"==typeof t)&&t.then,p(l)?s?l.call(t,r(o,n,L,s),r(o,n,O,s)):(o++,l.call(t,r(o,n,L,s),r(o,n,O,s),r(o,n,L,n.notifyWith))):(i!==L&&(a=void 0,c=[t]),(s||n.resolveWith)(a,c))}},u=s?l:function(){try{l()}catch(t){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(t,u.stackTrace),e+1>=o&&(i!==O&&(a=void 0,c=[t]),n.rejectWith(a,c))}};e?u():(w.Deferred.getStackHook&&(u.stackTrace=w.Deferred.getStackHook()),t.setTimeout(u))}}return w.Deferred((function(t){n[0][3].add(r(0,t,p(s)?s:L,t.notifyWith)),n[1][3].add(r(0,t,p(e)?e:L)),n[2][3].add(r(0,t,p(i)?i:O))})).promise()},promise:function(t){return null!=t?w.extend(t,s):s}},o={};return w.each(n,(function(t,e){var r=e[2],a=e[5];s[e[1]]=r.add,a&&r.add((function(){i=a}),n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),r.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=r.fireWith})),s.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,n=e,i=Array(n),o=s.call(arguments),r=w.Deferred(),a=function(t){return function(n){i[t]=this,o[t]=arguments.length>1?s.call(arguments):n,--e||r.resolveWith(i,o)}};if(e<=1&&(R(t,r.done(a(n)).resolve,r.reject,!e),"pending"===r.state()||p(o[n]&&o[n].then)))return r.then();for(;n--;)R(o[n],a(n),r.reject);return r.promise()}});var N=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&N.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},w.readyException=function(e){t.setTimeout((function(){throw e}))};var H=w.Deferred();function z(){f.removeEventListener("DOMContentLoaded",z),t.removeEventListener("load",z),w.ready()}w.fn.ready=function(t){return H.then(t).catch((function(t){w.readyException(t)})),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==t&&--w.readyWait>0||H.resolveWith(f,[w]))}}),w.ready.then=H.then,"complete"===f.readyState||"loading"!==f.readyState&&!f.documentElement.doScroll?t.setTimeout(w.ready):(f.addEventListener("DOMContentLoaded",z),t.addEventListener("load",z));var j=function(t,e,n,i,s,o,r){var a=0,c=t.length,l=null==n;if("object"===y(n))for(a in s=!0,n)j(t,e,a,n[a],!0,o,r);else if(void 0!==i&&(s=!0,p(i)||(r=!0),l&&(r?(e.call(t,i),e=null):(l=e,e=function(t,e,n){return l.call(w(t),n)})),e))for(;a<c;a++)e(t[a],n,r?i:i.call(t[a],a,e(t[a],n)));return s?t:l?e.call(t):c?e(t[0],n):o},Q=/^-ms-/,U=/-([a-z])/g;function W(t,e){return e.toUpperCase()}function G(t){return t.replace(Q,"ms-").replace(U,W)}var q=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function V(){this.expando=w.expando+V.uid++}V.uid=1,V.prototype={cache:function(t){var e=t[this.expando];return e||(e={},q(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,s=this.cache(t);if("string"==typeof e)s[G(e)]=n;else for(i in e)s[G(i)]=e[i];return s},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][G(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(G):(e=G(e))in i?[e]:e.match(F)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||w.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var Y=new V,X=new V,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function K(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(J,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Z.test(t)?JSON.parse(t):t)}(n)}catch(t){}X.set(t,e,n)}else n=void 0;return n}w.extend({hasData:function(t){return X.hasData(t)||Y.hasData(t)},data:function(t,e,n){return X.access(t,e,n)},removeData:function(t,e){X.remove(t,e)},_data:function(t,e,n){return Y.access(t,e,n)},_removeData:function(t,e){Y.remove(t,e)}}),w.fn.extend({data:function(t,e){var n,i,s,o=this[0],r=o&&o.attributes;if(void 0===t){if(this.length&&(s=X.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){for(n=r.length;n--;)r[n]&&0===(i=r[n].name).indexOf("data-")&&(i=G(i.slice(5)),K(o,i,s[i]));Y.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each((function(){X.set(this,t)})):j(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=X.get(o,t))||void 0!==(n=K(o,t))?n:void 0;this.each((function(){X.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){X.remove(this,t)}))}}),w.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Y.get(t,e),n&&(!i||Array.isArray(n)?i=Y.access(t,e,w.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=w.queue(t,e),i=n.length,s=n.shift(),o=w._queueHooks(t,e);"inprogress"===s&&(s=n.shift(),i--),s&&("fx"===e&&n.unshift("inprogress"),delete o.stop,s.call(t,(function(){w.dequeue(t,e)}),o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Y.get(t,n)||Y.access(t,n,{empty:w.Callbacks("once memory").add((function(){Y.remove(t,[e+"queue",n])}))})}}),w.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?w.queue(this[0],t):void 0===e?this:this.each((function(){var n=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&w.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){w.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,s=w.Deferred(),o=this,r=this.length,a=function(){--i||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)(n=Y.get(o[r],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),s.promise(e)}});var $=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,tt=new RegExp("^(?:([+-])=|)("+$+")([a-z%]*)$","i"),et=["Top","Right","Bottom","Left"],nt=f.documentElement,it=function(t){return w.contains(t.ownerDocument,t)},st={composed:!0};nt.getRootNode&&(it=function(t){return w.contains(t.ownerDocument,t)||t.getRootNode(st)===t.ownerDocument});var ot=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&it(t)&&"none"===w.css(t,"display")};function rt(t,e,n,i){var s,o,r=20,a=i?function(){return i.cur()}:function(){return w.css(t,e,"")},c=a(),l=n&&n[3]||(w.cssNumber[e]?"":"px"),u=t.nodeType&&(w.cssNumber[e]||"px"!==l&&+c)&&tt.exec(w.css(t,e));if(u&&u[3]!==l){for(c/=2,l=l||u[3],u=+c||1;r--;)w.style(t,e,u+l),(1-o)*(1-(o=a()/c||.5))<=0&&(r=0),u/=o;u*=2,w.style(t,e,u+l),n=n||[]}return n&&(u=+u||+c||0,s=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=u,i.end=s)),s}var at={};function ct(t){var e,n=t.ownerDocument,i=t.nodeName,s=at[i];return s||(e=n.body.appendChild(n.createElement(i)),s=w.css(e,"display"),e.parentNode.removeChild(e),"none"===s&&(s="block"),at[i]=s,s)}function lt(t,e){for(var n,i,s=[],o=0,r=t.length;o<r;o++)(i=t[o]).style&&(n=i.style.display,e?("none"===n&&(s[o]=Y.get(i,"display")||null,s[o]||(i.style.display="")),""===i.style.display&&ot(i)&&(s[o]=ct(i))):"none"!==n&&(s[o]="none",Y.set(i,"display",n)));for(o=0;o<r;o++)null!=s[o]&&(t[o].style.display=s[o]);return t}w.fn.extend({show:function(){return lt(this,!0)},hide:function(){return lt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){ot(this)?w(this).show():w(this).hide()}))}});var ut,ht,dt=/^(?:checkbox|radio)$/i,At=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,pt=/^$|^module$|\/(?:java|ecma)script/i;ut=f.createDocumentFragment().appendChild(f.createElement("div")),(ht=f.createElement("input")).setAttribute("type","radio"),ht.setAttribute("checked","checked"),ht.setAttribute("name","t"),ut.appendChild(ht),A.checkClone=ut.cloneNode(!0).cloneNode(!0).lastChild.checked,ut.innerHTML="<textarea>x</textarea>",A.noCloneChecked=!!ut.cloneNode(!0).lastChild.defaultValue,ut.innerHTML="<option></option>",A.option=!!ut.lastChild;var gt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ft(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&_(t,e)?w.merge([t],n):n}function mt(t,e){for(var n=0,i=t.length;n<i;n++)Y.set(t[n],"globalEval",!e||Y.get(e[n],"globalEval"))}gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td,A.option||(gt.optgroup=gt.option=[1,"<select multiple='multiple'>","</select>"]);var vt=/<|&#?\w+;/;function yt(t,e,n,i,s){for(var o,r,a,c,l,u,h=e.createDocumentFragment(),d=[],A=0,p=t.length;A<p;A++)if((o=t[A])||0===o)if("object"===y(o))w.merge(d,o.nodeType?[o]:o);else if(vt.test(o)){for(r=r||h.appendChild(e.createElement("div")),a=(At.exec(o)||["",""])[1].toLowerCase(),c=gt[a]||gt._default,r.innerHTML=c[1]+w.htmlPrefilter(o)+c[2],u=c[0];u--;)r=r.lastChild;w.merge(d,r.childNodes),(r=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",A=0;o=d[A++];)if(i&&w.inArray(o,i)>-1)s&&s.push(o);else if(l=it(o),r=ft(h.appendChild(o),"script"),l&&mt(r),n)for(u=0;o=r[u++];)pt.test(o.type||"")&&n.push(o);return h}var wt=/^key/,bt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xt=/^([^.]*)(?:\.(.+)|)/;function Ct(){return!0}function Dt(){return!1}function St(t,e){return t===function(){try{return f.activeElement}catch(t){}}()==("focus"===e)}function _t(t,e,n,i,s,o){var r,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)_t(t,a,n,i,e[a],o);return t}if(null==i&&null==s?(s=n,i=n=void 0):null==s&&("string"==typeof n?(s=i,i=void 0):(s=i,i=n,n=void 0)),!1===s)s=Dt;else if(!s)return t;return 1===o&&(r=s,(s=function(t){return w().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=w.guid++)),t.each((function(){w.event.add(this,e,s,i,n)}))}function Et(t,e,n){n?(Y.set(t,e,!1),w.event.add(t,e,{namespace:!1,handler:function(t){var i,o,r=Y.get(this,e);if(1&t.isTrigger&&this[e]){if(r.length)(w.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=s.call(arguments),Y.set(this,e,r),i=n(this,e),this[e](),r!==(o=Y.get(this,e))||i?Y.set(this,e,!1):o={},r!==o)return t.stopImmediatePropagation(),t.preventDefault(),o.value}else r.length&&(Y.set(this,e,{value:w.event.trigger(w.extend(r[0],w.Event.prototype),r.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Y.get(t,e)&&w.event.add(t,e,Ct)}w.event={global:{},add:function(t,e,n,i,s){var o,r,a,c,l,u,h,d,A,p,g,f=Y.get(t);if(q(t))for(n.handler&&(n=(o=n).handler,s=o.selector),s&&w.find.matchesSelector(nt,s),n.guid||(n.guid=w.guid++),(c=f.events)||(c=f.events=Object.create(null)),(r=f.handle)||(r=f.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(F)||[""]).length;l--;)A=g=(a=xt.exec(e[l])||[])[1],p=(a[2]||"").split(".").sort(),A&&(h=w.event.special[A]||{},A=(s?h.delegateType:h.bindType)||A,h=w.event.special[A]||{},u=w.extend({type:A,origType:g,data:i,handler:n,guid:n.guid,selector:s,needsContext:s&&w.expr.match.needsContext.test(s),namespace:p.join(".")},o),(d=c[A])||((d=c[A]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,p,r)||t.addEventListener&&t.addEventListener(A,r)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),s?d.splice(d.delegateCount++,0,u):d.push(u),w.event.global[A]=!0)},remove:function(t,e,n,i,s){var o,r,a,c,l,u,h,d,A,p,g,f=Y.hasData(t)&&Y.get(t);if(f&&(c=f.events)){for(l=(e=(e||"").match(F)||[""]).length;l--;)if(A=g=(a=xt.exec(e[l])||[])[1],p=(a[2]||"").split(".").sort(),A){for(h=w.event.special[A]||{},d=c[A=(i?h.delegateType:h.bindType)||A]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=d.length;o--;)u=d[o],!s&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));r&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,f.handle)||w.removeEvent(t,A,f.handle),delete c[A])}else for(A in c)w.event.remove(t,A+e[l],n,i,!0);w.isEmptyObject(c)&&Y.remove(t,"handle events")}},dispatch:function(t){var e,n,i,s,o,r,a=new Array(arguments.length),c=w.event.fix(t),l=(Y.get(this,"events")||Object.create(null))[c.type]||[],u=w.event.special[c.type]||{};for(a[0]=c,e=1;e<arguments.length;e++)a[e]=arguments[e];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(r=w.event.handlers.call(this,c,l),e=0;(s=r[e++])&&!c.isPropagationStopped();)for(c.currentTarget=s.elem,n=0;(o=s.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==o.namespace&&!c.rnamespace.test(o.namespace)||(c.handleObj=o,c.data=o.data,void 0!==(i=((w.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a))&&!1===(c.result=i)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(t,e){var n,i,s,o,r,a=[],c=e.delegateCount,l=t.target;if(c&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(o=[],r={},n=0;n<c;n++)void 0===r[s=(i=e[n]).selector+" "]&&(r[s]=i.needsContext?w(s,this).index(l)>-1:w.find(s,this,null,[l]).length),r[s]&&o.push(i);o.length&&a.push({elem:l,handlers:o})}return l=this,c<e.length&&a.push({elem:l,handlers:e.slice(c)}),a},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:p(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return dt.test(e.type)&&e.click&&_(e,"input")&&Et(e,"click",Ct),!1},trigger:function(t){var e=this||t;return dt.test(e.type)&&e.click&&_(e,"input")&&Et(e,"click"),!0},_default:function(t){var e=t.target;return dt.test(e.type)&&e.click&&_(e,"input")&&Y.get(e,"click")||_(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Ct:Dt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Dt,isPropagationStopped:Dt,isImmediatePropagationStopped:Dt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Ct,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Ct,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Ct,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&wt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&bt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},(function(t,e){w.event.special[t]={setup:function(){return Et(this,t,St),!1},trigger:function(){return Et(this,t),!0},delegateType:e}})),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,s=t.relatedTarget,o=t.handleObj;return s&&(s===i||w.contains(i,s))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}})),w.fn.extend({on:function(t,e,n,i){return _t(this,t,e,n,i)},one:function(t,e,n,i){return _t(this,t,e,n,i,1)},off:function(t,e,n){var i,s;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,w(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Dt),this.each((function(){w.event.remove(this,t,n,e)}))}});var Pt=/<script|<style|<link/i,Mt=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function kt(t,e){return _(t,"table")&&_(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function Tt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function It(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ft(t,e){var n,i,s,o,r,a;if(1===e.nodeType){if(Y.hasData(t)&&(a=Y.get(t).events))for(s in Y.remove(e,"handle events"),a)for(n=0,i=a[s].length;n<i;n++)w.event.add(e,s,a[s][n]);X.hasData(t)&&(o=X.access(t),r=w.extend({},o),X.set(e,r))}}function Lt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&dt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Ot(t,e,n,i){e=o(e);var s,r,a,c,l,u,h=0,d=t.length,g=d-1,f=e[0],m=p(f);if(m||d>1&&"string"==typeof f&&!A.checkClone&&Mt.test(f))return t.each((function(s){var o=t.eq(s);m&&(e[0]=f.call(this,s,o.html())),Ot(o,e,n,i)}));if(d&&(r=(s=yt(e,t[0].ownerDocument,!1,t,i)).firstChild,1===s.childNodes.length&&(s=r),r||i)){for(c=(a=w.map(ft(s,"script"),Tt)).length;h<d;h++)l=s,h!==g&&(l=w.clone(l,!0,!0),c&&w.merge(a,ft(l,"script"))),n.call(t[h],l,h);if(c)for(u=a[a.length-1].ownerDocument,w.map(a,It),h=0;h<c;h++)l=a[h],pt.test(l.type||"")&&!Y.access(l,"globalEval")&&w.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&!l.noModule&&w._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):v(l.textContent.replace(Bt,""),l,u))}return t}function Rt(t,e,n){for(var i,s=e?w.filter(e,t):t,o=0;null!=(i=s[o]);o++)n||1!==i.nodeType||w.cleanData(ft(i)),i.parentNode&&(n&&it(i)&&mt(ft(i,"script")),i.parentNode.removeChild(i));return t}w.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,s,o,r,a=t.cloneNode(!0),c=it(t);if(!(A.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(r=ft(a),i=0,s=(o=ft(t)).length;i<s;i++)Lt(o[i],r[i]);if(e)if(n)for(o=o||ft(t),r=r||ft(a),i=0,s=o.length;i<s;i++)Ft(o[i],r[i]);else Ft(t,a);return(r=ft(a,"script")).length>0&&mt(r,!c&&ft(t,"script")),a},cleanData:function(t){for(var e,n,i,s=w.event.special,o=0;void 0!==(n=t[o]);o++)if(q(n)){if(e=n[Y.expando]){if(e.events)for(i in e.events)s[i]?w.event.remove(n,i):w.removeEvent(n,i,e.handle);n[Y.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),w.fn.extend({detach:function(t){return Rt(this,t,!0)},remove:function(t){return Rt(this,t)},text:function(t){return j(this,(function(t){return void 0===t?w.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Ot(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||kt(this,t).appendChild(t)}))},prepend:function(){return Ot(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=kt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Ot(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Ot(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(ft(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return w.clone(this,t,e)}))},html:function(t){return j(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Pt.test(t)&&!gt[(At.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(w.cleanData(ft(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Ot(this,arguments,(function(e){var n=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(ft(this)),n&&n.replaceChild(e,this))}),t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){w.fn[t]=function(t){for(var n,i=[],s=w(t),o=s.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(s[a])[e](n),r.apply(i,n.get());return this.pushStack(i)}}));var Nt=new RegExp("^("+$+")(?!px)[a-z%]+$","i"),Ht=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},zt=function(t,e,n){var i,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];for(s in i=n.call(t),e)t.style[s]=o[s];return i},jt=new RegExp(et.join("|"),"i");function Qt(t,e,n){var i,s,o,r,a=t.style;return(n=n||Ht(t))&&(""!==(r=n.getPropertyValue(e)||n[e])||it(t)||(r=w.style(t,e)),!A.pixelBoxStyles()&&Nt.test(r)&&jt.test(e)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=n.width,a.width=i,a.minWidth=s,a.maxWidth=o)),void 0!==r?r+"":r}function Ut(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nt.appendChild(l).appendChild(u);var e=t.getComputedStyle(u);i="1%"!==e.top,c=12===n(e.marginLeft),u.style.right="60%",r=36===n(e.right),s=36===n(e.width),u.style.position="absolute",o=12===n(u.offsetWidth/3),nt.removeChild(l),u=null}}function n(t){return Math.round(parseFloat(t))}var i,s,o,r,a,c,l=f.createElement("div"),u=f.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",A.clearCloneStyle="content-box"===u.style.backgroundClip,w.extend(A,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),r},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,n,i,s;return null==a&&(e=f.createElement("table"),n=f.createElement("tr"),i=f.createElement("div"),e.style.cssText="position:absolute;left:-11111px",n.style.height="1px",i.style.height="9px",nt.appendChild(e).appendChild(n).appendChild(i),s=t.getComputedStyle(n),a=parseInt(s.height)>3,nt.removeChild(e)),a}}))}();var Wt=["Webkit","Moz","ms"],Gt=f.createElement("div").style,qt={};function Vt(t){var e=w.cssProps[t]||qt[t];return e||(t in Gt?t:qt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Wt.length;n--;)if((t=Wt[n]+e)in Gt)return t}(t)||t)}var Yt=/^(none|table(?!-c[ea]).+)/,Xt=/^--/,Zt={position:"absolute",visibility:"hidden",display:"block"},Jt={letterSpacing:"0",fontWeight:"400"};function Kt(t,e,n){var i=tt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function $t(t,e,n,i,s,o){var r="width"===e?1:0,a=0,c=0;if(n===(i?"border":"content"))return 0;for(;r<4;r+=2)"margin"===n&&(c+=w.css(t,n+et[r],!0,s)),i?("content"===n&&(c-=w.css(t,"padding"+et[r],!0,s)),"margin"!==n&&(c-=w.css(t,"border"+et[r]+"Width",!0,s))):(c+=w.css(t,"padding"+et[r],!0,s),"padding"!==n?c+=w.css(t,"border"+et[r]+"Width",!0,s):a+=w.css(t,"border"+et[r]+"Width",!0,s));return!i&&o>=0&&(c+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-c-a-.5))||0),c}function te(t,e,n){var i=Ht(t),s=(!A.boxSizingReliable()||n)&&"border-box"===w.css(t,"boxSizing",!1,i),o=s,r=Qt(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(Nt.test(r)){if(!n)return r;r="auto"}return(!A.boxSizingReliable()&&s||!A.reliableTrDimensions()&&_(t,"tr")||"auto"===r||!parseFloat(r)&&"inline"===w.css(t,"display",!1,i))&&t.getClientRects().length&&(s="border-box"===w.css(t,"boxSizing",!1,i),(o=a in t)&&(r=t[a])),(r=parseFloat(r)||0)+$t(t,e,n||(s?"border":"content"),o,i,r)+"px"}function ee(t,e,n,i,s){return new ee.prototype.init(t,e,n,i,s)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Qt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,r,a=G(e),c=Xt.test(e),l=t.style;if(c||(e=Vt(a)),r=w.cssHooks[e]||w.cssHooks[a],void 0===n)return r&&"get"in r&&void 0!==(s=r.get(t,!1,i))?s:l[e];"string"===(o=typeof n)&&(s=tt.exec(n))&&s[1]&&(n=rt(t,e,s),o="number"),null!=n&&n==n&&("number"!==o||c||(n+=s&&s[3]||(w.cssNumber[a]?"":"px")),A.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),r&&"set"in r&&void 0===(n=r.set(t,n,i))||(c?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,i){var s,o,r,a=G(e);return Xt.test(e)||(e=Vt(a)),(r=w.cssHooks[e]||w.cssHooks[a])&&"get"in r&&(s=r.get(t,!0,n)),void 0===s&&(s=Qt(t,e,i)),"normal"===s&&e in Jt&&(s=Jt[e]),""===n||n?(o=parseFloat(s),!0===n||isFinite(o)?o||0:s):s}}),w.each(["height","width"],(function(t,e){w.cssHooks[e]={get:function(t,n,i){if(n)return!Yt.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?te(t,e,i):zt(t,Zt,(function(){return te(t,e,i)}))},set:function(t,n,i){var s,o=Ht(t),r=!A.scrollboxSize()&&"absolute"===o.position,a=(r||i)&&"border-box"===w.css(t,"boxSizing",!1,o),c=i?$t(t,e,i,a,o):0;return a&&r&&(c-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-$t(t,e,"border",!1,o)-.5)),c&&(s=tt.exec(n))&&"px"!==(s[3]||"px")&&(t.style[e]=n,n=w.css(t,e)),Kt(0,n,c)}}})),w.cssHooks.marginLeft=Ut(A.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Qt(t,"marginLeft"))||t.getBoundingClientRect().left-zt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),w.each({margin:"",padding:"",border:"Width"},(function(t,e){w.cssHooks[t+e]={expand:function(n){for(var i=0,s={},o="string"==typeof n?n.split(" "):[n];i<4;i++)s[t+et[i]+e]=o[i]||o[i-2]||o[0];return s}},"margin"!==t&&(w.cssHooks[t+e].set=Kt)})),w.fn.extend({css:function(t,e){return j(this,(function(t,e,n){var i,s,o={},r=0;if(Array.isArray(e)){for(i=Ht(t),s=e.length;r<s;r++)o[e[r]]=w.css(t,e[r],!1,i);return o}return void 0!==n?w.style(t,e,n):w.css(t,e)}),t,e,arguments.length>1)}}),w.Tween=ee,ee.prototype={constructor:ee,init:function(t,e,n,i,s,o){this.elem=t,this.prop=n,this.easing=s||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var t=ee.propHooks[this.prop];return t&&t.get?t.get(this):ee.propHooks._default.get(this)},run:function(t){var e,n=ee.propHooks[this.prop];return this.options.duration?this.pos=e=w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ee.propHooks._default.set(this),this}},ee.prototype.init.prototype=ee.prototype,ee.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||!w.cssHooks[t.prop]&&null==t.elem.style[Vt(t.prop)]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}},ee.propHooks.scrollTop=ee.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=ee.prototype.init,w.fx.step={};var ne,ie,se=/^(?:toggle|show|hide)$/,oe=/queueHooks$/;function re(){ie&&(!1===f.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(re):t.setTimeout(re,w.fx.interval),w.fx.tick())}function ae(){return t.setTimeout((function(){ne=void 0})),ne=Date.now()}function ce(t,e){var n,i=0,s={height:t};for(e=e?1:0;i<4;i+=2-e)s["margin"+(n=et[i])]=s["padding"+n]=t;return e&&(s.opacity=s.width=t),s}function le(t,e,n){for(var i,s=(ue.tweeners[e]||[]).concat(ue.tweeners["*"]),o=0,r=s.length;o<r;o++)if(i=s[o].call(n,e,t))return i}function ue(t,e,n){var i,s,o=0,r=ue.prefilters.length,a=w.Deferred().always((function(){delete c.elem})),c=function(){if(s)return!1;for(var e=ne||ae(),n=Math.max(0,l.startTime+l.duration-e),i=1-(n/l.duration||0),o=0,r=l.tweens.length;o<r;o++)l.tweens[o].run(i);return a.notifyWith(t,[l,i,n]),i<1&&r?n:(r||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:e,originalOptions:n,startTime:ne||ae(),duration:n.duration,tweens:[],createTween:function(e,n){var i=w.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(s)return this;for(s=!0;n<i;n++)l.tweens[n].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),u=l.props;for(!function(t,e){var n,i,s,o,r;for(n in t)if(s=e[i=G(n)],o=t[n],Array.isArray(o)&&(s=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(r=w.cssHooks[i])&&"expand"in r)for(n in o=r.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=s);else e[i]=s}(u,l.opts.specialEasing);o<r;o++)if(i=ue.prefilters[o].call(l,t,u,l.opts))return p(i.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return w.map(u,le,l),p(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(ue,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return rt(n.elem,t,tt.exec(e),n),n}]},tweener:function(t,e){p(t)?(e=t,t=["*"]):t=t.match(F);for(var n,i=0,s=t.length;i<s;i++)n=t[i],ue.tweeners[n]=ue.tweeners[n]||[],ue.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,s,o,r,a,c,l,u,h="width"in e||"height"in e,d=this,A={},p=t.style,g=t.nodeType&&ot(t),f=Y.get(t,"fxshow");for(i in n.queue||(null==(r=w._queueHooks(t,"fx")).unqueued&&(r.unqueued=0,a=r.empty.fire,r.empty.fire=function(){r.unqueued||a()}),r.unqueued++,d.always((function(){d.always((function(){r.unqueued--,w.queue(t,"fx").length||r.empty.fire()}))}))),e)if(s=e[i],se.test(s)){if(delete e[i],o=o||"toggle"===s,s===(g?"hide":"show")){if("show"!==s||!f||void 0===f[i])continue;g=!0}A[i]=f&&f[i]||w.style(t,i)}if((c=!w.isEmptyObject(e))||!w.isEmptyObject(A))for(i in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=f&&f.display)&&(l=Y.get(t,"display")),"none"===(u=w.css(t,"display"))&&(l?u=l:(lt([t],!0),l=t.style.display||l,u=w.css(t,"display"),lt([t]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===w.css(t,"float")&&(c||(d.done((function(){p.display=l})),null==l&&(u=p.display,l="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),c=!1,A)c||(f?"hidden"in f&&(g=f.hidden):f=Y.access(t,"fxshow",{display:l}),o&&(f.hidden=!g),g&&lt([t],!0),d.done((function(){for(i in g||lt([t]),Y.remove(t,"fxshow"),A)w.style(t,i,A[i])}))),c=le(g?f[i]:0,i,d),i in f||(f[i]=c.start,g&&(c.end=c.start,c.start=0))}],prefilter:function(t,e){e?ue.prefilters.unshift(t):ue.prefilters.push(t)}}),w.speed=function(t,e,n){var i=t&&"object"==typeof t?w.extend({},t):{complete:n||!n&&e||p(t)&&t,duration:t,easing:n&&e||e&&!p(e)&&e};return w.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in w.fx.speeds?i.duration=w.fx.speeds[i.duration]:i.duration=w.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){p(i.old)&&i.old.call(this),i.queue&&w.dequeue(this,i.queue)},i},w.fn.extend({fadeTo:function(t,e,n,i){return this.filter(ot).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var s=w.isEmptyObject(t),o=w.speed(e,n,i),r=function(){var e=ue(this,w.extend({},t),o);(s||Y.get(this,"finish"))&&e.stop(!0)};return r.finish=r,s||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,s=null!=t&&t+"queueHooks",o=w.timers,r=Y.get(this);if(s)r[s]&&r[s].stop&&i(r[s]);else for(s in r)r[s]&&r[s].stop&&oe.test(s)&&i(r[s]);for(s=o.length;s--;)o[s].elem!==this||null!=t&&o[s].queue!==t||(o[s].anim.stop(n),e=!1,o.splice(s,1));!e&&n||w.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=Y.get(this),i=n[t+"queue"],s=n[t+"queueHooks"],o=w.timers,r=i?i.length:0;for(n.finish=!0,w.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<r;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),w.each(["toggle","show","hide"],(function(t,e){var n=w.fn[e];w.fn[e]=function(t,i,s){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ce(e,!0),t,i,s)}})),w.each({slideDown:ce("show"),slideUp:ce("hide"),slideToggle:ce("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){w.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),w.timers=[],w.fx.tick=function(){var t,e=0,n=w.timers;for(ne=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||w.fx.stop(),ne=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){ie||(ie=!0,re())},w.fx.stop=function(){ie=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,n){return e=w.fx&&w.fx.speeds[e]||e,n=n||"fx",this.queue(n,(function(n,i){var s=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(s)}}))},function(){var t=f.createElement("input"),e=f.createElement("select").appendChild(f.createElement("option"));t.type="checkbox",A.checkOn=""!==t.value,A.optSelected=e.selected,(t=f.createElement("input")).value="t",t.type="radio",A.radioValue="t"===t.value}();var he,de=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return j(this,w.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){w.removeAttr(this,t)}))}}),w.extend({attr:function(t,e,n){var i,s,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?w.prop(t,e,n):(1===o&&w.isXMLDoc(t)||(s=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?he:void 0)),void 0!==n?null===n?void w.removeAttr(t,e):s&&"set"in s&&void 0!==(i=s.set(t,n,e))?i:(t.setAttribute(e,n+""),n):s&&"get"in s&&null!==(i=s.get(t,e))?i:null==(i=w.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!A.radioValue&&"radio"===e&&_(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,s=e&&e.match(F);if(s&&1===t.nodeType)for(;n=s[i++];)t.removeAttribute(n)}}),he={set:function(t,e,n){return!1===e?w.removeAttr(t,n):t.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=de[e]||w.find.attr;de[e]=function(t,e,i){var s,o,r=e.toLowerCase();return i||(o=de[r],de[r]=s,s=null!=n(t,e,i)?r:null,de[r]=o),s}}));var Ae=/^(?:input|select|textarea|button)$/i,pe=/^(?:a|area)$/i;function ge(t){return(t.match(F)||[]).join(" ")}function fe(t){return t.getAttribute&&t.getAttribute("class")||""}function me(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(F)||[]}w.fn.extend({prop:function(t,e){return j(this,w.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[w.propFix[t]||t]}))}}),w.extend({prop:function(t,e,n){var i,s,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(t)||(e=w.propFix[e]||e,s=w.propHooks[e]),void 0!==n?s&&"set"in s&&void 0!==(i=s.set(t,n,e))?i:t[e]=n:s&&"get"in s&&null!==(i=s.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):Ae.test(t.nodeName)||pe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),A.optSelected||(w.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){w.propFix[this.toLowerCase()]=this})),w.fn.extend({addClass:function(t){var e,n,i,s,o,r,a,c=0;if(p(t))return this.each((function(e){w(this).addClass(t.call(this,e,fe(this)))}));if((e=me(t)).length)for(;n=this[c++];)if(s=fe(n),i=1===n.nodeType&&" "+ge(s)+" "){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s!==(a=ge(i))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,s,o,r,a,c=0;if(p(t))return this.each((function(e){w(this).removeClass(t.call(this,e,fe(this)))}));if(!arguments.length)return this.attr("class","");if((e=me(t)).length)for(;n=this[c++];)if(s=fe(n),i=1===n.nodeType&&" "+ge(s)+" "){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");s!==(a=ge(i))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):p(t)?this.each((function(n){w(this).toggleClass(t.call(this,n,fe(this),e),e)})):this.each((function(){var e,s,o,r;if(i)for(s=0,o=w(this),r=me(t);e=r[s++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=fe(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Y.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+ge(fe(n))+" ").indexOf(e)>-1)return!0;return!1}});var ve=/\r/g;w.fn.extend({val:function(t){var e,n,i,s=this[0];return arguments.length?(i=p(t),this.each((function(n){var s;1===this.nodeType&&(null==(s=i?t.call(this,n,w(this).val()):t)?s="":"number"==typeof s?s+="":Array.isArray(s)&&(s=w.map(s,(function(t){return null==t?"":t+""}))),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))}))):s?(e=w.valHooks[s.type]||w.valHooks[s.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(s,"value"))?n:"string"==typeof(n=s.value)?n.replace(ve,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:ge(w.text(t))}},select:{get:function(t){var e,n,i,s=t.options,o=t.selectedIndex,r="select-one"===t.type,a=r?null:[],c=r?o+1:s.length;for(i=o<0?c:r?o:0;i<c;i++)if(((n=s[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!_(n.parentNode,"optgroup"))){if(e=w(n).val(),r)return e;a.push(e)}return a},set:function(t,e){for(var n,i,s=t.options,o=w.makeArray(e),r=s.length;r--;)((i=s[r]).selected=w.inArray(w.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],(function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=w.inArray(w(t).val(),e)>-1}},A.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),A.focusin="onfocusin"in t;var ye=/^(?:focusinfocus|focusoutblur)$/,we=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(e,n,i,s){var o,r,a,c,l,h,d,A,m=[i||f],v=u.call(e,"type")?e.type:e,y=u.call(e,"namespace")?e.namespace.split("."):[];if(r=A=a=i=i||f,3!==i.nodeType&&8!==i.nodeType&&!ye.test(v+w.event.triggered)&&(v.indexOf(".")>-1&&(y=v.split("."),v=y.shift(),y.sort()),l=v.indexOf(":")<0&&"on"+v,(e=e[w.expando]?e:new w.Event(v,"object"==typeof e&&e)).isTrigger=s?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:w.makeArray(n,[e]),d=w.event.special[v]||{},s||!d.trigger||!1!==d.trigger.apply(i,n))){if(!s&&!d.noBubble&&!g(i)){for(c=d.delegateType||v,ye.test(c+v)||(r=r.parentNode);r;r=r.parentNode)m.push(r),a=r;a===(i.ownerDocument||f)&&m.push(a.defaultView||a.parentWindow||t)}for(o=0;(r=m[o++])&&!e.isPropagationStopped();)A=r,e.type=o>1?c:d.bindType||v,(h=(Y.get(r,"events")||Object.create(null))[e.type]&&Y.get(r,"handle"))&&h.apply(r,n),(h=l&&r[l])&&h.apply&&q(r)&&(e.result=h.apply(r,n),!1===e.result&&e.preventDefault());return e.type=v,s||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(m.pop(),n)||!q(i)||l&&p(i[v])&&!g(i)&&((a=i[l])&&(i[l]=null),w.event.triggered=v,e.isPropagationStopped()&&A.addEventListener(v,we),i[v](),e.isPropagationStopped()&&A.removeEventListener(v,we),w.event.triggered=void 0,a&&(i[l]=a)),e.result}},simulate:function(t,e,n){var i=w.extend(new w.Event,n,{type:t,isSimulated:!0});w.event.trigger(i,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each((function(){w.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return w.event.trigger(t,e,n,!0)}}),A.focusin||w.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,s=Y.access(i,e);s||i.addEventListener(t,n,!0),Y.access(i,e,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,s=Y.access(i,e)-1;s?Y.access(i,e,s):(i.removeEventListener(t,n,!0),Y.remove(i,e))}}}));var be=t.location,xe={guid:Date.now()},Ce=/\?/;w.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+e),n};var De=/\[\]$/,Se=/\r?\n/g,_e=/^(?:submit|button|image|reset|file)$/i,Ee=/^(?:input|select|textarea|keygen)/i;function Pe(t,e,n,i){var s;if(Array.isArray(e))w.each(e,(function(e,s){n||De.test(t)?i(t,s):Pe(t+"["+("object"==typeof s&&null!=s?e:"")+"]",s,n,i)}));else if(n||"object"!==y(e))i(t,e);else for(s in e)Pe(t+"["+s+"]",e[s],n,i)}w.param=function(t,e){var n,i=[],s=function(t,e){var n=p(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,(function(){s(this.name,this.value)}));else for(n in t)Pe(n,t[n],e,s);return i.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&Ee.test(this.nodeName)&&!_e.test(t)&&(this.checked||!dt.test(t))})).map((function(t,e){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,(function(t){return{name:e.name,value:t.replace(Se,"\r\n")}})):{name:e.name,value:n.replace(Se,"\r\n")}})).get()}});var Me=/%20/g,Be=/#.*$/,ke=/([?&])_=[^&]*/,Te=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ie=/^(?:GET|HEAD)$/,Fe=/^\/\//,Le={},Oe={},Re="*/".concat("*"),Ne=f.createElement("a");function He(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,s=0,o=e.toLowerCase().match(F)||[];if(p(n))for(;i=o[s++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function ze(t,e,n,i){var s={},o=t===Oe;function r(a){var c;return s[a]=!0,w.each(t[a]||[],(function(t,a){var l=a(e,n,i);return"string"!=typeof l||o||s[l]?o?!(c=l):void 0:(e.dataTypes.unshift(l),r(l),!1)})),c}return r(e.dataTypes[0])||!s["*"]&&r("*")}function je(t,e){var n,i,s=w.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((s[n]?t:i||(i={}))[n]=e[n]);return i&&w.extend(!0,t,i),t}Ne.href=be.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(be.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Re,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?je(je(t,w.ajaxSettings),e):je(w.ajaxSettings,t)},ajaxPrefilter:He(Le),ajaxTransport:He(Oe),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0),n=n||{};var i,s,o,r,a,c,l,u,h,d,A=w.ajaxSetup({},n),p=A.context||A,g=A.context&&(p.nodeType||p.jquery)?w(p):w.event,m=w.Deferred(),v=w.Callbacks("once memory"),y=A.statusCode||{},b={},x={},C="canceled",D={readyState:0,getResponseHeader:function(t){var e;if(l){if(!r)for(r={};e=Te.exec(o);)r[e[1].toLowerCase()+" "]=(r[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=r[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=x[t.toLowerCase()]=x[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==l&&(A.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)D.always(t[D.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||C;return i&&i.abort(e),S(0,e),this}};if(m.promise(D),A.url=((e||A.url||be.href)+"").replace(Fe,be.protocol+"//"),A.type=n.method||n.type||A.method||A.type,A.dataTypes=(A.dataType||"*").toLowerCase().match(F)||[""],null==A.crossDomain){c=f.createElement("a");try{c.href=A.url,c.href=c.href,A.crossDomain=Ne.protocol+"//"+Ne.host!=c.protocol+"//"+c.host}catch(t){A.crossDomain=!0}}if(A.data&&A.processData&&"string"!=typeof A.data&&(A.data=w.param(A.data,A.traditional)),ze(Le,A,n,D),l)return D;for(h in(u=w.event&&A.global)&&0==w.active++&&w.event.trigger("ajaxStart"),A.type=A.type.toUpperCase(),A.hasContent=!Ie.test(A.type),s=A.url.replace(Be,""),A.hasContent?A.data&&A.processData&&0===(A.contentType||"").indexOf("application/x-www-form-urlencoded")&&(A.data=A.data.replace(Me,"+")):(d=A.url.slice(s.length),A.data&&(A.processData||"string"==typeof A.data)&&(s+=(Ce.test(s)?"&":"?")+A.data,delete A.data),!1===A.cache&&(s=s.replace(ke,"$1"),d=(Ce.test(s)?"&":"?")+"_="+xe.guid+++d),A.url=s+d),A.ifModified&&(w.lastModified[s]&&D.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&D.setRequestHeader("If-None-Match",w.etag[s])),(A.data&&A.hasContent&&!1!==A.contentType||n.contentType)&&D.setRequestHeader("Content-Type",A.contentType),D.setRequestHeader("Accept",A.dataTypes[0]&&A.accepts[A.dataTypes[0]]?A.accepts[A.dataTypes[0]]+("*"!==A.dataTypes[0]?", "+Re+"; q=0.01":""):A.accepts["*"]),A.headers)D.setRequestHeader(h,A.headers[h]);if(A.beforeSend&&(!1===A.beforeSend.call(p,D,A)||l))return D.abort();if(C="abort",v.add(A.complete),D.done(A.success),D.fail(A.error),i=ze(Oe,A,n,D)){if(D.readyState=1,u&&g.trigger("ajaxSend",[D,A]),l)return D;A.async&&A.timeout>0&&(a=t.setTimeout((function(){D.abort("timeout")}),A.timeout));try{l=!1,i.send(b,S)}catch(t){if(l)throw t;S(-1,t)}}else S(-1,"No Transport");function S(e,n,r,c){var h,d,f,b,x,C=n;l||(l=!0,a&&t.clearTimeout(a),i=void 0,o=c||"",D.readyState=e>0?4:0,h=e>=200&&e<300||304===e,r&&(b=function(t,e,n){for(var i,s,o,r,a=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){c.unshift(s);break}if(c[0]in n)o=c[0];else{for(s in n){if(!c[0]||t.converters[s+" "+c[0]]){o=s;break}r||(r=s)}o=o||r}if(o)return o!==c[0]&&c.unshift(o),n[o]}(A,D,r)),!h&&w.inArray("script",A.dataTypes)>-1&&(A.converters["text script"]=function(){}),b=function(t,e,n,i){var s,o,r,a,c,l={},u=t.dataTypes.slice();if(u[1])for(r in t.converters)l[r.toLowerCase()]=t.converters[r];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!c&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(r=l[c+" "+o]||l["* "+o]))for(s in l)if((a=s.split(" "))[1]===o&&(r=l[c+" "+a[0]]||l["* "+a[0]])){!0===r?r=l[s]:!0!==l[s]&&(o=a[0],u.unshift(a[1]));break}if(!0!==r)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+c+" to "+o}}}return{state:"success",data:e}}(A,b,D,h),h?(A.ifModified&&((x=D.getResponseHeader("Last-Modified"))&&(w.lastModified[s]=x),(x=D.getResponseHeader("etag"))&&(w.etag[s]=x)),204===e||"HEAD"===A.type?C="nocontent":304===e?C="notmodified":(C=b.state,d=b.data,h=!(f=b.error))):(f=C,!e&&C||(C="error",e<0&&(e=0))),D.status=e,D.statusText=(n||C)+"",h?m.resolveWith(p,[d,C,D]):m.rejectWith(p,[D,C,f]),D.statusCode(y),y=void 0,u&&g.trigger(h?"ajaxSuccess":"ajaxError",[D,A,h?d:f]),v.fireWith(p,[D,C]),u&&(g.trigger("ajaxComplete",[D,A]),--w.active||w.event.trigger("ajaxStop")))}return D},getJSON:function(t,e,n){return w.get(t,e,n,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],(function(t,e){w[e]=function(t,n,i,s){return p(n)&&(s=s||i,i=n,n=void 0),w.ajax(w.extend({url:t,type:e,dataType:s,data:n,success:i},w.isPlainObject(t)&&t))}})),w.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),w._evalUrl=function(t,e,n){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){w.globalEval(t,e,n)}})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(p(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return p(t)?this.each((function(e){w(this).wrapInner(t.call(this,e))})):this.each((function(){var e=w(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=p(t);return this.each((function(n){w(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){w(this).replaceWith(this.childNodes)})),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Qe={0:200,1223:204},Ue=w.ajaxSettings.xhr();A.cors=!!Ue&&"withCredentials"in Ue,A.ajax=Ue=!!Ue,w.ajaxTransport((function(e){var n,i;if(A.cors||Ue&&!e.crossDomain)return{send:function(s,o){var r,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r];for(r in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),s)a.setRequestHeader(r,s[r]);n=function(t){return function(){n&&(n=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Qe[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),i=a.onerror=a.ontimeout=n("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout((function(){n&&i()}))},n=n("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}})),w.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),w.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,s){e=w("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&s("error"===t.type?404:200,t.type)}),f.head.appendChild(e[0])},abort:function(){n&&n()}}}));var We,Ge=[],qe=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ge.pop()||w.expando+"_"+xe.guid++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",(function(e,n,i){var s,o,r,a=!1!==e.jsonp&&(qe.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&qe.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=p(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(qe,"$1"+s):!1!==e.jsonp&&(e.url+=(Ce.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return r||w.error(s+" was not called"),r[0]},e.dataTypes[0]="json",o=t[s],t[s]=function(){r=arguments},i.always((function(){void 0===o?w(t).removeProp(s):t[s]=o,e[s]&&(e.jsonpCallback=n.jsonpCallback,Ge.push(s)),r&&p(o)&&o(r[0]),r=o=void 0})),"script"})),A.createHTMLDocument=((We=f.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===We.childNodes.length),w.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(A.createHTMLDocument?((i=(e=f.implementation.createHTMLDocument("")).createElement("base")).href=f.location.href,e.head.appendChild(i)):e=f),o=!n&&[],(s=E.exec(t))?[e.createElement(s[1])]:(s=yt([t],e,o),o&&o.length&&w(o).remove(),w.merge([],s.childNodes)));var i,s,o},w.fn.load=function(t,e,n){var i,s,o,r=this,a=t.indexOf(" ");return a>-1&&(i=ge(t.slice(a)),t=t.slice(0,a)),p(e)?(n=e,e=void 0):e&&"object"==typeof e&&(s="POST"),r.length>0&&w.ajax({url:t,type:s||"GET",dataType:"html",data:e}).done((function(t){o=arguments,r.html(i?w("<div>").append(w.parseHTML(t)).find(i):t)})).always(n&&function(t,e){r.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},w.expr.pseudos.animated=function(t){return w.grep(w.timers,(function(e){return t===e.elem})).length},w.offset={setOffset:function(t,e,n){var i,s,o,r,a,c,l=w.css(t,"position"),u=w(t),h={};"static"===l&&(t.style.position="relative"),a=u.offset(),o=w.css(t,"top"),c=w.css(t,"left"),("absolute"===l||"fixed"===l)&&(o+c).indexOf("auto")>-1?(r=(i=u.position()).top,s=i.left):(r=parseFloat(o)||0,s=parseFloat(c)||0),p(e)&&(e=e.call(t,n,w.extend({},a))),null!=e.top&&(h.top=e.top-a.top+r),null!=e.left&&(h.left=e.left-a.left+s),"using"in e?e.using.call(t,h):("number"==typeof h.top&&(h.top+="px"),"number"==typeof h.left&&(h.left+="px"),u.css(h))}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){w.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],s={top:0,left:0};if("fixed"===w.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((s=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),s.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-s.top-w.css(i,"marginTop",!0),left:e.left-s.left-w.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||nt}))}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;w.fn[t]=function(i){return j(this,(function(t,i,s){var o;if(g(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===s)return o?o[e]:t[i];o?o.scrollTo(n?o.pageXOffset:s,n?s:o.pageYOffset):t[i]=s}),t,i,arguments.length)}})),w.each(["top","left"],(function(t,e){w.cssHooks[e]=Ut(A.pixelPosition,(function(t,n){if(n)return n=Qt(t,e),Nt.test(n)?w(t).position()[e]+"px":n}))})),w.each({Height:"height",Width:"width"},(function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){w.fn[i]=function(s,o){var r=arguments.length&&(n||"boolean"!=typeof s),a=n||(!0===s||!0===o?"margin":"border");return j(this,(function(e,n,s){var o;return g(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===s?w.css(e,n,a):w.style(e,n,s,a)}),e,r?s:void 0,r)}}))})),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){w.fn[e]=function(t){return this.on(e,t)}})),w.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){w.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var Ve=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(t,e){var n,i,o;if("string"==typeof e&&(n=t[e],e=t,t=n),p(t))return i=s.call(arguments,2),(o=function(){return t.apply(e||this,i.concat(s.call(arguments)))}).guid=t.guid=t.guid||w.guid++,o},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=_,w.isFunction=p,w.isWindow=g,w.camelCase=G,w.type=y,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},w.trim=function(t){return null==t?"":(t+"").replace(Ve,"")},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return w}));var Ye=t.jQuery,Xe=t.$;return w.noConflict=function(e){return t.$===w&&(t.$=Xe),e&&t.jQuery===w&&(t.jQuery=Ye),w},void 0===e&&(t.jQuery=t.$=w),w}));class t extends Event{constructor(){super("audioActivity"),this.id=null,this.isActive=!1,Object.seal(this)}set(t,e){this.id=t,this.isActive=e}}function i(t,e,n){return typeof t===e||t instanceof n}function s(t){return i(t,"function",Function)}function o(t){return i(t,"string",String)}function r(t){return i(t,"number",Number)}function a(t){return r(t)&&!Number.isNaN(t)}function c(t){return i(t,"boolean",Boolean)}class Mn{constructor(t,e,n){if(!s(e))throw new Error("A function instance is required for this parameter");this.name=t,this.callback=e,this.opts=n,Object.freeze(this)}add(t){t.addEventListener(this.name,this.callback,this.opts)}remove(t){t.removeEventListener(this.name,this.callback)}}function l(t,e){return new Mn("blur",t,e)}function u(t,e){return new Mn("click",t,e)}function h(t,e){return new Mn("focus",t,e)}function d(t,e){return new Mn("input",t,e)}function A(t,e){return new Mn("mouseout",t,e)}const Bn=["change","click","contextmenu","dblclick","mouseup","pointerup","reset","submit","touchend"];const kn=function(){try{return new window.EventTarget,class extends EventTarget{constructor(){super()}}}catch(t){const e=new WeakMap;return class{constructor(){e.set(this,new Map)}addEventListener(t,n,i){if(s(n)){const s=e.get(this);s.has(t)||s.set(t,[]);const o=s.get(t);o.find(t=>t.callback===n)||o.push({target:this,callback:n,options:i})}}removeEventListener(t,n){if(s(n)){const i=e.get(this);if(i.has(t)){const e=i.get(t),s=e.findIndex(t=>t.callback===n);s>=0&&function(t,e){if(!(t instanceof Array))throw new Error("Must provide an array as the first parameter.");t.splice(e,1)}(e,s)}}}dispatchEvent(t){const n=e.get(this);if(n.has(t.type)){const e=n.get(t.type);for(let n of e)n.options&&n.options.once&&this.removeEventListener(t.type,n.callback),n.callback.call(n.target,t);return!t.defaultPrevented}return!0}}}}();function p(t){if(!(t instanceof Array))throw new Error("Must provide an array as the first parameter.");return t.splice(0)}async function g(t){const e=fetch(t),n=await e;if(!n.ok)throw new Error(`[${n.status}] - ${n.statusText}`);return n}async function f(t,e){const{buffer:n,contentType:i}=await async function(t,e){if(!s(e))throw new Error("progress callback is required");e(0,1,t);const n=await g(t),i=parseInt(n.headers.get("Content-Length"),10);if(!i)throw new Error("Server did not provide a content length header.");const o=n.headers.get("Content-Type");if(!o)throw new Error("Server did not provide a content type");const r=n.body.getReader(),a=new Uint8Array(i);let c=0;for(;;){const{done:n,value:s}=await r.read();if(n)break;if(c+s.length>i)throw new Error("Whoa! Recieved content exceeded expected amount");a.set(s,c),c+=s.length,e(c,i,t)}return e(1,1,t),{buffer:a,contentType:o}}(t,e);return new Blob([n],{type:i})}const Tn=new Map;async function m(t,e=null){if(s(e))return await async function(t,e){const n=t;if(Tn.has(n)){e(0,1,t);const i=Tn.get(n);return e(1,1,t),i}{const i=await f(t,e),s=URL.createObjectURL(i);return Tn.set(n,s),s}}(t,e);const n=await async function(t,e=null){if(s(e))return await f(t,e);const n=await g(t);return await n.blob()}(t);return URL.createObjectURL(n)}function v(t,e,n){return Math.min(n,Math.max(e,t))}const In=new t,Fn=0,Ln=60,On=5;function w(t,e,n){const i=e/2;return v(Math.round(t/i*n),0,n)}class Rn extends kn{constructor(t,e,n){if(super(),!a(n)||n<=0)throw new Error("Buffer size must be greater than 0");this.id=t.id,this.bufferSize=n,this.buffer=new Float32Array(this.bufferSize),this.wasActive=!1,this.lastAudible=!0,this.activityCounter=0,this.analyser=null;const i=()=>{t.spatializer.source?(this.analyser=e.createAnalyser(),this.analyser.fftSize=2*this.bufferSize,this.analyser.smoothingTimeConstant=.2,t.spatializer.source.connect(this.analyser)):setTimeout(i,0)};i()}dispose(){this.analyser&&(this.analyser.disconnect(),this.analyser=null),this.buffer=null}update(){if(this.analyser){this.analyser.getFloatFrequencyData(this.buffer);const t=1.1+function(t,e,n,i,s){const o=t.context.sampleRate,r=w(n,o,s),a=w(i,o,s),c=a-r;let l=0;for(let t=r;t<a;++t)l+=e[t];return 0===c?0:l/c}(this.analyser,this.buffer,85,255,this.bufferSize)/100;t>=.5&&this.activityCounter<Ln?this.activityCounter++:t<.5&&this.activityCounter>Fn&&this.activityCounter--;const e=this.activityCounter>On;this.wasActive!==e&&(this.wasActive=e,In.id=this.id,In.isActive=e,this.dispatchEvent(In))}}}const Nn=[];for(let t=0;t<256;t++)Nn[t]=(t<16?"0":"")+t.toString(16);let Hn=1234567;const zn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Nn[255&t]+Nn[t>>8&255]+Nn[t>>16&255]+Nn[t>>24&255]+"-"+Nn[255&e]+Nn[e>>8&255]+"-"+Nn[e>>16&15|64]+Nn[e>>24&255]+"-"+Nn[63&n|128]+Nn[n>>8&255]+"-"+Nn[n>>16&255]+Nn[n>>24&255]+Nn[255&i]+Nn[i>>8&255]+Nn[i>>16&255]+Nn[i>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,s){return i+(t-e)*(s-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(Hn=t%2147483647),Hn=16807*Hn%2147483647,(Hn-1)/2147483646},degToRad:function(t){return t*zn.DEG2RAD},radToDeg:function(t){return t*zn.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,s){const o=Math.cos,r=Math.sin,a=o(n/2),c=r(n/2),l=o((e+i)/2),u=r((e+i)/2),h=o((e-i)/2),d=r((e-i)/2),A=o((i-e)/2),p=r((i-e)/2);switch(s){case"XYX":t.set(a*u,c*h,c*d,a*l);break;case"YZY":t.set(c*d,a*u,c*h,a*l);break;case"ZXZ":t.set(c*h,c*d,a*u,a*l);break;case"XZX":t.set(a*u,c*p,c*A,a*l);break;case"YXY":t.set(c*A,a*u,c*p,a*l);break;case"ZYZ":t.set(c*p,c*A,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}};class jn{constructor(t=0,e=0,n=0,i=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return n.copy(t).slerp(e,i)}static slerpFlat(t,e,n,i,s,o,r){let a=n[i+0],c=n[i+1],l=n[i+2],u=n[i+3];const h=s[o+0],d=s[o+1],A=s[o+2],p=s[o+3];if(u!==p||a!==h||c!==d||l!==A){let t=1-r;const e=a*h+c*d+l*A+u*p,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const s=Math.sqrt(i),o=Math.atan2(s,e*n);t=Math.sin(t*o)/s,r=Math.sin(r*o)/s}const s=r*n;if(a=a*t+h*s,c=c*t+d*s,l=l*t+A*s,u=u*t+p*s,t===1-r){const t=1/Math.sqrt(a*a+c*c+l*l+u*u);a*=t,c*=t,l*=t,u*=t}}t[e]=a,t[e+1]=c,t[e+2]=l,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,i,s,o){const r=n[i],a=n[i+1],c=n[i+2],l=n[i+3],u=s[o],h=s[o+1],d=s[o+2],A=s[o+3];return t[e]=r*A+l*u+a*d-c*h,t[e+1]=a*A+l*h+c*u-r*d,t[e+2]=c*A+l*d+r*h-a*u,t[e+3]=l*A-r*u-a*h-c*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,s=t._z,o=t._order,r=Math.cos,a=Math.sin,c=r(n/2),l=r(i/2),u=r(s/2),h=a(n/2),d=a(i/2),A=a(s/2);switch(o){case"XYZ":this._x=h*l*u+c*d*A,this._y=c*d*u-h*l*A,this._z=c*l*A+h*d*u,this._w=c*l*u-h*d*A;break;case"YXZ":this._x=h*l*u+c*d*A,this._y=c*d*u-h*l*A,this._z=c*l*A-h*d*u,this._w=c*l*u+h*d*A;break;case"ZXY":this._x=h*l*u-c*d*A,this._y=c*d*u+h*l*A,this._z=c*l*A+h*d*u,this._w=c*l*u-h*d*A;break;case"ZYX":this._x=h*l*u-c*d*A,this._y=c*d*u+h*l*A,this._z=c*l*A-h*d*u,this._w=c*l*u+h*d*A;break;case"YZX":this._x=h*l*u+c*d*A,this._y=c*d*u+h*l*A,this._z=c*l*A-h*d*u,this._w=c*l*u-h*d*A;break;case"XZY":this._x=h*l*u-c*d*A,this._y=c*d*u-h*l*A,this._z=c*l*A+h*d*u,this._w=c*l*u+h*d*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],s=e[8],o=e[1],r=e[5],a=e[9],c=e[2],l=e[6],u=e[10],h=n+r+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(l-a)*t,this._y=(s-c)*t,this._z=(o-i)*t}else if(n>r&&n>u){const t=2*Math.sqrt(1+n-r-u);this._w=(l-a)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(s+c)/t}else if(r>u){const t=2*Math.sqrt(1+r-n-u);this._w=(s-c)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(a+l)/t}else{const t=2*Math.sqrt(1+u-n-r);this._w=(o-i)/t,this._x=(s+c)/t,this._y=(a+l)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(zn.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,s=t._z,o=t._w,r=e._x,a=e._y,c=e._z,l=e._w;return this._x=n*l+o*r+i*c-s*a,this._y=i*l+o*a+s*r-n*c,this._z=s*l+o*c+n*a-i*r,this._w=o*l-n*r-i*a-s*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,s=this._z,o=this._w;let r=o*t._w+n*t._x+i*t._y+s*t._z;if(r<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,r=-r):this.copy(t),r>=1)return this._w=o,this._x=n,this._y=i,this._z=s,this;const a=1-r*r;if(a<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(a),l=Math.atan2(c,r),u=Math.sin((1-e)*l)/c,h=Math.sin(e*l)/c;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=s*u+this._z*h,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}class Qn{constructor(t=0,e=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Wn.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Wn.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*i,this.y=s[1]*e+s[4]*n+s[7]*i,this.z=s[2]*e+s[5]*n+s[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,s=t.elements,o=1/(s[3]*e+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*i+s[12])*o,this.y=(s[1]*e+s[5]*n+s[9]*i+s[13])*o,this.z=(s[2]*e+s[6]*n+s[10]*i+s[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,s=t.x,o=t.y,r=t.z,a=t.w,c=a*e+o*i-r*n,l=a*n+r*e-s*i,u=a*i+s*n-o*e,h=-s*e-o*n-r*i;return this.x=c*a+h*-s+l*-r-u*-o,this.y=l*a+h*-o+u*-s-c*-r,this.z=u*a+h*-r+c*-o-l*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i,this.y=s[1]*e+s[5]*n+s[9]*i,this.z=s[2]*e+s[6]*n+s[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,s=t.z,o=e.x,r=e.y,a=e.z;return this.x=i*a-s*r,this.y=s*o-n*a,this.z=n*r-i*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Un.copy(this).projectOnVector(t),this.sub(Un)}reflect(t){return this.sub(Un.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(zn.clamp(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Un=new Qn,Wn=new jn;function b(t,e,n){const i=n-e;return 0===i?0:(t-e)/i}function C(t,e,n,i){const s=e.dot(n),o=Math.acos(s);if(0!==o){const s=Math.sin(o),r=Math.sin((1-i)*o)/s,a=Math.sin(i*o)/s;t.x=r*e.x+a*n.x,t.y=r*e.y+a*n.y,t.x=r*e.z+a*n.z}}class Gn{constructor(){this.t=0,this.p=new Qn,this.f=new Qn,this.f.set(0,0,-1),this.u=new Qn,this.u.set(0,1,0),Object.seal(this)}set(t,e,n,i,s,o,r,a,c){this.p.set(t,e,n),this.f.set(i,s,o),this.u.set(r,a,c)}copy(t){this.p.copy(t.p),this.f.copy(t.f),this.u.copy(t.u)}interpolate(t,e,n){if(n<=t.t)this.copy(t);else if(e.t<=n)this.copy(e);else if(t.t<n){const i=b(n,t.t,e.t);this.p.copy(t.p),this.p.lerp(e.p,i),C(this.f,t.f,e.f,i),C(this.u,t.u,e.u,i),this.t=n}}}class qn{constructor(){this.start=new Gn,this.current=new Gn,this.end=new Gn,Object.seal(this)}setTarget(t,e,n,i,s,o,r,a,c,l,u){this.end.set(t,e,n,i,s,o,r,a,c),this.end.t=l+u,u<=0?(this.start.copy(this.end),this.start.t=l,this.current.copy(this.end),this.current.t=l):(this.start.copy(this.current),this.start.t=l)}setTargetPosition(t,e,n,i,s){this.setTarget(t,e,n,this.end.f.x,this.end.f.y,this.end.f.z,this.end.u.x,this.end.u.y,this.end.u.z,i,s)}setTargetOrientation(t,e,n,i,s,o,r,a){this.setTarget(this.end.p.x,this.end.p.y,this.end.p.z,t,e,n,i,s,o,r,a)}update(t){this.current.interpolate(this.start,this.end,t)}}class Vn{constructor(){this.pose=new qn,this.tracks=new Map,this._spatializer=null}get spatializer(){return this._spatializer}set spatializer(t){this.spatializer!==t&&(this._spatializer&&this._spatializer.dispose(),this._spatializer=t)}dispose(){this.spatializer=null}update(t){this.pose.update(t),this.spatializer&&this.spatializer.update(this.pose.current)}}class Yn{constructor(){this._t=performance.now()/1e3,Object.seal(this)}get currentTime(){return performance.now()/1e3-this._t}get destination(){return null}}const Xn=HTMLAudioElement.prototype.setSinkId instanceof Function;class Zn extends kn{constructor(){super(),this.minDistance=1,this.minDistanceSq=1,this.maxDistance=10,this.maxDistanceSq=100,this.rolloff=1,this.transitionTime=.5}setAudioProperties(t,e,n,i){this.minDistance=t,this.maxDistance=e,this.transitionTime=i,this.rolloff=n}dispose(){}update(t){}}class Jn extends Zn{constructor(t,e,n,i){if(super(),this.id=t,this.audio=null,this.stream=null,this.source=null,this.volume=1,e instanceof HTMLAudioElement)this.audio=e,this.source=n.createMediaElementSource(this.audio),this.source.connect(i);else if(e instanceof MediaStream){this.stream=e,this.audio=document.createElement("audio"),this.audio.srcObject=this.stream;const t=()=>{this.stream.active?(this.source=n.createMediaStreamSource(this.stream),this.source.connect(i)):setTimeout(t,0)};setTimeout(t,0)}else if(null!==e)throw new Error("Can't create a node from the given stream. Expected type HTMLAudioElement or MediaStream.");this.audio.playsInline=!0}async play(){this.audio&&await this.audio.play()}stop(){this.audio&&this.audio.pause()}dispose(){this.source&&(this.source.disconnect(),this.source=null),this.audio&&(this.audio.pause(),this.audio=null),this.stream=null,super.dispose()}setAudioOutputDevice(t){this.audio&&Xn&&this.audio.setSinkId(t)}}class Kn extends Jn{constructor(t,e,n,i){super(t,e,n,i),this.inNode=i,this.inNode.connect(n.destination)}dispose(){this.inNode&&(this.inNode.disconnect(),this.inNode=null),super.dispose()}}class $n extends Kn{constructor(t,e,n){const i=n.createPanner();super(t,e,n,i),this.inNode.panningModel="HRTF",this.inNode.distanceModel="inverse",this.inNode.coneInnerAngle=360,this.inNode.coneOuterAngle=0,this.inNode.coneOuterGain=0}update(t){super.update(t),this.inNode.refDistance=this.minDistance,this.inNode.rolloffFactor=this.rolloff}}class ti extends $n{constructor(t,e,n){super(t,e,n),Object.seal(this)}update(t){super.update(t);const{p:e,f:n}=t;this.inNode.positionX.setValueAtTime(e.x,0),this.inNode.positionY.setValueAtTime(e.y,0),this.inNode.positionZ.setValueAtTime(e.z,0),this.inNode.orientationX.setValueAtTime(n.x,0),this.inNode.orientationY.setValueAtTime(n.y,0),this.inNode.orientationZ.setValueAtTime(n.z,0)}}class ei extends Jn{constructor(t,e,n){super(t,e,n,n.destination)}}class ni extends Zn{constructor(){super()}createSource(t,e,n,i){if(n)throw new Error("Calla no longer supports manual volume scaling");return new ei(t,e,i)}}class ii extends ni{constructor(t){super(),this.node=t}dispose(){this.node=null,super.dispose()}}class si extends ii{constructor(t){super(t),Object.seal(this)}update(t){super.update(t);const{p:e,f:n,u:i}=t;this.node.positionX.setValueAtTime(e.x,0),this.node.positionY.setValueAtTime(e.y,0),this.node.positionZ.setValueAtTime(e.z,0),this.node.forwardX.setValueAtTime(n.x,0),this.node.forwardY.setValueAtTime(n.y,0),this.node.forwardZ.setValueAtTime(n.z,0),this.node.upX.setValueAtTime(i.x,0),this.node.upY.setValueAtTime(i.y,0),this.node.upZ.setValueAtTime(i.z,0)}createSource(t,e,n,i){return n?new ti(t,e,i):super.createSource(t,e,n,i)}}class oi extends $n{constructor(t,e,n){super(t,e,n),Object.seal(this)}update(t){super.update(t);const{p:e,f:n}=t;this.inNode.setPosition(e.x,e.y,e.z),this.inNode.setOrientation(n.x,n.y,n.z)}}class ri extends ii{constructor(t){super(t),Object.seal(this)}update(t){super.update(t);const{p:e,f:n,u:i}=t;this.node.setPosition(e.x,e.y,e.z),this.node.setOrientation(n.x,n.y,n.z,i.x,i.y,i.z)}createSource(t,e,n,i){return n?new oi(t,e,i):super.createSource(t,e,n,i)}}
/**
 * @license
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(){const t=`[Omnitone] ${Array.prototype.slice.call(arguments).join(" ")} (${performance.now().toFixed(2)}ms)`;window.console.log(t)}function S(){const t=`[Omnitone] ${Array.prototype.slice.call(arguments).join(" ")} (${performance.now().toFixed(2)}ms)`;throw window.console.error(t),new Error(t)}function _(t){return t instanceof AudioContext||t instanceof OfflineAudioContext}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ai={BASE64:"base64",URL:"url"};class ci{constructor(t,e,n){_(t)||S("BufferList: Invalid BaseAudioContext."),this._context=t,this._options={dataType:ai.BASE64,verbose:!1},n&&(n.dataType&&function(t,e){for(let n in t)if(e===t[n])return!0;return!1}(ai,n.dataType)&&(this._options.dataType=n.dataType),n.verbose&&(this._options.verbose=Boolean(n.verbose))),this._bufferData=this._options.dataType===ai.BASE64?e:e.slice(0)}async load(){try{const t=this._bufferData.map((t,e)=>this._launchAsyncLoadTask(t,e)),e=await Promise.all(t);return D("BufferList: "+(this._options.dataType===ai.BASE64?this._bufferData.length+" AudioBuffers from Base64-encoded HRIRs":this._bufferData.length+" files via XHR")+" loaded successfully."),e}catch(t){S('BufferList: error while loading "'+bData+'". ('+t.message+")")}}async _launchAsyncLoadTask(t,e){const n=await this._fetch(t),i=await this._context.decodeAudioData(n);return D("BufferList: "+(this._options.dataType===ai.BASE64?"ArrayBuffer("+e+") from Base64-encoded HRIR":'"'+t+'"')+" successfully loaded."),i}async _fetch(t){if(this._options.dataType===ai.BASE64)return function(t){const e=window.atob(t),n=new Uint8Array(e.length);return n.forEach((t,i)=>n[i]=e.charCodeAt(i)),n.buffer}(t);{const e=await fetch(t);return await e.arrayBuffer()}}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(t,e){this._context=t,this._active=!1,this._isBufferLoaded=!1,this._buildAudioGraph(),e&&this.setHRIRBufferList(e),this.enable()}_buildAudioGraph(){this._splitterWYZX=this._context.createChannelSplitter(4),this._mergerWY=this._context.createChannelMerger(2),this._mergerZX=this._context.createChannelMerger(2),this._convolverWY=this._context.createConvolver(),this._convolverZX=this._context.createConvolver(),this._splitterWY=this._context.createChannelSplitter(2),this._splitterZX=this._context.createChannelSplitter(2),this._inverter=this._context.createGain(),this._mergerBinaural=this._context.createChannelMerger(2),this._summingBus=this._context.createGain(),this._splitterWYZX.connect(this._mergerWY,0,0),this._splitterWYZX.connect(this._mergerWY,1,1),this._splitterWYZX.connect(this._mergerZX,2,0),this._splitterWYZX.connect(this._mergerZX,3,1),this._mergerWY.connect(this._convolverWY),this._mergerZX.connect(this._convolverZX),this._convolverWY.connect(this._splitterWY),this._convolverZX.connect(this._splitterZX),this._splitterWY.connect(this._mergerBinaural,0,0),this._splitterWY.connect(this._mergerBinaural,0,1),this._splitterWY.connect(this._mergerBinaural,1,0),this._splitterWY.connect(this._inverter,1,0),this._inverter.connect(this._mergerBinaural,0,1),this._splitterZX.connect(this._mergerBinaural,0,0),this._splitterZX.connect(this._mergerBinaural,0,1),this._splitterZX.connect(this._mergerBinaural,1,0),this._splitterZX.connect(this._mergerBinaural,1,1),this._convolverWY.normalize=!1,this._convolverZX.normalize=!1,this._inverter.gain.value=-1,this.input=this._splitterWYZX,this.output=this._summingBus}dispose(){this._active&&this.disable(),this._splitterWYZX.disconnect(this._mergerWY,0,0),this._splitterWYZX.disconnect(this._mergerWY,1,1),this._splitterWYZX.disconnect(this._mergerZX,2,0),this._splitterWYZX.disconnect(this._mergerZX,3,1),this._mergerWY.disconnect(this._convolverWY),this._mergerZX.disconnect(this._convolverZX),this._convolverWY.disconnect(this._splitterWY),this._convolverZX.disconnect(this._splitterZX),this._splitterWY.disconnect(this._mergerBinaural,0,0),this._splitterWY.disconnect(this._mergerBinaural,0,1),this._splitterWY.disconnect(this._mergerBinaural,1,0),this._splitterWY.disconnect(this._inverter,1,0),this._inverter.disconnect(this._mergerBinaural,0,1),this._splitterZX.disconnect(this._mergerBinaural,0,0),this._splitterZX.disconnect(this._mergerBinaural,0,1),this._splitterZX.disconnect(this._mergerBinaural,1,0),this._splitterZX.disconnect(this._mergerBinaural,1,1)}setHRIRBufferList(t){this._isBufferLoaded||(this._convolverWY.buffer=t[0],this._convolverZX.buffer=t[1],this._isBufferLoaded=!0)}enable(){this._mergerBinaural.connect(this._summingBus),this._active=!0}disable(){this._mergerBinaural.disconnect(),this._active=!1}}const ui=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wIA9v8QAPv/CwD+/wcA/v8MAP//AQD7/wEACAAEAPj/+v8YABAA7v/n//v/9P/M/8D//f34/R38EvzxAfEBtA2lDTcBJQFJ9T71FP0D/cD1tfVo/Wv9uPTO9PPmOufc/U/+agL3Aisc/RxuGKEZBv3j/iYMzQ2gAzsEQQUABiQFrASzA5cB2QmyCy0AtgR4AeYGtfgAA2j5OQHP+scArPsMBJgEggIEBtz6+QVq/pj/aPg8BPP3gQEi+jEAof0fA1v9+/7S+8IBjvwd/xD4IADL/Pf9zvs+/l3+wgB7/+L+7fzFADH9kf6A+n3+DP6+/TP9xP68/pn+w/26/i39YgA0/u790Pt9/kD+7v1s/Wb+8f4C/1P+pf/x/cT+6/3p/Xz9ff5F/0f9G/4r/6v/4P5L/sL+ff7c/pj+Ov7X/UT+9P5G/oz+6v6A/2D+9/6P/8r/bP7m/ij+C//e/tj/Gf4e/9v+FwDP/lz/sP7F/2H+rv/G/s7/Hf7y/4P+NAD9/k0AK/6w/zP/hACh/sX/gf44AOP+dgCm/iUAk/5qAOD+PwC+/jEAWP4CAAr/bQBw/vv/zf5iACD/OgCS/uD/Cv9oAAb/CgDK/kwA//5tACH/TgCg/h4AHP9aABP/JADP/hEAYv9gAAj/3f8m/ysAYv8gACX/8/8k/ysAXv8bABH//v8j/ygAa/8qAAD/9f9g/1YAWf8JACH/AgB2/z4AXP/w/z3/FgB2/ykAX//9/z//EwCV/zUAS//n/1T/GACK/x4ATv/0/4P/QQB4//v/WP/2/3X/HAB8//P/V//3/2f/AQBh/9v/Tf/x/5P/IwCI/wMAf/8hAKP/JACZ/xUAiv8nAK//HgCr/yMAm/8uAMz/OACi/yQAqf87AMT/MwCY/yUAtP9FAMH/KgCu/ycAyP85AMv/IwCz/xoA1f8qAMn/FgC8/xQA4/8nAMX/CwDJ/xQA4f8ZAMH/BgDO/xQA4f8WAMP/BwDU/xQA4P8QAMH/AQDb/xQA3P8JAMP/AgDh/xIA2v8EAMj/AgDk/w0A1f/+/8v/AwDm/wwA0v/+/9H/BgDl/wkAzv/8/9T/BwDk/wcAzv/8/9r/CQDi/wQAzf/8/9//CADf////0P/9/+L/BwDd//7/0////+T/BgDb//z/1f8AAOf/BQDZ//v/2v8CAOb/AwDY//v/3v8EAOb/AgDY//3/4f8FAOX/AQDZ//7/5P8GAOP/AADb/wAA5/8GAOH////d/wIA5/8FAOD////f/wMA6P8FAOD////h/wQA6P8EAN7////h/wUA4v8DANv/AQDd/wQA3P8CANn/AgDb/wMA2/8CANv/AgDd/wIA3v8CAOH/AQDj/wEA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAAAA/f8CAP//AQD//wEA//8BAP3/AAACAP7/+f8AAAIA/P8FAAQA8/8AABoA+f/V/wQAHQDO/xoAQQBO/ocA0Px1/ucHW/4UCm8HLO6kAjv8/fCRDdAAYfPiBIgFXveUCM0GBvh6/nz7rf0J/QcQSRVdBgoBSgFR62r9NP8m+LoEAvriBVAAiAPmABEGMf2l+SwBjva6/G4A//8P/CYDMgXm/R0CKAE6/fcBBwAtAND+kQA0A5UDhwFs/8IB8fydAEP/A/8v/e7/mP8j/2YBIwE3Av0AYv+uAOD8lgAg/wwAIf/L/n0Ae//OAJMB3P/XAF//XwCM/08AB/8NAEf/rf4jAT3/lgAJAP4AHgDpAO8AUf9L/07/Qf8KAOD/x/+D/3sATQCDAMoA0f79/+L/EQDt/7EAqv+S/7IAuv/o/wgAc//X//H/SwCm/+3/Yf/B/yoAAADI/7X/AwBg/5EATgCX/xYA/P+q/00AVACY/6v/BADD/zwALQCN/8z/KQDu/ygAEgCZ/6f/VQDC//T/KQCs/7P/UgAfAO7/NgC8/57/awAZAPP/+P/V/8z/bQBBAL//DgD0/+T/TABBAMz/CwAxAPz/SQBqALn/BgALAPz/EAA7AIz/3/8iAAUA//8kALf/y/9VABQA+v81AOj/0P9cAB4A+f8WAOr/vv83ABgAw/8JAOj/4f8nACIAsf/y/w4A3v8gACQAxP/n/ycA7P8WAC0Ayf/U/ycA9v/7/yUA0P/P/zUABADc/xUA5P/J/zcACwDS/xUA9P/m/zAACQDX/+3/9v/2/yQACgDZ/+P/AwAKABYA///b/9j/EQALABkADgD6/+7/GwD4/w4A8P/w//j/EgAEAAUA9f/1/wQAGgD4/wAA5////wAAGQD1////7f8FAAUAFQDv/wAA6v8LAAcAFQDs/wEA9P8SAAYACwDr//7/AQASAAYABQDv/wIAAwAWAAIAAgDv/wAABgATAAEA/f/u/wQABgAQAPr/+P/z/wUACQALAPj/9//4/wgABwAKAPT/+f/5/w4ABwAIAPT/+//9/w4AAwADAPH//f///w8A//8BAPP///8BAA0A/f/+//X/AgACAA0A+//8//b/BAADAAoA+f/7//n/BgADAAcA+P/7//v/BwABAAQA+P/8//3/CQABAAIA9//9////CQD/////+P///wAACAD9//7/+f8AAAAABwD8//3/+v8CAAAABgD7//z//P8EAAAABAD6//3//P8FAP//AgD6//7//v8FAP7/AQD7//////8GAP7/AAD7/wEA//8EAP3/AAD9/wEA/v8DAP3/AAD9/wIA/v8CAP3/AQD9/wIA/v8CAP7/AQD+/wEA"];
/**
 * @license
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(t){this._context=t,this._splitter=this._context.createChannelSplitter(4),this._inX=this._context.createGain(),this._inY=this._context.createGain(),this._inZ=this._context.createGain(),this._m0=this._context.createGain(),this._m1=this._context.createGain(),this._m2=this._context.createGain(),this._m3=this._context.createGain(),this._m4=this._context.createGain(),this._m5=this._context.createGain(),this._m6=this._context.createGain(),this._m7=this._context.createGain(),this._m8=this._context.createGain(),this._outX=this._context.createGain(),this._outY=this._context.createGain(),this._outZ=this._context.createGain(),this._merger=this._context.createChannelMerger(4),this._splitter.connect(this._inX,1),this._splitter.connect(this._inY,2),this._splitter.connect(this._inZ,3),this._inX.gain.value=-1,this._inY.gain.value=-1,this._inZ.gain.value=-1,this._inX.connect(this._m0),this._inX.connect(this._m1),this._inX.connect(this._m2),this._inY.connect(this._m3),this._inY.connect(this._m4),this._inY.connect(this._m5),this._inZ.connect(this._m6),this._inZ.connect(this._m7),this._inZ.connect(this._m8),this._m0.connect(this._outX),this._m1.connect(this._outY),this._m2.connect(this._outZ),this._m3.connect(this._outX),this._m4.connect(this._outY),this._m5.connect(this._outZ),this._m6.connect(this._outX),this._m7.connect(this._outY),this._m8.connect(this._outZ),this._splitter.connect(this._merger,0,0),this._outX.connect(this._merger,0,1),this._outY.connect(this._merger,0,2),this._outZ.connect(this._merger,0,3),this._outX.gain.value=-1,this._outY.gain.value=-1,this._outZ.gain.value=-1,this.setRotationMatrix3(new Float32Array([1,0,0,0,1,0,0,0,1])),this.input=this._splitter,this.output=this._merger}dispose(){this._splitter.disconnect(this._inX,1),this._splitter.disconnect(this._inY,2),this._splitter.disconnect(this._inZ,3),this._inX.disconnect(this._m0),this._inX.disconnect(this._m1),this._inX.disconnect(this._m2),this._inY.disconnect(this._m3),this._inY.disconnect(this._m4),this._inY.disconnect(this._m5),this._inZ.disconnect(this._m6),this._inZ.disconnect(this._m7),this._inZ.disconnect(this._m8),this._m0.disconnect(this._outX),this._m1.disconnect(this._outY),this._m2.disconnect(this._outZ),this._m3.disconnect(this._outX),this._m4.disconnect(this._outY),this._m5.disconnect(this._outZ),this._m6.disconnect(this._outX),this._m7.disconnect(this._outY),this._m8.disconnect(this._outZ),this._splitter.disconnect(this._merger,0,0),this._outX.disconnect(this._merger,0,1),this._outY.disconnect(this._merger,0,2),this._outZ.disconnect(this._merger,0,3)}setRotationMatrix3(t){this._m0.gain.value=t[0],this._m1.gain.value=t[1],this._m2.gain.value=t[2],this._m3.gain.value=t[3],this._m4.gain.value=t[4],this._m5.gain.value=t[5],this._m6.gain.value=t[6],this._m7.gain.value=t[7],this._m8.gain.value=t[8]}setRotationMatrix4(t){this._m0.gain.value=t[0],this._m1.gain.value=t[1],this._m2.gain.value=t[2],this._m3.gain.value=t[4],this._m4.gain.value=t[5],this._m5.gain.value=t[6],this._m6.gain.value=t[8],this._m7.gain.value=t[9],this._m8.gain.value=t[10]}getRotationMatrix3(){const t=new Float32Array(9);return t[0]=this._m0.gain.value,t[1]=this._m1.gain.value,t[2]=this._m2.gain.value,t[3]=this._m3.gain.value,t[4]=this._m4.gain.value,t[5]=this._m5.gain.value,t[6]=this._m6.gain.value,t[7]=this._m7.gain.value,t[8]=this._m8.gain.value,t}getRotationMatrix4(){const t=new Float32Array(16);return t[0]=this._m0.gain.value,t[1]=this._m1.gain.value,t[2]=this._m2.gain.value,t[4]=this._m3.gain.value,t[5]=this._m4.gain.value,t[6]=this._m5.gain.value,t[8]=this._m6.gain.value,t[9]=this._m7.gain.value,t[10]=this._m8.gain.value,t}}
/**
 * @license
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di={DEFAULT:[0,1,2,3],SAFARI:[2,0,1,3],FUMA:[0,3,1,2]};class Ai{constructor(t,e){this._context=t,this._splitter=this._context.createChannelSplitter(4),this._merger=this._context.createChannelMerger(4),this.input=this._splitter,this.output=this._merger,this.setChannelMap(e||di.DEFAULT)}setChannelMap(t){Array.isArray(t)&&(this._channelMap=t,this._splitter.disconnect(),this._splitter.connect(this._merger,0,this._channelMap[0]),this._splitter.connect(this._merger,1,this._channelMap[1]),this._splitter.connect(this._merger,2,this._channelMap[2]),this._splitter.connect(this._merger,3,this._channelMap[3]))}dipose(){this._splitter.disconnect(this._merger,0,this._channelMap[0]),this._splitter.disconnect(this._merger,1,this._channelMap[1]),this._splitter.disconnect(this._merger,2,this._channelMap[2]),this._splitter.disconnect(this._merger,3,this._channelMap[3])}}Ai.ChannelMap=di;var E=Object.freeze({AMBISONIC:"ambisonic",BYPASS:"bypass",OFF:"off"});
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t,e){_(t)||S("FOARenderer: Invalid BaseAudioContext."),this._context=t,this._config={channelMap:Ai.ChannelMap.DEFAULT,renderingMode:E.AMBISONIC},e&&(e.channelMap&&(Array.isArray(e.channelMap)&&4===e.channelMap.length?this._config.channelMap=e.channelMap:S("FOARenderer: Invalid channel map. (got "+e.channelMap+")")),e.hrirPathList&&(Array.isArray(e.hrirPathList)&&2===e.hrirPathList.length?this._config.pathList=e.hrirPathList:S("FOARenderer: Invalid HRIR URLs. It must be an array with 2 URLs to HRIR files. (got "+e.hrirPathList+")")),e.renderingMode&&(Object.values(E).includes(e.renderingMode)?this._config.renderingMode=e.renderingMode:D("FOARenderer: Invalid rendering mode order. (got"+e.renderingMode+') Fallbacks to the mode "ambisonic".'))),this._buildAudioGraph(),this._tempMatrix4=new Float32Array(16)}_buildAudioGraph(){this.input=this._context.createGain(),this.output=this._context.createGain(),this._bypass=this._context.createGain(),this._foaRouter=new Ai(this._context,this._config.channelMap),this._foaRotator=new hi(this._context),this._foaConvolver=new li(this._context),this.input.connect(this._foaRouter.input),this.input.connect(this._bypass),this._foaRouter.output.connect(this._foaRotator.input),this._foaRotator.output.connect(this._foaConvolver.input),this._foaConvolver.output.connect(this.output),this.input.channelCount=4,this.input.channelCountMode="explicit",this.input.channelInterpretation="discrete"}dipose(){mode===E.BYPASS&&this._bypass.connect(this.output),this.input.disconnect(this._foaRouter.input),this.input.disconnect(this._bypass),this._foaRouter.output.disconnect(this._foaRotator.input),this._foaRotator.output.disconnect(this._foaConvolver.input),this._foaConvolver.output.disconnect(this.output),this._foaConvolver.dispose(),this._foaRotator.dispose(),this._foaRouter.dipose()}async initialize(){D("FOARenderer: Initializing... (mode: "+this._config.renderingMode+")");const t=this._config.pathList?new ci(this._context,this._config.pathList,{dataType:"url"}):new ci(this._context,ui);try{const e=await t.load();this._foaConvolver.setHRIRBufferList(e),this.setRenderingMode(this._config.renderingMode),D("FOARenderer: HRIRs loaded successfully. Ready.")}catch(t){S("FOARenderer: HRIR loading/decoding failed. Reason: "+t.message)}}setChannelMap(t){t.toString()!==this._config.channelMap.toString()&&(D("Remapping channels (["+this._config.channelMap.toString()+"] -> ["+t.toString()+"])."),this._config.channelMap=t.slice(),this._foaRouter.setChannelMap(this._config.channelMap))}setRotationMatrix3(t){this._foaRotator.setRotationMatrix3(t)}setRotationMatrix4(t){this._foaRotator.setRotationMatrix4(t)}getRenderingMode(){return this._config.renderingMode}setRenderingMode(t){if(t!==this._config.renderingMode){switch(t){case E.AMBISONIC:this._foaConvolver.enable(),this._bypass.disconnect();break;case E.BYPASS:this._foaConvolver.disable(),this._bypass.connect(this.output);break;case E.OFF:this._foaConvolver.disable(),this._bypass.disconnect();break;default:return void D('FOARenderer: Rendering mode "'+t+'" is not supported.')}this._config.renderingMode=t,D("FOARenderer: Rendering mode changed. ("+t+")")}}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(t,e,n){this._context=t,this._active=!1,this._isBufferLoaded=!1,this._ambisonicOrder=e,this._numberOfChannels=(this._ambisonicOrder+1)*(this._ambisonicOrder+1),this._buildAudioGraph(),n&&this.setHRIRBufferList(n),this.enable()}_buildAudioGraph(){const t=Math.ceil(this._numberOfChannels/2);this._inputSplitter=this._context.createChannelSplitter(this._numberOfChannels),this._stereoMergers=[],this._convolvers=[],this._stereoSplitters=[],this._positiveIndexSphericalHarmonics=this._context.createGain(),this._negativeIndexSphericalHarmonics=this._context.createGain(),this._inverter=this._context.createGain(),this._binauralMerger=this._context.createChannelMerger(2),this._outputGain=this._context.createGain();for(let e=0;e<t;++e)this._stereoMergers[e]=this._context.createChannelMerger(2),this._convolvers[e]=this._context.createConvolver(),this._stereoSplitters[e]=this._context.createChannelSplitter(2),this._convolvers[e].normalize=!1;for(let t=0;t<=this._ambisonicOrder;++t)for(let e=-t;e<=t;e++){const n=t*t+t+e,i=Math.floor(n/2);this._inputSplitter.connect(this._stereoMergers[i],n,n%2),this._stereoMergers[i].connect(this._convolvers[i]),this._convolvers[i].connect(this._stereoSplitters[i]),e>=0?this._stereoSplitters[i].connect(this._positiveIndexSphericalHarmonics,n%2):this._stereoSplitters[i].connect(this._negativeIndexSphericalHarmonics,n%2)}this._positiveIndexSphericalHarmonics.connect(this._binauralMerger,0,0),this._positiveIndexSphericalHarmonics.connect(this._binauralMerger,0,1),this._negativeIndexSphericalHarmonics.connect(this._binauralMerger,0,0),this._negativeIndexSphericalHarmonics.connect(this._inverter),this._inverter.connect(this._binauralMerger,0,1),this._inverter.gain.value=-1,this.input=this._inputSplitter,this.output=this._outputGain}dispose(){this._active&&this.disable();for(let t=0;t<=this._ambisonicOrder;++t)for(let e=-t;e<=t;e++){const n=t*t+t+e,i=Math.floor(n/2);this._inputSplitter.disconnect(this._stereoMergers[i],n,n%2),this._stereoMergers[i].disconnect(this._convolvers[i]),this._convolvers[i].disconnect(this._stereoSplitters[i]),e>=0?this._stereoSplitters[i].disconnect(this._positiveIndexSphericalHarmonics,n%2):this._stereoSplitters[i].disconnect(this._negativeIndexSphericalHarmonics,n%2)}this._positiveIndexSphericalHarmonics.disconnect(this._binauralMerger,0,0),this._positiveIndexSphericalHarmonics.disconnect(this._binauralMerger,0,1),this._negativeIndexSphericalHarmonics.disconnect(this._binauralMerger,0,0),this._negativeIndexSphericalHarmonics.disconnect(this._inverter),this._inverter.disconnect(this._binauralMerger,0,1)}setHRIRBufferList(t){if(!this._isBufferLoaded){for(let e=0;e<t.length;++e)this._convolvers[e].buffer=t[e];this._isBufferLoaded=!0}}enable(){this._binauralMerger.connect(this._outputGain),this._active=!0}disable(){this._binauralMerger.disconnect(),this._active=!1}}
/**
 * @license
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P(t,e){return t===e?1:0}function M(t,e,n){return(n+t)*(2*t+1)+(e+t)}function B(t,e,n,i,s){const o=M(e,n,i);t[e-1][o].gain.value=s}function k(t,e,n,i){const s=M(e,n,i);return t[e-1][s].gain.value}function T(t,e,n,i,s){return i===s?k(t,1,e,1)*k(t,s-1,n,s-1)-k(t,1,e,-1)*k(t,s-1,n,1-s):i===-s?k(t,1,e,1)*k(t,s-1,n,1-s)+k(t,1,e,-1)*k(t,s-1,n,s-1):k(t,1,e,0)*k(t,s-1,n,i)}function I(t,e,n,i){return T(t,0,e,n,i)}function F(t,e,n,i){if(0===e)return T(t,1,1,n,i)+T(t,-1,-1,n,i);if(e>0){const s=P(e,1);return T(t,1,e-1,n,i)*Math.sqrt(1+s)-T(t,-1,1-e,n,i)*(1-s)}{const s=P(e,-1);return T(t,1,e+1,n,i)*(1-s)+T(t,-1,-e-1,n,i)*Math.sqrt(1+s)}}function L(t,e,n,i){return 0===e?0:e>0?T(t,1,e+1,n,i)+T(t,-1,-e-1,n,i):T(t,1,e-1,n,i)-T(t,-1,1-e,n,i)}function O(t,e,n){const i=P(t,0),s=Math.abs(e)===n?1/(2*n*(2*n-1)):1/((n+e)*(n-e));return[Math.sqrt((n+t)*(n-t)*s),.5*(1-2*i)*Math.sqrt((1+i)*(n+Math.abs(t)-1)*(n+Math.abs(t))*s),-.5*(1-i)*Math.sqrt((n-Math.abs(t)-1)*(n-Math.abs(t)))*s]}function R(t,e){for(let n=-e;n<=e;n++)for(let i=-e;i<=e;i++){const s=O(n,i,e);Math.abs(s[0])>0&&(s[0]*=I(t,n,i,e)),Math.abs(s[1])>0&&(s[1]*=F(t,n,i,e)),Math.abs(s[2])>0&&(s[2]*=L(t,n,i,e)),B(t,e,n,i,s[0]+s[1]+s[2])}}function N(t){for(let e=2;e<=t.length;e++)R(t,e)}class fi{constructor(t,e){this._context=t,this._ambisonicOrder=e;const n=(e+1)*(e+1);this._splitter=this._context.createChannelSplitter(n),this._merger=this._context.createChannelMerger(n),this._gainNodeMatrix=[];for(let t=1;t<=e;t++){const e=t*t,n=2*t+1;this._gainNodeMatrix[t-1]=[];for(let i=0;i<n;i++){const s=e+i;for(let o=0;o<n;o++){const r=e+o,a=i*n+o;this._gainNodeMatrix[t-1][a]=this._context.createGain(),this._splitter.connect(this._gainNodeMatrix[t-1][a],s),this._gainNodeMatrix[t-1][a].connect(this._merger,0,r)}}}this._splitter.connect(this._merger,0,0),this.setRotationMatrix3(new Float32Array([1,0,0,0,1,0,0,0,1])),this.input=this._splitter,this.output=this._merger}dispose(){for(let t=1;t<=ambisonicOrder;t++){const e=t*t,n=2*t+1;for(let i=0;i<n;i++){const s=e+i;for(let o=0;o<n;o++){const r=e+o,a=i*n+o;this._splitter.disconnect(this._gainNodeMatrix[t-1][a],s),this._gainNodeMatrix[t-1][a].disconnect(this._merger,0,r)}}}this._splitter.disconnect(this._merger,0,0)}setRotationMatrix3(t){this._gainNodeMatrix[0][0].gain.value=t[0],this._gainNodeMatrix[0][1].gain.value=t[1],this._gainNodeMatrix[0][2].gain.value=t[2],this._gainNodeMatrix[0][3].gain.value=t[3],this._gainNodeMatrix[0][4].gain.value=t[4],this._gainNodeMatrix[0][5].gain.value=t[5],this._gainNodeMatrix[0][6].gain.value=t[6],this._gainNodeMatrix[0][7].gain.value=t[7],this._gainNodeMatrix[0][8].gain.value=t[8],N(this._gainNodeMatrix)}setRotationMatrix4(t){this._gainNodeMatrix[0][0].gain.value=t[0],this._gainNodeMatrix[0][1].gain.value=t[1],this._gainNodeMatrix[0][2].gain.value=t[2],this._gainNodeMatrix[0][3].gain.value=t[4],this._gainNodeMatrix[0][4].gain.value=t[5],this._gainNodeMatrix[0][5].gain.value=t[6],this._gainNodeMatrix[0][6].gain.value=t[8],this._gainNodeMatrix[0][7].gain.value=t[9],this._gainNodeMatrix[0][8].gain.value=t[10],N(this._gainNodeMatrix)}getRotationMatrix3(){const t=new Float32Array(9);return t[0]=this._gainNodeMatrix[0][0].gain.value,t[1]=this._gainNodeMatrix[0][1].gain.value,t[2]=this._gainNodeMatrix[0][2].gain.value,t[3]=this._gainNodeMatrix[0][3].gain.value,t[4]=this._gainNodeMatrix[0][4].gain.value,t[5]=this._gainNodeMatrix[0][5].gain.value,t[6]=this._gainNodeMatrix[0][6].gain.value,t[7]=this._gainNodeMatrix[0][7].gain.value,t[8]=this._gainNodeMatrix[0][8].gain.value,t}getRotationMatrix4(){const t=new Float32Array(16);return t[0]=this._gainNodeMatrix[0][0].gain.value,t[1]=this._gainNodeMatrix[0][1].gain.value,t[2]=this._gainNodeMatrix[0][2].gain.value,t[4]=this._gainNodeMatrix[0][3].gain.value,t[5]=this._gainNodeMatrix[0][4].gain.value,t[6]=this._gainNodeMatrix[0][5].gain.value,t[8]=this._gainNodeMatrix[0][6].gain.value,t[9]=this._gainNodeMatrix[0][7].gain.value,t[10]=this._gainNodeMatrix[0][8].gain.value,t}getAmbisonicOrder(){return this._ambisonicOrder}}const mi=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wQA8/8YAP3/CgACAAAA//8CAAYA8/8AAPH/CgDv/97/e/+y/9P+UQDwAHUBEwV7/pP8P/y09bsDwAfNBGYIFf/Y+736+fP890Hv8AGcC3T/vwYy+S70AAICA3AD4AagBw0R4w3ZEAcN8RVYAV8Q8P2z+kECHwdK/jIG0QNKAYUElf8IClj7BgjX+/f8j/l3/5f/6fkK+xz8FP0v/nj/Mf/n/FcBPfvH/1H3+gBP/Hf8cfiCAR/54QBh+UQAcvkzAWL8TP13+iD/V/73+wv9Kv+Y/hv+xPz7/UL83//a/z/9AP6R/5L+jf26/P3+rP26/tD8nP7B/Pv+WP1V/sP9gv91/3P9xP3J/nv/GP5S/sb+IP8v/9j/dv7U/pr+6v+u/Z3/sv5cAOr9Q/83/+n/zP5x/57+2//k/nwA/v01//L+SACB/sD/Ff81AJT+TgDp/ocAm/5dAFT+MgD+/pMAW/7o/yH/xQDA/kkA9P6LAL3+pAC0/iQAz/5UALD+UwAt/3UAhf4UAA//pwC+/joAz/5aAAv/fwDY/iMAIf+uAPP+ZAAc/0QAy/4xAB7/TgDs/goADP8wAEL/NwDo/ub/Uf9BAC3/+v9F/y4ARP9HAFP/EQA3/xMATP81AG3/HQAu/wgAaP9FACb/9f9B/y0AUP8rAED/CwBV/z4AW/8TAGH/BQBK/xsAfv8eAFn/AgB3/zwAff8RAGj//v+E/yAAb//0/3n/FwBz/xcAiv8PAHn/FQCJ/xgAg//x/3j/EQCa/ycAff/w/47/HwCI//X/iv/7/43/JQCM/+n/kP8AAJb/JACj//7/oP8ZAML/SwCo/w4Atv8tAMb/PACr/xcAwP9HAMP/OADF/y4A0f9IANL/NwC//zEA0f9LAMb/MAC8/y4A3f9GAMH/FQDQ/yYA2/8sAMT/AwDX/xkA3v8SAM3/9v/c/w8A4f8LAMj/8f/h/xQA2P8CAMn/8//j/xQA0v/7/9H//P/i/xEA0v/1/9L//f/j/w0A0f/x/9f//v/k/wgAz//u/9z/AwDg/wMA0P/v/9//BQDf////0v/y/+D/CADc//3/0v/2/+L/CgDa//r/1v/5/+T/CgDY//j/2f/9/+T/CADY//f/3P8AAOT/BwDY//f/4P8EAOP/BADZ//j/4v8GAOL/AwDa//r/5f8IAOH/AQDc//3/5v8JAOD//v/f////5v8IAOD//v/h/wIA5/8HAOD//f/j/wMA5/8GAOD//f/l/wYA5v8EAOD//v/m/wYA5f8CAOL////n/wYA5P8BAOH/AADl/wUA4f///+H/AQDk/wMA4f///+T/AQDm/wEA5////+r/AADt/wAA7/////P/AAD1////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////v///wAAAAAAAAAAAQAAAAAA///9/wAABAD+//n/AgAJAAAA+v/+//f/DAAdAPv/+v+l/8L+jf/4/vgAdwVPAQACLQBo+Qj/Ev7o/N3/VgCbA08Bxf+L+yn9J/2HCU8FmgBvDe30Rv5h/LT09gi5CxkA5gOi8/30kwEM+4YJMf2nBmkJJAQQBLoFtvvv+m4A7PF6/R0Bif3qAuf8WARAAf4GyABG/BIAwvr4Acv8U//c/yIC8AEn/B8Daf2CAgMBAf3MAN38vgLK/UT/QwCyAPYClPyvAW/+pQAoASD+zP+R/IYC1f7C/nEBQP96AZb+1QAIAM//yQE7/tkAZ/7TAXL/w/8+AIsAtwB7/24A4v9a/z4A7v4iADb/dwCj/23/kgBOANUAIv8lAKEAxP9gAK7/BwCP/5kA7/9v/0wAzv9DAGT/3/9vAHv/6P+q/xUA7P8XAO//uv/g/2UAEgCV/wEATADM/+7/+//j/+D/9v/i//j/IgD+/xoAxf/6/z4A5/+8/9D/QwDq/+3/OQDT/zUAIgA/APP/PgAjAPD/BwAGACAADAC3//b/HAA3AN//RgDN/w8AIAACAN//GQBDACEAIwA+ACoAJQAeAPz/KgAYAPr/DgAEABYAIgAcAMT/7f8OAOL/5P/2//L/9P8GAPT/7v/8/+7/6v/t//z/AgAUAOL//P8VAAMA4/8IAPb/+P8MAAoA5v8NAAsA9v///wEAAAD9//n/9/8JAAYA7v/6/wMA+f8GAAEA7f/7/xgACAD4/w8A///3/w0A+f8BAAIA/P/5/xIA///9//r/7v/+/xYACQD///H/CwDz/wEADgAHAPP/FADn/+3/AQD5//f/AgD7/wEABwAMAAEADQD8//n/8f8OAPX/BAD+//X/+v8WAAQA+f8CAAEA7/8QAAEA/P8DAAUA9f8KAAwA9v8DAAUA+f8OAAoA9f/7/w0A+v8EAAgA8P/6/woA+//8/wkA+P/3/woA+//8/wcA9//1/woAAwD5/wcA/P/3/w0AAwD3/wEABAD2/wkABgD3/wEABQD3/wUABQD3//v/BwD3/wMABQD3//r/CQD7////BQD6//n/CQD9//3/BAD9//j/BwAAAPv/AwD///j/BwABAPn/AQABAPn/BQACAPn///8DAPr/AwADAPr//v8EAPv/AQADAPv//P8FAP3///8DAPz/+/8FAP7//f8CAP7/+/8EAP///P8BAP//+/8DAAEA+/8AAAEA+/8CAAIA+////wIA/f8AAAIA/P/+/wIA/f8AAAIA/f/9/wMA/////wEA///+/wIA/////wAAAAD+/wAAAAD/////AAD//wAA//8AAP//AAD//wAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD////////+//////8AAP////8AAP//AAAAAPz//f8IAAMA9////w4AAQD6/wwA8//+/y8Afv/0/2H/UP5gAbH+2QG1B2cAVAIh/l32FPyM/nACPQDV/+UEo/Q6AQwCu/oLD9kF8QJA/Uz+Wf2KCOcC+wUKBsL5aQBQ97rwOPiPAvn5CAl8AHEDkQPcAA8Bn/lIAdz7HQF1+xz9cAM4/94E4gDKAun+cgPYAYr9JgJr/bf+ivxz/MoBgv5UA8EBSgAQAJ7/UgEk/cQB7f63/sD/vf4XAhT/BQFCADYAnQGI/9EBtv3hALD/vP+c/3H/TgIN/1sBpf8yAP3/4f8qABr+1f8OAJ3/dwAGADEBnv9JAPz/IQBwAIH/jgAS/4wAsACTAOn/DQDCALn/ZQCSAAIAAwD1/9//jv9aADQA/v9EAB0AfgA8AAQACgB9APr/IAARAPT/5v9xACAABAAHAGUAt/89AC4ACgAjAMP/+v/9/xYA7f/1/+D/7P87AC0Auv8RAAcA9/8FAC8A2//y/xIAEwAaADQAJADp/zoAAgAfABIA2f/e/zUA+P/6/w4A9//A/zcA4//P//T/5f/R////EwDb/w4A8/8BABkANADh/xEA+f/0/wIAHADc//j/GwD1//f/GADs/+v/EAAAAPz/EgD3/+r/FgAMAAkAGAD9/+z/IQAQAPH/GQD3//z/CgAfAOX/AgD8//H/BAATAOv/+v///wIABAAdAOj/BQAPAAcAAQATAOz/8/8JAAkA6f8VAOv/+f8QABUA/v8OAO3/+P8KABUA9f8FAPv/5/8TAA0A7f8XAAkAAQAJABYA4/8WAAcACgANABEA7v8EAP7/AAD+/wMA9//7/xAAAQD8/wQA+f/7/wMABgDq/wAA+v/3/wYACQD1//3/BAD9/wgADgDw//r/AgD6/wEACADv//j/BQD///X/BwDu//j/AgACAPP/BAD2//n/BAAGAPb/BAD8//3/BQAJAPL/AwD+//3/BAAIAPP//f8DAPz/AAAGAPP/+/8CAP7//f8FAPX/+f8DAAAA/P8EAPf/+v8GAAMA+/8EAPv/+/8GAAQA+v8CAP///P8EAAUA+f8AAP///f8CAAUA+P///wEA/v8BAAUA+f/+/wIAAAD//wUA+v/9/wMAAQD9/wQA+//9/wMAAgD8/wMA/P/9/wMAAwD7/wEA/v/+/wIAAwD6/wEA///+/wAABAD6/wAAAQD//wAAAwD7////AQAAAP//AwD8//7/AgABAP3/AgD9//7/AQABAP3/AQD+//7/AAACAPz/AAD+//////8BAP3/AAD//wAA//8BAP7/AAD//wAA/v8AAP7/AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////P/9//3//////wAAAAAAAAIAAgACAP//CAAEAEEA//+cAAUAb/8HAAH9+P9eARkAogQUAJn8BwCd/gX/+QQNAKoC9gFdAtb/b/vd/936TP/6AsD/nfqn/un1W/0dA8IEsQLvAJv2bP72+WMAkP8dAcX+nQO2AIr6bP/EABX+NgK/Bdj2IQv2AE4EUAiD/xQAnwIm/B0B/wGNAoH7sQaP/b8CiQakAqD+R/9xA477KQL//6r75v/O/pcCgQCtAiMCBQAkANAARwHf//39hgBl/kUAJgEtAUEATgA/AgoASADK/zUAJv29/vL+l/9c/0cAUwBBAE8A6QE5/87/Wv9NAOf+5v7P/5P/4/9BAKYAQwDD/zYB5v+r/zYATwAp/1v/WQAEAB0AhwA0AA0AIAA3AAEAzv/u/+//5v9m/zwAIADQ/8T/SABiANb/SwAbAFf/MQDX/7L/hP8TAPr/AgAMAAsAHwAZAI3/VgDC/9v/5//x/6P/AwBlAMv/yf82AB4A+P9WAPj/NwDi/1EA0v9JANj/JwAcAAEADABYANj/4f8MAEwAmP82AN//3P8UADYA7//6/wIACADU/ygAyv82AN7/9v/2/ygAxv/9/+3/5//n/zUA6//g/y4ADgD5/wsABwDv/xIADwAGACoAJQD3/zIA+/8FABsAFgDO/zAAHAAIABQALADp/xcACAAAAPH/GADs/wkACQAFAAgAFQDp/wIAHAD1//P/EQDw/+3/GAD9/+f/HAD8//T/DAAQAPH/HwD4//r/DwAPAOj/EQACAOn/DAAXAOX/BAAOANH/9/8MAO//9f8LANT/9f8EAO//6f8NANb/+P8KAOz/5v8MAOD/7f8UAO//7//+//7/9v8YAPj/9f/z/wsA+v8SAPD/+v/x/xYA+f8SAPb/9//3/xEABQACAPn/9//y/xQACQD///b//v/7/xIACQD9//H/AAD7/xEAAgD5//P/AwD9/w8AAgD3//D/BAD//wUA/v/0//D/BgADAAMA/P/2//f/BwAGAP7/+//2//j/CAAFAPv/+f/5//v/BwAHAPn/9//7//7/BQAFAPf/9//+/wEABAACAPf/+P8BAAIAAgAAAPj/9/8CAAMAAAD+//n/+f8EAAQA/v/8//r/+/8EAAMA/P/7//z//P8EAAIA/P/5//7//v8DAAEA+//5//////8CAAAA+//5/wEAAAABAP//+//6/wIAAQD///3//P/7/wMAAQD///3//f/9/wIAAQD9//3//v/9/wMAAQD9//z/AAD//wEAAAD9//z/AAAAAAAA///9//3/AAD//wAA/v////7/AAD//wAA////////AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+////+f////v//v///wAA/////wUAAQAIAAIABwACAHkATAAOAaMAAf9C/9X6QvwhArAAtghABW37nv/y+0wAWQNcAE8JRwSOC6AEJe8P8S/zrPWaBI/+LQA/+0L+P/4K8AgAb/8uCh78BQtC614GaQWfAin5UfzN8Tf+GQizAZ4MCQMbGJ4BoRS7AvcHyQARA6n9ZwHZ/z4DvwAZAlAB6gbNAS4GFADFATL7E/2K+j37C/xp/SD9Uv0VAOsDs//WAd3+bv7F/f79mP2X/KH+FwC0/1n+VgFcATABHQGaAET+nf8Y/hoAovpqAXj9CQKW/lsCl/4RApj+bAHk/RcAlv4BAG/+DgDi//3/GwAOAEIAq/+y/3z/8v8+/7T/Tv8//27/mgDZ/1sA+P+cAAAA/P/i/yMAi/85AMP/KgDM/9MA9P+QABoA4QAiACwACwBdAP7/TQDb/y0Ayf+SAA0AZwDg/4wA+/8/AAMAgQDp/w0ADAAQAAoANgAgAA4AKABIAB4A4v/3/+f/+v/c/+n/EADn/wgAFAAqAOz/IwDc/9//3f8XAND/2v/a/w0A5v8BANb/9P/m/wAA8P8ZAN3/RwAGAEsABgB/AP7/NAASAEgABAA3AP3/KgD9/1sA8P8lAOr/FgD1/xAA4/8kAOv/AwD4/xEA5f8NAPT/+v/3/x8A7f8PAPj/IwD5/yAA9/8ZAAEAGgD4/xoA9f8HAAMACAD0/xgA+P8AAPr/IQDp/w4A8v8HAPX/IgD1/wYA+P8GAPX/GgD3/woABQASAAcAGQDw/+v/9P8bAP3/HADs/+f/7/8LAPr//v/0//T/AgD2/wsA6P///+P/CADY//7/5v/3/wQA/v8LAPD/GgD1/yMA/P8QAOv/LADw/yQA+P8XAO7/MQD9/yEAAQAcAPD/IgD9/xMA+/8OAO//FQABAAoA+/8PAPP/FQABAAQA9/8PAPX/CAADAAEA+P8NAPv/CAAGAAUA9/8JAP//AAAFAPz/+f8HAAQA/f8FAP3//P8FAAYA+P8DAP7/+/8AAAcA9/8BAP///f///wgA9//+/wAA/v/8/wUA9//8/wIA///7/wUA+v/7/wIAAAD6/wMA/P/6/wEAAQD6/wEA/v/7/wIAAgD6////AAD7/wEAAgD7//7/AQD8/wAAAwD8//3/AwD9/wAAAgD9//z/AwD/////AgD+//z/AwAAAP7/AQD///3/AgABAP3/AAAAAP3/AgACAPz///8BAP3/AQACAP3//v8BAP7/AAABAP3//v8CAP7///8BAP7//f8CAP////8AAAAA/v8CAAAAAAAAAAAA/v8BAAAAAAD//wAA//8AAP//AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA/////wAAAQD+////AAAGAP3/OAABAIIAAwBv//f/E/0QAK0ADQCzA/7/8P4u/0cBDQCJA6ABbQDg/w7/z/9o+Vn/SPnL/1//Ef+2+jr9RfZgA5QFZwILDFj+PAb2/nEFKgKk/R0Dlv6b/FUDsP6YAoj9SgAT/iL/tAPwAv8A0P6zAr7/dwAnAf39uP22/skA2v///2YCoP4UAUsAZgF2AJH+4P70/rz9+f+U/Xv/8v7CAcb+TACS/kwAv/+x/tX9oP71/oL/1f8nAEUAZwGtAAgAIgC/AD4BaP8GAGH/dQDF/64Arf8nAakAhAH9/+kAQQD3AFb/q/8p/yIAR/8FAPD/ZAA/AIYA3v8tADQADQBp/3f/CwABAP3/Wf8OANj/WwDH/xoAe/8DAKz/zv96/z8A3f/J/5X/IAD5//j/q//c/+//RADq//D/vv8pADUAFQDI/y8ACAAbANb/OwD3/+3/9f/e/wcAIAAeAMH/8/8xAC0AEADW/+3/HAADAPv/8P8DAOL/OwD3/xcACQAHAM//5f8XAAcAz//T/9D/HgD9////yf/e//v/AgD//9H/6/////H/+/8hAAIA9//7/w0AFgAQAPL/2v/8/xsAGQABANz/9P8YAAQA/v/y/wMA5v8YAAkAAAAAAAMA7/8KABgADwDs//j/BwATABsA8P/1//z/BAAMAAAA9P/s/xAA/v8GAAkA/v/p/wMACwALAP7/9P/p/wcADQAFAPb/7//4/w0ACAD8//b//v/1/wMACwD1//T/8P/8/wAACQDz/+f/5P8GAAkABQD5//D/+v8FAA0AAwD///T/AgACABAA/v8CAPD/+/8FAAoA9f/3//f//v8GAP7/9v/t//z/+f8AAPj/+v/3/wEA+v8HAPr//P/5/wQA//8DAPr/+P/3/wYA///+//X/+//5/wQA/f/7//X/+//4/wMA/f/8//j//v/9/wYA///8//f/AgAAAAUA/f/6//n/AwACAAIA/f/7//z/AwACAAAA/f/6//3/AgADAP7//f/7/wAAAwAFAPz////8/wMAAgAEAPv//v/+/wMAAgADAPv//v///wMAAQABAPv//f8AAAIAAAD///v//f8BAAIA///+//z//v8CAAIA/v/9//3///8CAAEA/v/9//7/AAACAAAA/v/9////AAABAAAA/f/9/wAAAQABAP///f/+/wEAAQAAAP///v/+/wEAAQD///7//v///wEAAQD///7//v///wEAAAD+//7///8AAAAAAAD+//7///8AAAAA///+//7///8AAAAA////////AAAAAP////////////8AAP//////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAAAAAAABAAAAAAD//////////////v////3/////////+//8////AQD9//z/9f8BAAIA+f8dACgAWQBxAJX/qv+Y/uz9aP9k/7UDUQQBAiQA4Pgi/AkB0gKaBsD/+fxp/vz9CQSp/I/+ywDO+vMD0fzK/PABcgBeBfoBv/+uAuH9Sf5gAy39awMmBWUBuP9fA9/9fgDj/2/+EACaACcCSv9Z/2j/rv7hAA0AWf55/7L84P7E/SIAT/67AMv/tf+FAA7/1v+7/gv/IP+E/sQA+P5aAXz/tP9XAFX/tP8o/4r/j//e/yQAMv9mAJT/rgCr/9X/EwCb//H/9f7F/6D/EAAoAK3//v+e/zsAh/+B/7r/if/C/2r/4P/z/6//HwCy/0IA7/9ZALT/y/80ACgA9v/J/9//DgA5ADUALQARADIACwAfAOf/NgArACMACQBBAEcAGAAjAC4AWQBUAHcAAAAfACEAIAAcAPj/CADk/yQA7v89AEEAFwD5/xYA6f8aAOX/AADF/zQADwAUAOT/BQDr/yUA6P8XAOf/HADR/0AA8P8nAAgACQDt/ycAKAAHAPH/IQDz/xsACADn//n/DgADAA4A8P///8z/GgDN/yMA/f8QANj/MwACAC0ACwAOAO3/JgAZAAUACgAAAA4AIgAaAAkADwACAAAAHQATAAUABQACAAgACwAjAO////8AAA8ABQAPAPL//f8GAAsABgAGAPD/8v8GAPz/CAD6//H/6v8PAAgABgD4//3/9v8aAAgABwD1//7//v8QAAoACAD//wUA9v8QAAoABAAFAAgAAgAJAAoAAwD//w0AAgD//wcA/v8DAAoABQAFABUABAAKAAYABwAHAA8ACgAGAAwADwAMAAkAEAAJAAgADwAMAAgADgAJAAUACQAPAAUACwAHAAEABgAIAAEABAAGAP//AgAJAAAAAgAEAP7///8IAAIA//8GAAEAAQAJAAIA/v8EAAMA//8JAAEA/v8DAAMA/v8HAAMA/f8BAAUA/v8FAAMA/v8BAAcA//8DAAMA/v8BAAYA//8CAAMA/////wcAAAAAAAMAAAD//wYAAQD+/wMAAQD//wUAAQD+/wIAAgD//wQAAgD+/wEAAwD//wMAAwD+/wEAAwD//wIAAwD//wEABAAAAAEABAD//wAABAABAAAAAwAAAAAABAABAP//AwABAAAAAwACAP//AgACAAAAAwACAP//AgACAAAAAgACAAAAAQADAAAAAQACAAAAAQADAAAAAQACAAAAAAACAAEAAAACAAEAAAACAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAAAAAAAAAAAAAAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA//8AAP//AAACAAAA+f8BAAYA///4/wIA//8AAA8A/v/V/wEAEwA9AAEBRwA2AF7/kfog/3gBwv99CDYBU/qtAUX/AP7OAfkAX/o9B38FSfwaAuT14/60BAr8CQAI/tfyIQTzAXP+egdUBBwBof7TBMT8bAWi/5EEWwBRAAAKyfxE/8b88vp6ACP+PAF4/qD8MQNM/ygCJ/2XAPD9kP5gAVT/iP9I/lEB4P8qAD0BFAGa/+7/DgB2AOP98gFm/u/+Vv5/AG8ASP9gAM//qv9w//oAcv+2/jIBHgA7/6D/oAAGAKH/lADT/wAAggC8AAYAkP9yAEcAkf8BAOD/RAAr/zUANwDt/xQAJQAkAMT/zwA/AOH/xv9zAGsANQBTAIcALAAvACIATACy/xMADADg/xcAWABvAJL/7f9VAPb/EgDt/wcA4f8kAPP/5P+h/wgACQDy//r/LgAQAMn/8/9CAOX/5v/S/9//3P8pABYAuP/s/w8AFgDt/+3/7v/w/9j/5/8GAOf/2P/2//P//v8kABMAuf/m/xoADADZ/+r/3P8KAAUAKwDe/wsA3P8VAAAADgAfAB0ACAAMAF4AGgAhAPL/MwDz/0kABAAKAPX/LwAbAAkA9v/s/+3/8/8CABAAAADm//n/BQALAAUAAQDj//n/JQAVAPX/9v/+/wIAEQABAPP/8P/1/wAABgD6/+3/7//o//j/DAD8/+b/8P8IAAkABgD4//D/8P8UAAoAAwD4/wAA+f8OAAcAAAAFAPX/9v8TAAkA8v8EAPb/9/8dAA0A7/8CAPn/+f8SAAQA8/8CAOf/+v8DAAgA9P////H//P8IAAUA8//0/wIAAQAGAAgA9//7/wAA+/8EAP//+P/+////AgACAAsA8v/+/wIABQD7/wgA9v/7/wMABAD5/wAA/P/3/wEAAQD7//7//P/1/wQA///3//r////3/wMAAwD1//r/AwD6////AgD4//n/AwD8//7/AgD4//n/AwD+//3/AQD4//n/BQD///n/AAD6//j/BAABAPj/AAD9//v/AwADAPj//v/+//z/AwAEAPj//v8BAP7/AQADAPj//f8CAP////8EAPr//P8DAAAA/v8CAPv//P8DAAEA/f8BAP3//f8DAAIA/P8AAP7//f8DAAIA/P///wAA/f8BAAIA+//+/wEA//8AAAEA+//+/wEA/////wEA/P/+/wEA///+/wAA/f/9/wEAAAD9/wAA/f/+/wEAAQD8/////v/+/wAAAQD8////////////AQD9////AAD/////AAD+////AAAAAP//AAD///////8AAP//AAD//wAA//8AAP//"],vi=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wQA8/8ZAPr/DAD+/wMA/v8KAAQA/f8DAAMABADs//z/8v/z/8f/R/90/ob+//zAAWsDAwY3DKn9//tu93DvkwI6An4CuwJ0/BH7VPux92X0Gu7N/EX9mgfqCkkIiRMgBd4NQQGL/c0G/xBxAKELZATUA/sIHRSx+fkCyAUmBNEJIARlAdHz2AjNACcIsAW4AlECsvtJ/P/7K/tf++n8aP4W+g0FXAElAMn8nQHn/sT+Zv7N+9X2xvzM/O3+EvpqBBD7SQLd+vb/sPlw/JD72/3n+Rr+L/wS/vz6UQGg/Nf+Av5L/5X9Gv2//SP+mf3j/lf+v/2B/ZH/5P05/iL9MP9F/uf9UP4v/qv9mv7o/Xn+wP2k/8L+uP5J/tD+Dv/Y/bL+mP72/n3+pP+7/hAA+/5zAGH+Z/+u/g8Azv2y/6L+//9o/iIADP8VACz/CwCN/pb/1v4yAFP+wf+4/jsAcf5VAP3+bADa/nMA6f4sAOT+IQBd/v7/7v6aAIL+QADe/nEA0P4yAKz+CQCo/moAuf5xAN7+mAC8/jcANf9eAPX+IAA1/1kAAP9hAMz+PQD5/m0A2/4gAPr+UQDh/jQAEv9BAPH+FABN/zkASv9DADP/BABe/1IAGf8oAE3/RQAw/zIAQf8mADn/GgBE/xIAR/8hAD7/BABy/zEAKP/0/07/GwBX/z4ARf8mAFr/QQBV/zUAVP8eAFz/JABt/0EAUP8MAHz/KgBr/ycAYv8EAH3/MABl/x8Agv8bAIj/GgBv//z/ff8AAJX/IABu/+T/jv/r/4z/9/9n/77/pP8JAJD/EQCJ//r/q/8WAJ//GQCU/xYAtv8qAKr/PQCW/ysAwf8+ALb/OgC3/ygAz/8uAM7/OgDH/ygAz/8kAMz/OgC//xsA1f8qAMn/LwDN/xcA1f8oAMv/JQDR/xMAzf8bAM//HgDU/wUA2v8ZANL/EwDW/wEA1f8ZAMz/BwDX/wIA0v8SANT/BQDW/wMA0/8PANT/AADY/wIA1f8MANX/+f/a/wUA0v8IANf/+//Y/wUA0/8DANr/+f/Y/wQA1v8BANr/+f/Z/wUA1//8/9z/+v/Y/wYA2f/8/93//v/Y/wUA2v/9/93////Z/wUA3P/8/97/AgDa/wMA3v/8/97/AwDb/wIA3//9/97/BADd/wEA4f///9//BQDf/wAA4v8AAN//BQDf/wAA4/8CAN//BADh/wAA4/8DAOD/BADi////4/8DAOH/AwDk/wAA5P8FAOL/AgDl/wEA5P8FAOL/AQDl/wEA4/8EAOL/AQDj/wIA4P8DAN//AADg/wIA3v8CAOD/AADh/wEA4v8AAOP/AADm/wAA6P8AAOz/AADu/wAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////f/+//7///8AAP////8BAAEA/f8AAAEAAQAFAAUA9//6/x0A2f/9/xMA3P+jAE//of9HAKP//gCj/77/Z/vi/28D9/ywDJAJIvr6AsX0Xec4BhcGzf23DZP7yfZ6C1//nwBDBIHyYgob/Tf3sQ41ANoKRA/A+E7yffAa9gD5EQUBDMwMygiqAHMAqPqhAGUB2/gE+a78H/+4APT6DwIUAA0HNwMhBfL8E/90A5n7dP9cALIC+v5C/q0AOv9kAogBHv01/+3/qAQD/ub8T/4vAOUA5P6KATv+ywEYAeT+KP6i/3gCFP6h/hr/+P83ACL/VADn/8UARQJI/4MAu/8qAlj+wf4iAPb/LgFJ/8QAUABAAI4ABf+k/3X/YgFK/ij/j/9HADoAi/+WAA0BVwC/ACL/LACe//cARv9i/xgAUgA0ACj/FgBgAIj/5P9M/7z/zv8/AKz/gv8sAEQA6/+I/yYAawDL/7T/xf8qAOv/FQCu/5n/EgAyAO3/i/9LAE4A+//R//P/FgDe/8z/u/8DADIALAAZALL/TAA8ABwAo//1/xwA/P/L/z0A6P8jAN7/7v+a/zAAwf/7/3//KQAuACwA9v8RAGYAIwBNADgAKgASAF0ADgANACEAMQDH//H/LQACAB0Ay////x0APAABAAQA2v8iAAcAEgDE/+v/FQD+/+P/DAD1/97/6v/4//X/EwD4/+7/5P8cAA0ACQDH//7/CQAXAAEA/P/5//j/CwAWAAEABQD9//n/AQAWAB0A7v/k/wAACQAmAP//9/8AAPn/8/8aAO//6/8fAOv/5v8hAP//5/8PAOf/AAAGAPn/6v8JAAYABgABAOv/1//1//L/+P8DABcA6f/8/wMACgD7/xAA3v/2//z/DADu//z/5v/5/wEA/P/6//7/7v/x/wQABgD5/wAA8v/w/wkAEQD2//j/+v8EAAcAEAD3//v/+v8CAAAACQD3//v//v/9/wUADAD2//X/AgAHAAAABwD2//T/BgAKAP7/AQD4//r/BAAIAPn/AAD3//f/BQAHAPv//v/7//n/BQAJAPj/+v/9//7/AgAGAPj/+f8BAAEAAgAFAPn/+v8BAAIAAAAEAPn/+f8CAAQA/v8BAPr/+v8CAAQA/P////v//P8CAAQA+//+//3//f8CAAUA+v/9//////8AAAQA+v/8////AAD//wIA+//8/wAAAQD+/wEA+//8/wAAAgD9/////P/9/wEAAgD8//7//f/9/wAAAgD8//3//v/+////AQD8//z/////////AAD8//3///8AAP7/AAD9//7///8AAP7////+//////8AAP7////+////////////////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////v8AAP///////wAAAAAAAP7/AQABAAAABwD///X/BQAjAPL/CQDb/9D/GAAb/7sAYwCW/z0BcP/X/7T/2QDW+wH8yANCCCUJ5QT++UXmhPwhA78FuAxH+p78ifudBlAG9vmu/lAK2fdlB///cfjoCa0E7Akn9Yb/zvba+AkAHPywBGEBFwUNAL8AXAAGA20DFvmR/kz+F/06Ag/+GwHl/5EEKgJd/q0AP/ym/9n6EfxY/2H+/QFtAC4C6QBDAaMCo/20/+3/3f/p/fL9rv9V/6cBhQHuAX4AcwJYAaH/IP/P/gsApP0LAe7/sQBuAI0AAgGDAE4BzACe/5X//v+v/+f+Zf+gAOv/5QBhAOIApAANASYAuP+h/8b/HQBr/9//bACWAGEAFAB5AD0AWQDU/+D/Yf/p//D/s/+R/4QAMQBvABEAkQBfABQAJgDW/wwA8/8XALz/vf8zAFAAKwD1/zEAPwDJ/x0A7/8LAOX/FwDR//H/EQAdAO//6P8QAFEA2f8WABEAMgDy/xIA+f/s/xAALgDv////HQAvAPT/+f8iAAYAEgAFABoAGgD//w0A+f/0/xsAHgDx/9f/GAACAPH/8f8JAPf/GwALABEA7/8cAPT/CgD2//j/BQD8/+3/OgAgAAYA9f8PAN7/DgD9/9r/1//3/+3/9//1//b/8//5//f/AgAJAOf/+v8OAAMACwD9/+7/5f8eAAEA9//q//7/8P8WAP7/+//4/wIA+f8TAAIA9f/5/wcA+P8iAAgA9v/n/xoA//8gAAUABwDj/wAA9v8BAAUAFQDn/wMA7v8QABAAEQDm/wwA8f8aAAAABwDu/wcACgASAAEA7//w//f/BgARAAkA6P/3/wcADgAKAAYA4f/4/wYADgAAAPr/8P/9/xQACgAHAPn/7//9/xEAAgD+//L/8v/8/xUAAwDw//H/9f8CAAsA/v/q//L/+f8FAAYA/P/r//j///8GAAkA+//o//j/AQAIAP//+v/o//v/CAAIAPv/+P/w/wEACQAHAPj/+f/0/wIACwAFAPb/+f/4/wQACwACAPP/+f/+/wYACAD///L/+/8BAAYABQD9//P//P8FAAUAAgD7//T//f8HAAQA///7//f///8IAAMA/P/6//r/AQAIAAEA+v/6//3/AgAHAAAA+f/7/wAAAwAFAP7/+P/8/wIAAgACAP3/+f/9/wMAAwAAAPz/+v/+/wQAAgD+//z/+/8AAAQAAQD8//z//f8BAAQAAAD7//3///8BAAMA///7//3/AAACAAEA/v/7//7/AQABAAAA/v/9////AQAAAP///v/+////AAD/////////////////////////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD////////+//////8AAAAA/v/+/wAAAQD8//3/CQAJAP3/+v8PAAcApABlABkBkwCO/i//lfqa/HQAcf/3BdkCzwJcBCMC0wMN/9/9wgI7AaECYfxV/Tf83vhn/xrt8Owx/8n7cgHABYb43QcZDh4WugNrA7P74gHu/9z/zv0t/acCiQHY/iv4qQOl/ysCE/0//XT9Sf4O//j9xfupAn394gHO+rsCXAFIAxQC9wIXBgcD2AQuAnb/9gJh/6wAVfxEAI4Bvf7oAFv/bALsAMQBe/88/joAT/4dAH39/v9LAXn/gwDI//QBdABcAA0A7f4lAMn///+9/tv/iABp/13/pP/dALv/w/8MAHv//f+y/6////7U/5AAZP+Z/8r/nQDR/5r/DwDr/xAA4v+s/3z/+P9uAOv/t/82AGcAHgCb/yQAFQBGAM7/CgD3/xoAegAaAOz/CgBHAA8Adv8/AAAABQC2/xIAAAA7ABQAKgCj/z4AAQAXAJz/JAADAAcA8f/1/2AAAQAlAPD/NgDx/1wA7v/4/wMAZADv//3/HQAkAFoA8P9FAPv/FgBIAPf/WQAHAEUACQD0/xIAQwDu/wMAwP9VALn/XwCw/yEA5f8sAPj/FgDD/1YAyv8rAOX/HQDo//j/IQAQACAAHwD9/yQAHQBAABgABQAiAAUAKAD3/wkACwAKAAMABwAJAPb/+f8GAOr/JQAHABMA6P8TAA4AGgD//woA8/8ZAP//GADu/w0A9v8SAAMABwD4/wQA5P8XAAQACgDq/wUA+/8VAAcACADs/xIAAAATAPH/+v/1//T/7f///+z/+v/y/+//9/8KAAcACgAJAPT/BAAKAAAABgAIAPL/9v8KAAMABAACAPr/9v8OAAIA+P/x//v/+f8MAPb/+P/w/wQA9f8MAPn////7/woA/v8PAAEAAgD1/xAAAQAPAP//AwD//xQABwALAAAABgADABAAAgAHAAAACAABAA8ABQAFAAMABwAEAA4ABwADAAEACQAFAAoAAwD//wAACQADAAUAAQD/////CAABAAMAAAD/////BwACAAEAAAD/////BwACAP7///8BAAAABgABAP7///8CAAAABAAAAP7///8DAAAAAwAAAP3///8DAAAAAQAAAP3//v8EAAAAAAD+//////8EAP/////+/wAA/v8EAP/////+/wEA/v8EAP///v/+/wIA//8DAP///v/+/wIA//8BAP///v/+/wMA//8BAP/////+/wMA//8AAP//AAD+/wQA//8AAP7/AQD//wIA////////AQD//wIA////////AQAAAAEAAAAAAP//AQD//wEAAAAAAP//AQAAAAEAAAAAAAAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wAA+v8AAPz/AAD//wAA/f8AAAEAAAD+/wAACQAAAAQAAAAZAAAAtgAAAFsBAABW/gAAH/oAAGcBAABoBwAAlAAAAO3/AAARAQAA+wIAAEoEAACe/gAAiv4AALD0AADJ8wAAkQQAAF34AABi8QAAPQAAAAH2AAD19AAADAMAAJwGAACTEAAA0AwAAJkHAACOBwAAuQEAANcDAAC6AgAAHwUAAHEFAAB0AwAAbgEAADz+AADYAQAAGAAAAJwCAADgAAAA//0AAMn+AAAT/AAAwP8AAOn9AAAJAAAAewEAAOn+AACN/wAAOv0AAO3+AADN/gAAcP8AACj/AACq/gAA+f4AAML9AACa/wAA/f4AAN7/AABo/wAA6/4AAE//AAAC/wAAEQAAAHX/AAB0AAAA5f8AAEwAAAB3AAAA5/8AAMIAAABCAAAAzgAAAE8AAAB3AAAAKAAAADMAAACqAAAALwAAAK4AAAASAAAAVgAAACgAAAAtAAAATAAAAP3/AAA7AAAA2/8AACQAAADw/wAALQAAADEAAAAlAAAAbAAAADMAAABUAAAAEAAAACgAAAD1/wAA9v8AAPr/AADu/wAALgAAABIAAABUAAAARAAAAGUAAABGAAAAOAAAAGAAAAAuAAAARQAAACEAAAAfAAAAAAAAAAkAAAAQAAAAAwAAABIAAADs/wAAEAAAAAYAAAASAAAAIgAAABEAAAADAAAABAAAAA8AAAD4/wAAHQAAAAsAAAAIAAAADgAAAP//AAAcAAAADwAAAAYAAAASAAAAFwAAAAMAAAAYAAAAEgAAAPr/AAAQAAAADQAAAAoAAAD3/wAABgAAAPb/AADf/wAA/v8AAPL/AAD6/wAAFAAAAAQAAAAEAAAAGwAAAAEAAAAMAAAAIAAAAAIAAAAdAAAAGAAAAAIAAAAcAAAAEgAAAAcAAAAeAAAADwAAAAQAAAAeAAAABAAAAAYAAAAZAAAAAQAAAA4AAAATAAAA/v8AAAoAAAAOAAAA+/8AAAsAAAAJAAAA+f8AAAsAAAABAAAA+f8AAAoAAAD9/wAA+v8AAAcAAAD5/wAA+v8AAAUAAAD3/wAA/f8AAAQAAAD2/wAAAAAAAAEAAAD3/wAAAgAAAAAAAAD4/wAAAwAAAP7/AAD6/wAABAAAAP3/AAD8/wAABAAAAPv/AAD+/wAAAwAAAPv/AAD//wAAAQAAAPv/AAAAAAAAAAAAAPv/AAACAAAA//8AAPz/AAACAAAA/v8AAP3/AAACAAAA/f8AAP7/AAABAAAA/f8AAP//AAABAAAA/f8AAAAAAAAAAAAA/v8AAAEAAAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAAAAAA"],yi=[2,3];class wi{constructor(t,e){_(t)||S("HOARenderer: Invalid BaseAudioContext."),this._context=t,this._config={ambisonicOrder:3,renderingMode:E.AMBISONIC},e&&e.ambisonicOrder&&(yi.includes(e.ambisonicOrder)?this._config.ambisonicOrder=e.ambisonicOrder:D("HOARenderer: Invalid ambisonic order. (got "+e.ambisonicOrder+") Fallbacks to 3rd-order ambisonic.")),this._config.numberOfChannels=(this._config.ambisonicOrder+1)*(this._config.ambisonicOrder+1),this._config.numberOfStereoChannels=Math.ceil(this._config.numberOfChannels/2),e&&e.hrirPathList&&(Array.isArray(e.hrirPathList)&&e.hrirPathList.length===this._config.numberOfStereoChannels?this._config.pathList=e.hrirPathList:S("HOARenderer: Invalid HRIR URLs. It must be an array with "+this._config.numberOfStereoChannels+" URLs to HRIR files. (got "+e.hrirPathList+")")),e&&e.renderingMode&&(Object.values(E).includes(e.renderingMode)?this._config.renderingMode=e.renderingMode:D("HOARenderer: Invalid rendering mode. (got "+e.renderingMode+') Fallbacks to "ambisonic".')),this._buildAudioGraph()}_buildAudioGraph(){this.input=this._context.createGain(),this.output=this._context.createGain(),this._bypass=this._context.createGain(),this._hoaRotator=new fi(this._context,this._config.ambisonicOrder),this._hoaConvolver=new gi(this._context,this._config.ambisonicOrder),this.input.connect(this._hoaRotator.input),this.input.connect(this._bypass),this._hoaRotator.output.connect(this._hoaConvolver.input),this._hoaConvolver.output.connect(this.output),this.input.channelCount=this._config.numberOfChannels,this.input.channelCountMode="explicit",this.input.channelInterpretation="discrete"}dispose(){mode===E.BYPASS&&this._bypass.connect(this.output),this.input.disconnect(this._hoaRotator.input),this.input.disconnect(this._bypass),this._hoaRotator.output.disconnect(this._hoaConvolver.input),this._hoaConvolver.output.disconnect(this.output),this._hoaRotator.dispose(),this._hoaConvolver.dispose()}async initialize(){let t;D("HOARenderer: Initializing... (mode: "+this._config.renderingMode+", ambisonic order: "+this._config.ambisonicOrder+")"),t=this._config.pathList?new ci(this._context,this._config.pathList,{dataType:"url"}):2===this._config.ambisonicOrder?new ci(this._context,vi):new ci(this._context,mi);try{const e=await t.load();this._hoaConvolver.setHRIRBufferList(e),this.setRenderingMode(this._config.renderingMode),D("HOARenderer: HRIRs loaded successfully. Ready.")}catch(t){S("HOARenderer: HRIR loading/decoding failed. Reason: "+t.message)}}setRotationMatrix3(t){this._hoaRotator.setRotationMatrix3(t)}setRotationMatrix4(t){this._hoaRotator.setRotationMatrix4(t)}getRenderingMode(){return this._config.renderingMode}setRenderingMode(t){if(t!==this._config.renderingMode){switch(t){case E.AMBISONIC:this._hoaConvolver.enable(),this._bypass.disconnect();break;case E.BYPASS:this._hoaConvolver.disable(),this._bypass.connect(this.output);break;case E.OFF:this._hoaConvolver.disable(),this._bypass.disconnect();break;default:return void D('HOARenderer: Rendering mode "'+t+'" is not supported.')}this._config.renderingMode=t,D("HOARenderer: Rendering mode changed. ("+t+")")}}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const bi="1.4.2",xi=function(){const t=navigator.userAgent;let e,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];if(/trident/i.test(n[1]))return e=/\brv[ :]+(\d+)/g.exec(t)||[],{name:"IE",version:e[1]||""};if("Chrome"===n[1]&&(e=t.match(/\bOPR|Edge\/(\d+)/),null!=e))return{name:"Opera",version:e[1]};n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/([\d.]+)/i))&&n.splice(1,1,e[1]);let i=t.match(/android|ipad|iphone/i);return i||(i=t.match(/cros|linux|mac os x|windows/i)),{name:n[0],version:n[1],platform:i?i[0]:"unknown"}}();
/**
 * @license
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */D(`Version ${bi} (running ${xi.name} ${xi.version} on ${xi.platform})`),"safari"===xi.name.toLowerCase()&&(window.webkitAudioContext&&window.webkitOfflineAudioContext&&(window.AudioContext=window.webkitAudioContext,window.OfflineAudioContext=window.webkitOfflineAudioContext),D(xi.name+" detected. Polyfill applied."));const Ci=[[[0,0,0,1,1,1],[.052336,.034899,.017452,.999848,.999391,.99863],[.104528,.069756,.034899,.999391,.997564,.994522],[.156434,.104528,.052336,.99863,.994522,.987688],[.207912,.139173,.069756,.997564,.990268,.978148],[.258819,.173648,.087156,.996195,.984808,.965926],[.309017,.207912,.104528,.994522,.978148,.951057],[.358368,.241922,.121869,.992546,.970296,.93358],[.406737,.275637,.139173,.990268,.961262,.913545],[.45399,.309017,.156434,.987688,.951057,.891007],[.5,.34202,.173648,.984808,.939693,.866025],[.544639,.374607,.190809,.981627,.927184,.838671],[.587785,.406737,.207912,.978148,.913545,.809017],[.62932,.438371,.224951,.97437,.898794,.777146],[.669131,.469472,.241922,.970296,.882948,.743145],[.707107,.5,.258819,.965926,.866025,.707107],[.743145,.529919,.275637,.961262,.848048,.669131],[.777146,.559193,.292372,.956305,.829038,.62932],[.809017,.587785,.309017,.951057,.809017,.587785],[.838671,.615661,.325568,.945519,.788011,.544639],[.866025,.642788,.34202,.939693,.766044,.5],[.891007,.669131,.358368,.93358,.743145,.45399],[.913545,.694658,.374607,.927184,.71934,.406737],[.93358,.71934,.390731,.920505,.694658,.358368],[.951057,.743145,.406737,.913545,.669131,.309017],[.965926,.766044,.422618,.906308,.642788,.258819],[.978148,.788011,.438371,.898794,.615661,.207912],[.987688,.809017,.45399,.891007,.587785,.156434],[.994522,.829038,.469472,.882948,.559193,.104528],[.99863,.848048,.48481,.87462,.529919,.052336],[1,.866025,.5,.866025,.5,0],[.99863,.882948,.515038,.857167,.469472,-.052336],[.994522,.898794,.529919,.848048,.438371,-.104528],[.987688,.913545,.544639,.838671,.406737,-.156434],[.978148,.927184,.559193,.829038,.374607,-.207912],[.965926,.939693,.573576,.819152,.34202,-.258819],[.951057,.951057,.587785,.809017,.309017,-.309017],[.93358,.961262,.601815,.798636,.275637,-.358368],[.913545,.970296,.615661,.788011,.241922,-.406737],[.891007,.978148,.62932,.777146,.207912,-.45399],[.866025,.984808,.642788,.766044,.173648,-.5],[.838671,.990268,.656059,.75471,.139173,-.544639],[.809017,.994522,.669131,.743145,.104528,-.587785],[.777146,.997564,.681998,.731354,.069756,-.62932],[.743145,.999391,.694658,.71934,.034899,-.669131],[.707107,1,.707107,.707107,0,-.707107],[.669131,.999391,.71934,.694658,-.034899,-.743145],[.62932,.997564,.731354,.681998,-.069756,-.777146],[.587785,.994522,.743145,.669131,-.104528,-.809017],[.544639,.990268,.75471,.656059,-.139173,-.838671],[.5,.984808,.766044,.642788,-.173648,-.866025],[.45399,.978148,.777146,.62932,-.207912,-.891007],[.406737,.970296,.788011,.615661,-.241922,-.913545],[.358368,.961262,.798636,.601815,-.275637,-.93358],[.309017,.951057,.809017,.587785,-.309017,-.951057],[.258819,.939693,.819152,.573576,-.34202,-.965926],[.207912,.927184,.829038,.559193,-.374607,-.978148],[.156434,.913545,.838671,.544639,-.406737,-.987688],[.104528,.898794,.848048,.529919,-.438371,-.994522],[.052336,.882948,.857167,.515038,-.469472,-.99863],[0,.866025,.866025,.5,-.5,-1],[-.052336,.848048,.87462,.48481,-.529919,-.99863],[-.104528,.829038,.882948,.469472,-.559193,-.994522],[-.156434,.809017,.891007,.45399,-.587785,-.987688],[-.207912,.788011,.898794,.438371,-.615661,-.978148],[-.258819,.766044,.906308,.422618,-.642788,-.965926],[-.309017,.743145,.913545,.406737,-.669131,-.951057],[-.358368,.71934,.920505,.390731,-.694658,-.93358],[-.406737,.694658,.927184,.374607,-.71934,-.913545],[-.45399,.669131,.93358,.358368,-.743145,-.891007],[-.5,.642788,.939693,.34202,-.766044,-.866025],[-.544639,.615661,.945519,.325568,-.788011,-.838671],[-.587785,.587785,.951057,.309017,-.809017,-.809017],[-.62932,.559193,.956305,.292372,-.829038,-.777146],[-.669131,.529919,.961262,.275637,-.848048,-.743145],[-.707107,.5,.965926,.258819,-.866025,-.707107],[-.743145,.469472,.970296,.241922,-.882948,-.669131],[-.777146,.438371,.97437,.224951,-.898794,-.62932],[-.809017,.406737,.978148,.207912,-.913545,-.587785],[-.838671,.374607,.981627,.190809,-.927184,-.544639],[-.866025,.34202,.984808,.173648,-.939693,-.5],[-.891007,.309017,.987688,.156434,-.951057,-.45399],[-.913545,.275637,.990268,.139173,-.961262,-.406737],[-.93358,.241922,.992546,.121869,-.970296,-.358368],[-.951057,.207912,.994522,.104528,-.978148,-.309017],[-.965926,.173648,.996195,.087156,-.984808,-.258819],[-.978148,.139173,.997564,.069756,-.990268,-.207912],[-.987688,.104528,.99863,.052336,-.994522,-.156434],[-.994522,.069756,.999391,.034899,-.997564,-.104528],[-.99863,.034899,.999848,.017452,-.999391,-.052336],[-1,0,1,0,-1,-0],[-.99863,-.034899,.999848,-.017452,-.999391,.052336],[-.994522,-.069756,.999391,-.034899,-.997564,.104528],[-.987688,-.104528,.99863,-.052336,-.994522,.156434],[-.978148,-.139173,.997564,-.069756,-.990268,.207912],[-.965926,-.173648,.996195,-.087156,-.984808,.258819],[-.951057,-.207912,.994522,-.104528,-.978148,.309017],[-.93358,-.241922,.992546,-.121869,-.970296,.358368],[-.913545,-.275637,.990268,-.139173,-.961262,.406737],[-.891007,-.309017,.987688,-.156434,-.951057,.45399],[-.866025,-.34202,.984808,-.173648,-.939693,.5],[-.838671,-.374607,.981627,-.190809,-.927184,.544639],[-.809017,-.406737,.978148,-.207912,-.913545,.587785],[-.777146,-.438371,.97437,-.224951,-.898794,.62932],[-.743145,-.469472,.970296,-.241922,-.882948,.669131],[-.707107,-.5,.965926,-.258819,-.866025,.707107],[-.669131,-.529919,.961262,-.275637,-.848048,.743145],[-.62932,-.559193,.956305,-.292372,-.829038,.777146],[-.587785,-.587785,.951057,-.309017,-.809017,.809017],[-.544639,-.615661,.945519,-.325568,-.788011,.838671],[-.5,-.642788,.939693,-.34202,-.766044,.866025],[-.45399,-.669131,.93358,-.358368,-.743145,.891007],[-.406737,-.694658,.927184,-.374607,-.71934,.913545],[-.358368,-.71934,.920505,-.390731,-.694658,.93358],[-.309017,-.743145,.913545,-.406737,-.669131,.951057],[-.258819,-.766044,.906308,-.422618,-.642788,.965926],[-.207912,-.788011,.898794,-.438371,-.615661,.978148],[-.156434,-.809017,.891007,-.45399,-.587785,.987688],[-.104528,-.829038,.882948,-.469472,-.559193,.994522],[-.052336,-.848048,.87462,-.48481,-.529919,.99863],[-0,-.866025,.866025,-.5,-.5,1],[.052336,-.882948,.857167,-.515038,-.469472,.99863],[.104528,-.898794,.848048,-.529919,-.438371,.994522],[.156434,-.913545,.838671,-.544639,-.406737,.987688],[.207912,-.927184,.829038,-.559193,-.374607,.978148],[.258819,-.939693,.819152,-.573576,-.34202,.965926],[.309017,-.951057,.809017,-.587785,-.309017,.951057],[.358368,-.961262,.798636,-.601815,-.275637,.93358],[.406737,-.970296,.788011,-.615661,-.241922,.913545],[.45399,-.978148,.777146,-.62932,-.207912,.891007],[.5,-.984808,.766044,-.642788,-.173648,.866025],[.544639,-.990268,.75471,-.656059,-.139173,.838671],[.587785,-.994522,.743145,-.669131,-.104528,.809017],[.62932,-.997564,.731354,-.681998,-.069756,.777146],[.669131,-.999391,.71934,-.694658,-.034899,.743145],[.707107,-1,.707107,-.707107,-0,.707107],[.743145,-.999391,.694658,-.71934,.034899,.669131],[.777146,-.997564,.681998,-.731354,.069756,.62932],[.809017,-.994522,.669131,-.743145,.104528,.587785],[.838671,-.990268,.656059,-.75471,.139173,.544639],[.866025,-.984808,.642788,-.766044,.173648,.5],[.891007,-.978148,.62932,-.777146,.207912,.45399],[.913545,-.970296,.615661,-.788011,.241922,.406737],[.93358,-.961262,.601815,-.798636,.275637,.358368],[.951057,-.951057,.587785,-.809017,.309017,.309017],[.965926,-.939693,.573576,-.819152,.34202,.258819],[.978148,-.927184,.559193,-.829038,.374607,.207912],[.987688,-.913545,.544639,-.838671,.406737,.156434],[.994522,-.898794,.529919,-.848048,.438371,.104528],[.99863,-.882948,.515038,-.857167,.469472,.052336],[1,-.866025,.5,-.866025,.5,0],[.99863,-.848048,.48481,-.87462,.529919,-.052336],[.994522,-.829038,.469472,-.882948,.559193,-.104528],[.987688,-.809017,.45399,-.891007,.587785,-.156434],[.978148,-.788011,.438371,-.898794,.615661,-.207912],[.965926,-.766044,.422618,-.906308,.642788,-.258819],[.951057,-.743145,.406737,-.913545,.669131,-.309017],[.93358,-.71934,.390731,-.920505,.694658,-.358368],[.913545,-.694658,.374607,-.927184,.71934,-.406737],[.891007,-.669131,.358368,-.93358,.743145,-.45399],[.866025,-.642788,.34202,-.939693,.766044,-.5],[.838671,-.615661,.325568,-.945519,.788011,-.544639],[.809017,-.587785,.309017,-.951057,.809017,-.587785],[.777146,-.559193,.292372,-.956305,.829038,-.62932],[.743145,-.529919,.275637,-.961262,.848048,-.669131],[.707107,-.5,.258819,-.965926,.866025,-.707107],[.669131,-.469472,.241922,-.970296,.882948,-.743145],[.62932,-.438371,.224951,-.97437,.898794,-.777146],[.587785,-.406737,.207912,-.978148,.913545,-.809017],[.544639,-.374607,.190809,-.981627,.927184,-.838671],[.5,-.34202,.173648,-.984808,.939693,-.866025],[.45399,-.309017,.156434,-.987688,.951057,-.891007],[.406737,-.275637,.139173,-.990268,.961262,-.913545],[.358368,-.241922,.121869,-.992546,.970296,-.93358],[.309017,-.207912,.104528,-.994522,.978148,-.951057],[.258819,-.173648,.087156,-.996195,.984808,-.965926],[.207912,-.139173,.069756,-.997564,.990268,-.978148],[.156434,-.104528,.052336,-.99863,.994522,-.987688],[.104528,-.069756,.034899,-.999391,.997564,-.994522],[.052336,-.034899,.017452,-.999848,.999391,-.99863],[0,-0,0,-1,1,-1],[-.052336,.034899,-.017452,-.999848,.999391,-.99863],[-.104528,.069756,-.034899,-.999391,.997564,-.994522],[-.156434,.104528,-.052336,-.99863,.994522,-.987688],[-.207912,.139173,-.069756,-.997564,.990268,-.978148],[-.258819,.173648,-.087156,-.996195,.984808,-.965926],[-.309017,.207912,-.104528,-.994522,.978148,-.951057],[-.358368,.241922,-.121869,-.992546,.970296,-.93358],[-.406737,.275637,-.139173,-.990268,.961262,-.913545],[-.45399,.309017,-.156434,-.987688,.951057,-.891007],[-.5,.34202,-.173648,-.984808,.939693,-.866025],[-.544639,.374607,-.190809,-.981627,.927184,-.838671],[-.587785,.406737,-.207912,-.978148,.913545,-.809017],[-.62932,.438371,-.224951,-.97437,.898794,-.777146],[-.669131,.469472,-.241922,-.970296,.882948,-.743145],[-.707107,.5,-.258819,-.965926,.866025,-.707107],[-.743145,.529919,-.275637,-.961262,.848048,-.669131],[-.777146,.559193,-.292372,-.956305,.829038,-.62932],[-.809017,.587785,-.309017,-.951057,.809017,-.587785],[-.838671,.615661,-.325568,-.945519,.788011,-.544639],[-.866025,.642788,-.34202,-.939693,.766044,-.5],[-.891007,.669131,-.358368,-.93358,.743145,-.45399],[-.913545,.694658,-.374607,-.927184,.71934,-.406737],[-.93358,.71934,-.390731,-.920505,.694658,-.358368],[-.951057,.743145,-.406737,-.913545,.669131,-.309017],[-.965926,.766044,-.422618,-.906308,.642788,-.258819],[-.978148,.788011,-.438371,-.898794,.615661,-.207912],[-.987688,.809017,-.45399,-.891007,.587785,-.156434],[-.994522,.829038,-.469472,-.882948,.559193,-.104528],[-.99863,.848048,-.48481,-.87462,.529919,-.052336],[-1,.866025,-.5,-.866025,.5,0],[-.99863,.882948,-.515038,-.857167,.469472,.052336],[-.994522,.898794,-.529919,-.848048,.438371,.104528],[-.987688,.913545,-.544639,-.838671,.406737,.156434],[-.978148,.927184,-.559193,-.829038,.374607,.207912],[-.965926,.939693,-.573576,-.819152,.34202,.258819],[-.951057,.951057,-.587785,-.809017,.309017,.309017],[-.93358,.961262,-.601815,-.798636,.275637,.358368],[-.913545,.970296,-.615661,-.788011,.241922,.406737],[-.891007,.978148,-.62932,-.777146,.207912,.45399],[-.866025,.984808,-.642788,-.766044,.173648,.5],[-.838671,.990268,-.656059,-.75471,.139173,.544639],[-.809017,.994522,-.669131,-.743145,.104528,.587785],[-.777146,.997564,-.681998,-.731354,.069756,.62932],[-.743145,.999391,-.694658,-.71934,.034899,.669131],[-.707107,1,-.707107,-.707107,0,.707107],[-.669131,.999391,-.71934,-.694658,-.034899,.743145],[-.62932,.997564,-.731354,-.681998,-.069756,.777146],[-.587785,.994522,-.743145,-.669131,-.104528,.809017],[-.544639,.990268,-.75471,-.656059,-.139173,.838671],[-.5,.984808,-.766044,-.642788,-.173648,.866025],[-.45399,.978148,-.777146,-.62932,-.207912,.891007],[-.406737,.970296,-.788011,-.615661,-.241922,.913545],[-.358368,.961262,-.798636,-.601815,-.275637,.93358],[-.309017,.951057,-.809017,-.587785,-.309017,.951057],[-.258819,.939693,-.819152,-.573576,-.34202,.965926],[-.207912,.927184,-.829038,-.559193,-.374607,.978148],[-.156434,.913545,-.838671,-.544639,-.406737,.987688],[-.104528,.898794,-.848048,-.529919,-.438371,.994522],[-.052336,.882948,-.857167,-.515038,-.469472,.99863],[-0,.866025,-.866025,-.5,-.5,1],[.052336,.848048,-.87462,-.48481,-.529919,.99863],[.104528,.829038,-.882948,-.469472,-.559193,.994522],[.156434,.809017,-.891007,-.45399,-.587785,.987688],[.207912,.788011,-.898794,-.438371,-.615661,.978148],[.258819,.766044,-.906308,-.422618,-.642788,.965926],[.309017,.743145,-.913545,-.406737,-.669131,.951057],[.358368,.71934,-.920505,-.390731,-.694658,.93358],[.406737,.694658,-.927184,-.374607,-.71934,.913545],[.45399,.669131,-.93358,-.358368,-.743145,.891007],[.5,.642788,-.939693,-.34202,-.766044,.866025],[.544639,.615661,-.945519,-.325568,-.788011,.838671],[.587785,.587785,-.951057,-.309017,-.809017,.809017],[.62932,.559193,-.956305,-.292372,-.829038,.777146],[.669131,.529919,-.961262,-.275637,-.848048,.743145],[.707107,.5,-.965926,-.258819,-.866025,.707107],[.743145,.469472,-.970296,-.241922,-.882948,.669131],[.777146,.438371,-.97437,-.224951,-.898794,.62932],[.809017,.406737,-.978148,-.207912,-.913545,.587785],[.838671,.374607,-.981627,-.190809,-.927184,.544639],[.866025,.34202,-.984808,-.173648,-.939693,.5],[.891007,.309017,-.987688,-.156434,-.951057,.45399],[.913545,.275637,-.990268,-.139173,-.961262,.406737],[.93358,.241922,-.992546,-.121869,-.970296,.358368],[.951057,.207912,-.994522,-.104528,-.978148,.309017],[.965926,.173648,-.996195,-.087156,-.984808,.258819],[.978148,.139173,-.997564,-.069756,-.990268,.207912],[.987688,.104528,-.99863,-.052336,-.994522,.156434],[.994522,.069756,-.999391,-.034899,-.997564,.104528],[.99863,.034899,-.999848,-.017452,-.999391,.052336],[1,0,-1,-0,-1,0],[.99863,-.034899,-.999848,.017452,-.999391,-.052336],[.994522,-.069756,-.999391,.034899,-.997564,-.104528],[.987688,-.104528,-.99863,.052336,-.994522,-.156434],[.978148,-.139173,-.997564,.069756,-.990268,-.207912],[.965926,-.173648,-.996195,.087156,-.984808,-.258819],[.951057,-.207912,-.994522,.104528,-.978148,-.309017],[.93358,-.241922,-.992546,.121869,-.970296,-.358368],[.913545,-.275637,-.990268,.139173,-.961262,-.406737],[.891007,-.309017,-.987688,.156434,-.951057,-.45399],[.866025,-.34202,-.984808,.173648,-.939693,-.5],[.838671,-.374607,-.981627,.190809,-.927184,-.544639],[.809017,-.406737,-.978148,.207912,-.913545,-.587785],[.777146,-.438371,-.97437,.224951,-.898794,-.62932],[.743145,-.469472,-.970296,.241922,-.882948,-.669131],[.707107,-.5,-.965926,.258819,-.866025,-.707107],[.669131,-.529919,-.961262,.275637,-.848048,-.743145],[.62932,-.559193,-.956305,.292372,-.829038,-.777146],[.587785,-.587785,-.951057,.309017,-.809017,-.809017],[.544639,-.615661,-.945519,.325568,-.788011,-.838671],[.5,-.642788,-.939693,.34202,-.766044,-.866025],[.45399,-.669131,-.93358,.358368,-.743145,-.891007],[.406737,-.694658,-.927184,.374607,-.71934,-.913545],[.358368,-.71934,-.920505,.390731,-.694658,-.93358],[.309017,-.743145,-.913545,.406737,-.669131,-.951057],[.258819,-.766044,-.906308,.422618,-.642788,-.965926],[.207912,-.788011,-.898794,.438371,-.615661,-.978148],[.156434,-.809017,-.891007,.45399,-.587785,-.987688],[.104528,-.829038,-.882948,.469472,-.559193,-.994522],[.052336,-.848048,-.87462,.48481,-.529919,-.99863],[0,-.866025,-.866025,.5,-.5,-1],[-.052336,-.882948,-.857167,.515038,-.469472,-.99863],[-.104528,-.898794,-.848048,.529919,-.438371,-.994522],[-.156434,-.913545,-.838671,.544639,-.406737,-.987688],[-.207912,-.927184,-.829038,.559193,-.374607,-.978148],[-.258819,-.939693,-.819152,.573576,-.34202,-.965926],[-.309017,-.951057,-.809017,.587785,-.309017,-.951057],[-.358368,-.961262,-.798636,.601815,-.275637,-.93358],[-.406737,-.970296,-.788011,.615661,-.241922,-.913545],[-.45399,-.978148,-.777146,.62932,-.207912,-.891007],[-.5,-.984808,-.766044,.642788,-.173648,-.866025],[-.544639,-.990268,-.75471,.656059,-.139173,-.838671],[-.587785,-.994522,-.743145,.669131,-.104528,-.809017],[-.62932,-.997564,-.731354,.681998,-.069756,-.777146],[-.669131,-.999391,-.71934,.694658,-.034899,-.743145],[-.707107,-1,-.707107,.707107,-0,-.707107],[-.743145,-.999391,-.694658,.71934,.034899,-.669131],[-.777146,-.997564,-.681998,.731354,.069756,-.62932],[-.809017,-.994522,-.669131,.743145,.104528,-.587785],[-.838671,-.990268,-.656059,.75471,.139173,-.544639],[-.866025,-.984808,-.642788,.766044,.173648,-.5],[-.891007,-.978148,-.62932,.777146,.207912,-.45399],[-.913545,-.970296,-.615661,.788011,.241922,-.406737],[-.93358,-.961262,-.601815,.798636,.275637,-.358368],[-.951057,-.951057,-.587785,.809017,.309017,-.309017],[-.965926,-.939693,-.573576,.819152,.34202,-.258819],[-.978148,-.927184,-.559193,.829038,.374607,-.207912],[-.987688,-.913545,-.544639,.838671,.406737,-.156434],[-.994522,-.898794,-.529919,.848048,.438371,-.104528],[-.99863,-.882948,-.515038,.857167,.469472,-.052336],[-1,-.866025,-.5,.866025,.5,-0],[-.99863,-.848048,-.48481,.87462,.529919,.052336],[-.994522,-.829038,-.469472,.882948,.559193,.104528],[-.987688,-.809017,-.45399,.891007,.587785,.156434],[-.978148,-.788011,-.438371,.898794,.615661,.207912],[-.965926,-.766044,-.422618,.906308,.642788,.258819],[-.951057,-.743145,-.406737,.913545,.669131,.309017],[-.93358,-.71934,-.390731,.920505,.694658,.358368],[-.913545,-.694658,-.374607,.927184,.71934,.406737],[-.891007,-.669131,-.358368,.93358,.743145,.45399],[-.866025,-.642788,-.34202,.939693,.766044,.5],[-.838671,-.615661,-.325568,.945519,.788011,.544639],[-.809017,-.587785,-.309017,.951057,.809017,.587785],[-.777146,-.559193,-.292372,.956305,.829038,.62932],[-.743145,-.529919,-.275637,.961262,.848048,.669131],[-.707107,-.5,-.258819,.965926,.866025,.707107],[-.669131,-.469472,-.241922,.970296,.882948,.743145],[-.62932,-.438371,-.224951,.97437,.898794,.777146],[-.587785,-.406737,-.207912,.978148,.913545,.809017],[-.544639,-.374607,-.190809,.981627,.927184,.838671],[-.5,-.34202,-.173648,.984808,.939693,.866025],[-.45399,-.309017,-.156434,.987688,.951057,.891007],[-.406737,-.275637,-.139173,.990268,.961262,.913545],[-.358368,-.241922,-.121869,.992546,.970296,.93358],[-.309017,-.207912,-.104528,.994522,.978148,.951057],[-.258819,-.173648,-.087156,.996195,.984808,.965926],[-.207912,-.139173,-.069756,.997564,.990268,.978148],[-.156434,-.104528,-.052336,.99863,.994522,.987688],[-.104528,-.069756,-.034899,.999391,.997564,.994522],[-.052336,-.034899,-.017452,.999848,.999391,.99863]],[[-1,-0,1,-0,0,-1,-0,0,-0],[-.999848,.017452,.999543,-.030224,264e-6,-.999086,.042733,-59e-5,4e-6],[-.999391,.034899,.998173,-.060411,.001055,-.996348,.085356,-.002357,34e-6],[-.99863,.052336,.995891,-.090524,.002372,-.991791,.127757,-.005297,113e-6],[-.997564,.069756,.992701,-.120527,.004214,-.985429,.169828,-.0094,268e-6],[-.996195,.087156,.988606,-.150384,.006578,-.977277,.21146,-.014654,523e-6],[-.994522,.104528,.983611,-.180057,.009462,-.967356,.252544,-.021043,903e-6],[-.992546,.121869,.977722,-.209511,.012862,-.955693,.292976,-.028547,.001431],[-.990268,.139173,.970946,-.238709,.016774,-.942316,.332649,-.037143,.002131],[-.987688,.156434,.963292,-.267617,.021193,-.927262,.371463,-.046806,.003026],[-.984808,.173648,.954769,-.296198,.026114,-.910569,.409317,-.057505,.00414],[-.981627,.190809,.945388,-.324419,.03153,-.892279,.446114,-.069209,.005492],[-.978148,.207912,.935159,-.352244,.037436,-.872441,.481759,-.08188,.007105],[-.97437,.224951,.924096,-.379641,.043823,-.851105,.516162,-.095481,.008999],[-.970296,.241922,.912211,-.406574,.050685,-.828326,.549233,-.109969,.011193],[-.965926,.258819,.899519,-.433013,.058013,-.804164,.580889,-.1253,.013707],[-.961262,.275637,.886036,-.458924,.065797,-.77868,.61105,-.141427,.016556],[-.956305,.292372,.871778,-.484275,.074029,-.75194,.639639,-.158301,.019758],[-.951057,.309017,.856763,-.509037,.082698,-.724012,.666583,-.175868,.023329],[-.945519,.325568,.841008,-.533178,.091794,-.694969,.691816,-.194075,.027281],[-.939693,.34202,.824533,-.55667,.101306,-.664885,.715274,-.212865,.03163],[-.93358,.358368,.807359,-.579484,.111222,-.633837,.736898,-.23218,.036385],[-.927184,.374607,.789505,-.601592,.121529,-.601904,.756637,-.25196,.041559],[-.920505,.390731,.770994,-.622967,.132217,-.569169,.774442,-.272143,.04716],[-.913545,.406737,.751848,-.643582,.143271,-.535715,.79027,-.292666,.053196],[-.906308,.422618,.732091,-.663414,.154678,-.501627,.804083,-.313464,.059674],[-.898794,.438371,.711746,-.682437,.166423,-.466993,.81585,-.334472,.066599],[-.891007,.45399,.690839,-.700629,.178494,-.431899,.825544,-.355623,.073974],[-.882948,.469472,.669395,-.717968,.190875,-.396436,.833145,-.376851,.081803],[-.87462,.48481,.647439,-.734431,.203551,-.360692,.838638,-.398086,.090085],[-.866025,.5,.625,-.75,.216506,-.32476,.842012,-.419263,.098821],[-.857167,.515038,.602104,-.764655,.229726,-.288728,.843265,-.440311,.108009],[-.848048,.529919,.578778,-.778378,.243192,-.252688,.842399,-.461164,.117644],[-.838671,.544639,.555052,-.791154,.256891,-.21673,.839422,-.481753,.127722],[-.829038,.559193,.530955,-.802965,.270803,-.180944,.834347,-.502011,.138237],[-.819152,.573576,.506515,-.813798,.284914,-.14542,.827194,-.521871,.149181],[-.809017,.587785,.481763,-.823639,.299204,-.110246,.817987,-.541266,.160545],[-.798636,.601815,.456728,-.832477,.313658,-.075508,.806757,-.560132,.172317],[-.788011,.615661,.431441,-.840301,.328257,-.041294,.793541,-.578405,.184487],[-.777146,.62932,.405934,-.847101,.342984,-.007686,.778379,-.596021,.19704],[-.766044,.642788,.380236,-.852869,.357821,.025233,.761319,-.612921,.209963],[-.75471,.656059,.35438,-.857597,.372749,.057383,.742412,-.629044,.223238],[-.743145,.669131,.328396,-.861281,.387751,.088686,.721714,-.644334,.23685],[-.731354,.681998,.302317,-.863916,.402807,.119068,.699288,-.658734,.250778],[-.71934,.694658,.276175,-.865498,.417901,.148454,.675199,-.67219,.265005],[-.707107,.707107,.25,-.866025,.433013,.176777,.649519,-.684653,.279508],[-.694658,.71934,.223825,-.865498,.448125,.203969,.622322,-.696073,.294267],[-.681998,.731354,.197683,-.863916,.463218,.229967,.593688,-.706405,.309259],[-.669131,.743145,.171604,-.861281,.478275,.254712,.5637,-.715605,.324459],[-.656059,.75471,.14562,-.857597,.493276,.278147,.532443,-.723633,.339844],[-.642788,.766044,.119764,-.852869,.508205,.300221,.500009,-.730451,.355387],[-.62932,.777146,.094066,-.847101,.523041,.320884,.46649,-.736025,.371063],[-.615661,.788011,.068559,-.840301,.537768,.340093,.431982,-.740324,.386845],[-.601815,.798636,.043272,-.832477,.552367,.357807,.396584,-.74332,.402704],[-.587785,.809017,.018237,-.823639,.566821,.373991,.360397,-.744989,.418613],[-.573576,.819152,-.006515,-.813798,.581112,.388612,.323524,-.745308,.434544],[-.559193,.829038,-.030955,-.802965,.595222,.401645,.286069,-.744262,.450467],[-.544639,.838671,-.055052,-.791154,.609135,.413066,.24814,-.741835,.466352],[-.529919,.848048,-.078778,-.778378,.622833,.422856,.209843,-.738017,.482171],[-.515038,.857167,-.102104,-.764655,.6363,.431004,.171288,-.732801,.497894],[-.5,.866025,-.125,-.75,.649519,.4375,.132583,-.726184,.51349],[-.48481,.87462,-.147439,-.734431,.662474,.44234,.093837,-.718167,.528929],[-.469472,.882948,-.169395,-.717968,.67515,.445524,.05516,-.708753,.544183],[-.45399,.891007,-.190839,-.700629,.687531,.447059,.016662,-.69795,.55922],[-.438371,.898794,-.211746,-.682437,.699602,.446953,-.02155,-.685769,.574011],[-.422618,.906308,-.232091,-.663414,.711348,.445222,-.059368,-.672226,.588528],[-.406737,.913545,-.251848,-.643582,.722755,.441884,-.096684,-.657339,.602741],[-.390731,.920505,-.270994,-.622967,.733809,.436964,-.133395,-.64113,.616621],[-.374607,.927184,-.289505,-.601592,.744496,.430488,-.169397,-.623624,.630141],[-.358368,.93358,-.307359,-.579484,.754804,.422491,-.204589,-.604851,.643273],[-.34202,.939693,-.324533,-.55667,.76472,.413008,-.238872,-.584843,.65599],[-.325568,.945519,-.341008,-.533178,.774231,.402081,-.27215,-.563635,.668267],[-.309017,.951057,-.356763,-.509037,.783327,.389754,-.304329,-.541266,.680078],[-.292372,.956305,-.371778,-.484275,.791997,.376077,-.335319,-.517778,.691399],[-.275637,.961262,-.386036,-.458924,.800228,.361102,-.365034,-.493216,.702207],[-.258819,.965926,-.399519,-.433013,.808013,.344885,-.393389,-.467627,.712478],[-.241922,.970296,-.412211,-.406574,.81534,.327486,-.420306,-.441061,.722191],[-.224951,.97437,-.424096,-.379641,.822202,.308969,-.445709,-.413572,.731327],[-.207912,.978148,-.435159,-.352244,.828589,.289399,-.469527,-.385215,.739866],[-.190809,.981627,-.445388,-.324419,.834495,.268846,-.491693,-.356047,.74779],[-.173648,.984808,-.454769,-.296198,.839912,.247382,-.512145,-.326129,.755082],[-.156434,.987688,-.463292,-.267617,.844832,.225081,-.530827,-.295521,.761728],[-.139173,.990268,-.470946,-.238709,.849251,.20202,-.547684,-.264287,.767712],[-.121869,.992546,-.477722,-.209511,.853163,.178279,-.562672,-.232494,.773023],[-.104528,.994522,-.483611,-.180057,.856563,.153937,-.575747,-.200207,.777648],[-.087156,.996195,-.488606,-.150384,.859447,.129078,-.586872,-.167494,.781579],[-.069756,.997564,-.492701,-.120527,.861811,.103786,-.596018,-.134426,.784806],[-.052336,.99863,-.495891,-.090524,.863653,.078146,-.603158,-.101071,.787324],[-.034899,.999391,-.498173,-.060411,.864971,.052243,-.608272,-.0675,.789126],[-.017452,.999848,-.499543,-.030224,.865762,.026165,-.611347,-.033786,.790208],[0,1,-.5,0,.866025,-0,-.612372,0,.790569],[.017452,.999848,-.499543,.030224,.865762,-.026165,-.611347,.033786,.790208],[.034899,.999391,-.498173,.060411,.864971,-.052243,-.608272,.0675,.789126],[.052336,.99863,-.495891,.090524,.863653,-.078146,-.603158,.101071,.787324],[.069756,.997564,-.492701,.120527,.861811,-.103786,-.596018,.134426,.784806],[.087156,.996195,-.488606,.150384,.859447,-.129078,-.586872,.167494,.781579],[.104528,.994522,-.483611,.180057,.856563,-.153937,-.575747,.200207,.777648],[.121869,.992546,-.477722,.209511,.853163,-.178279,-.562672,.232494,.773023],[.139173,.990268,-.470946,.238709,.849251,-.20202,-.547684,.264287,.767712],[.156434,.987688,-.463292,.267617,.844832,-.225081,-.530827,.295521,.761728],[.173648,.984808,-.454769,.296198,.839912,-.247382,-.512145,.326129,.755082],[.190809,.981627,-.445388,.324419,.834495,-.268846,-.491693,.356047,.74779],[.207912,.978148,-.435159,.352244,.828589,-.289399,-.469527,.385215,.739866],[.224951,.97437,-.424096,.379641,.822202,-.308969,-.445709,.413572,.731327],[.241922,.970296,-.412211,.406574,.81534,-.327486,-.420306,.441061,.722191],[.258819,.965926,-.399519,.433013,.808013,-.344885,-.393389,.467627,.712478],[.275637,.961262,-.386036,.458924,.800228,-.361102,-.365034,.493216,.702207],[.292372,.956305,-.371778,.484275,.791997,-.376077,-.335319,.517778,.691399],[.309017,.951057,-.356763,.509037,.783327,-.389754,-.304329,.541266,.680078],[.325568,.945519,-.341008,.533178,.774231,-.402081,-.27215,.563635,.668267],[.34202,.939693,-.324533,.55667,.76472,-.413008,-.238872,.584843,.65599],[.358368,.93358,-.307359,.579484,.754804,-.422491,-.204589,.604851,.643273],[.374607,.927184,-.289505,.601592,.744496,-.430488,-.169397,.623624,.630141],[.390731,.920505,-.270994,.622967,.733809,-.436964,-.133395,.64113,.616621],[.406737,.913545,-.251848,.643582,.722755,-.441884,-.096684,.657339,.602741],[.422618,.906308,-.232091,.663414,.711348,-.445222,-.059368,.672226,.588528],[.438371,.898794,-.211746,.682437,.699602,-.446953,-.02155,.685769,.574011],[.45399,.891007,-.190839,.700629,.687531,-.447059,.016662,.69795,.55922],[.469472,.882948,-.169395,.717968,.67515,-.445524,.05516,.708753,.544183],[.48481,.87462,-.147439,.734431,.662474,-.44234,.093837,.718167,.528929],[.5,.866025,-.125,.75,.649519,-.4375,.132583,.726184,.51349],[.515038,.857167,-.102104,.764655,.6363,-.431004,.171288,.732801,.497894],[.529919,.848048,-.078778,.778378,.622833,-.422856,.209843,.738017,.482171],[.544639,.838671,-.055052,.791154,.609135,-.413066,.24814,.741835,.466352],[.559193,.829038,-.030955,.802965,.595222,-.401645,.286069,.744262,.450467],[.573576,.819152,-.006515,.813798,.581112,-.388612,.323524,.745308,.434544],[.587785,.809017,.018237,.823639,.566821,-.373991,.360397,.744989,.418613],[.601815,.798636,.043272,.832477,.552367,-.357807,.396584,.74332,.402704],[.615661,.788011,.068559,.840301,.537768,-.340093,.431982,.740324,.386845],[.62932,.777146,.094066,.847101,.523041,-.320884,.46649,.736025,.371063],[.642788,.766044,.119764,.852869,.508205,-.300221,.500009,.730451,.355387],[.656059,.75471,.14562,.857597,.493276,-.278147,.532443,.723633,.339844],[.669131,.743145,.171604,.861281,.478275,-.254712,.5637,.715605,.324459],[.681998,.731354,.197683,.863916,.463218,-.229967,.593688,.706405,.309259],[.694658,.71934,.223825,.865498,.448125,-.203969,.622322,.696073,.294267],[.707107,.707107,.25,.866025,.433013,-.176777,.649519,.684653,.279508],[.71934,.694658,.276175,.865498,.417901,-.148454,.675199,.67219,.265005],[.731354,.681998,.302317,.863916,.402807,-.119068,.699288,.658734,.250778],[.743145,.669131,.328396,.861281,.387751,-.088686,.721714,.644334,.23685],[.75471,.656059,.35438,.857597,.372749,-.057383,.742412,.629044,.223238],[.766044,.642788,.380236,.852869,.357821,-.025233,.761319,.612921,.209963],[.777146,.62932,.405934,.847101,.342984,.007686,.778379,.596021,.19704],[.788011,.615661,.431441,.840301,.328257,.041294,.793541,.578405,.184487],[.798636,.601815,.456728,.832477,.313658,.075508,.806757,.560132,.172317],[.809017,.587785,.481763,.823639,.299204,.110246,.817987,.541266,.160545],[.819152,.573576,.506515,.813798,.284914,.14542,.827194,.521871,.149181],[.829038,.559193,.530955,.802965,.270803,.180944,.834347,.502011,.138237],[.838671,.544639,.555052,.791154,.256891,.21673,.839422,.481753,.127722],[.848048,.529919,.578778,.778378,.243192,.252688,.842399,.461164,.117644],[.857167,.515038,.602104,.764655,.229726,.288728,.843265,.440311,.108009],[.866025,.5,.625,.75,.216506,.32476,.842012,.419263,.098821],[.87462,.48481,.647439,.734431,.203551,.360692,.838638,.398086,.090085],[.882948,.469472,.669395,.717968,.190875,.396436,.833145,.376851,.081803],[.891007,.45399,.690839,.700629,.178494,.431899,.825544,.355623,.073974],[.898794,.438371,.711746,.682437,.166423,.466993,.81585,.334472,.066599],[.906308,.422618,.732091,.663414,.154678,.501627,.804083,.313464,.059674],[.913545,.406737,.751848,.643582,.143271,.535715,.79027,.292666,.053196],[.920505,.390731,.770994,.622967,.132217,.569169,.774442,.272143,.04716],[.927184,.374607,.789505,.601592,.121529,.601904,.756637,.25196,.041559],[.93358,.358368,.807359,.579484,.111222,.633837,.736898,.23218,.036385],[.939693,.34202,.824533,.55667,.101306,.664885,.715274,.212865,.03163],[.945519,.325568,.841008,.533178,.091794,.694969,.691816,.194075,.027281],[.951057,.309017,.856763,.509037,.082698,.724012,.666583,.175868,.023329],[.956305,.292372,.871778,.484275,.074029,.75194,.639639,.158301,.019758],[.961262,.275637,.886036,.458924,.065797,.77868,.61105,.141427,.016556],[.965926,.258819,.899519,.433013,.058013,.804164,.580889,.1253,.013707],[.970296,.241922,.912211,.406574,.050685,.828326,.549233,.109969,.011193],[.97437,.224951,.924096,.379641,.043823,.851105,.516162,.095481,.008999],[.978148,.207912,.935159,.352244,.037436,.872441,.481759,.08188,.007105],[.981627,.190809,.945388,.324419,.03153,.892279,.446114,.069209,.005492],[.984808,.173648,.954769,.296198,.026114,.910569,.409317,.057505,.00414],[.987688,.156434,.963292,.267617,.021193,.927262,.371463,.046806,.003026],[.990268,.139173,.970946,.238709,.016774,.942316,.332649,.037143,.002131],[.992546,.121869,.977722,.209511,.012862,.955693,.292976,.028547,.001431],[.994522,.104528,.983611,.180057,.009462,.967356,.252544,.021043,903e-6],[.996195,.087156,.988606,.150384,.006578,.977277,.21146,.014654,523e-6],[.997564,.069756,.992701,.120527,.004214,.985429,.169828,.0094,268e-6],[.99863,.052336,.995891,.090524,.002372,.991791,.127757,.005297,113e-6],[.999391,.034899,.998173,.060411,.001055,.996348,.085356,.002357,34e-6],[.999848,.017452,.999543,.030224,264e-6,.999086,.042733,59e-5,4e-6],[1,-0,1,-0,0,1,-0,0,-0]]],Di=(Ci[0].length,Ci[1].length,Ci[0][0].length/2),Si=[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1.003236,1.002156,.999152,.990038],[1.03237,1.021194,.990433,.898572],[1.062694,1.040231,.979161,.799806],[1.093999,1.058954,.964976,.693603],[1.126003,1.077006,.947526,.57989],[1.158345,1.093982,.926474,.45869],[1.19059,1.109437,.901512,.330158],[1.222228,1.12289,.87237,.194621],[1.252684,1.133837,.838839,.052614],[1.281987,1.142358,.801199,0],[1.312073,1.150207,.760839,0],[1.343011,1.157424,.717799,0],[1.374649,1.163859,.671999,0],[1.406809,1.169354,.623371,0],[1.439286,1.173739,.571868,0],[1.471846,1.176837,.517465,0],[1.504226,1.178465,.460174,0],[1.536133,1.178438,.400043,0],[1.567253,1.176573,.337165,0],[1.597247,1.172695,.271688,0],[1.625766,1.166645,.203815,0],[1.652455,1.158285,.133806,0],[1.676966,1.147506,.061983,0],[1.699006,1.134261,0,0],[1.720224,1.119789,0,0],[1.741631,1.10481,0,0],[1.763183,1.08933,0,0],[1.784837,1.073356,0,0],[1.806548,1.056898,0,0],[1.828269,1.039968,0,0],[1.849952,1.02258,0,0],[1.871552,1.004752,0,0],[1.893018,.986504,0,0],[1.914305,.967857,0,0],[1.935366,.948837,0,0],[1.956154,.929471,0,0],[1.976625,.90979,0,0],[1.996736,.889823,0,0],[2.016448,.869607,0,0],[2.035721,.849175,0,0],[2.054522,.828565,0,0],[2.072818,.807816,0,0],[2.090581,.786964,0,0],[2.107785,.766051,0,0],[2.124411,.745115,0,0],[2.140439,.724196,0,0],[2.155856,.703332,0,0],[2.170653,.682561,0,0],[2.184823,.661921,0,0],[2.198364,.641445,0,0],[2.211275,.621169,0,0],[2.223562,.601125,0,0],[2.23523,.581341,0,0],[2.246289,.561847,0,0],[2.256751,.542667,0,0],[2.266631,.523826,0,0],[2.275943,.505344,0,0],[2.284707,.487239,0,0],[2.292939,.469528,0,0],[2.300661,.452225,0,0],[2.307892,.435342,0,0],[2.314654,.418888,0,0],[2.320969,.40287,0,0],[2.326858,.387294,0,0],[2.332343,.372164,0,0],[2.337445,.357481,0,0],[2.342186,.343246,0,0],[2.346585,.329458,0,0],[2.350664,.316113,0,0],[2.354442,.303208,0,0],[2.357937,.290738,0,0],[2.361168,.278698,0,0],[2.364152,.26708,0,0],[2.366906,.255878,0,0],[2.369446,.245082,0,0],[2.371786,.234685,0,0],[2.37394,.224677,0,0],[2.375923,.215048,0,0],[2.377745,.20579,0,0],[2.379421,.196891,0,0],[2.380959,.188342,0,0],[2.382372,.180132,0,0],[2.383667,.172251,0,0],[2.384856,.164689,0,0],[2.385945,.157435,0,0],[2.386943,.150479,0,0],[2.387857,.143811,0,0],[2.388694,.137421,0,0],[2.38946,.131299,0,0],[2.39016,.125435,0,0],[2.390801,.11982,0,0],[2.391386,.114445,0,0],[2.391921,.1093,0,0],[2.39241,.104376,0,0],[2.392857,.099666,0,0],[2.393265,.09516,0,0],[2.393637,.090851,0,0],[2.393977,.086731,0,0],[2.394288,.082791,0,0],[2.394571,.079025,0,0],[2.394829,.075426,0,0],[2.395064,.071986,0,0],[2.395279,.068699,0,0],[2.395475,.065558,0,0],[2.395653,.062558,0,0],[2.395816,.059693,0,0],[2.395964,.056955,0,0],[2.396099,.054341,0,0],[2.396222,.051845,0,0],[2.396334,.049462,0,0],[2.396436,.047186,0,0],[2.396529,.045013,0,0],[2.396613,.042939,0,0],[2.396691,.040959,0,0],[2.396761,.039069,0,0],[2.396825,.037266,0,0],[2.396883,.035544,0,0],[2.396936,.033901,0,0],[2.396984,.032334,0,0],[2.397028,.030838,0,0],[2.397068,.02941,0,0],[2.397104,.028048,0,0],[2.397137,.026749,0,0],[2.397167,.025509,0,0],[2.397194,.024326,0,0],[2.397219,.023198,0,0],[2.397242,.022122,0,0],[2.397262,.021095,0,0],[2.397281,.020116,0,0],[2.397298,.019181,0,0],[2.397314,.01829,0,0],[2.397328,.017441,0,0],[2.397341,.01663,0,0],[2.397352,.015857,0,0],[2.397363,.015119,0,0],[2.397372,.014416,0,0],[2.397381,.013745,0,0],[2.397389,.013106,0,0],[2.397396,.012496,0,0],[2.397403,.011914,0,0],[2.397409,.01136,0,0],[2.397414,.010831,0,0],[2.397419,.010326,0,0],[2.397424,.009845,0,0],[2.397428,.009387,0,0],[2.397432,.008949,0,0],[2.397435,.008532,0,0],[2.397438,.008135,0,0],[2.397441,.007755,0,0],[2.397443,.007394,0,0],[2.397446,.007049,0,0],[2.397448,.006721,0,0],[2.39745,.006407,0,0],[2.397451,.006108,0,0],[2.397453,.005824,0,0],[2.397454,.005552,0,0],[2.397456,.005293,0,0],[2.397457,.005046,0,0],[2.397458,.004811,0,0],[2.397459,.004586,0,0],[2.39746,.004372,0,0],[2.397461,.004168,0,0],[2.397461,.003974,0,0],[2.397462,.003788,0,0],[2.397463,.003611,0,0],[2.397463,.003443,0,0],[2.397464,.003282,0,0],[2.397464,.003129,0,0],[2.397465,.002983,0,0],[2.397465,.002844,0,0],[2.397465,.002711,0,0],[2.397466,.002584,0,0],[2.397466,.002464,0,0],[2.397466,.002349,0,0],[2.397466,.002239,0,0],[2.397467,.002135,0,0],[2.397467,.002035,0,0],[2.397467,.00194,0,0],[2.397467,.001849,0,0],[2.397467,.001763,0,0],[2.397467,.001681,0,0],[2.397468,.001602,0,0],[2.397468,.001527,0,0],[2.397468,.001456,0,0],[2.397468,.001388,0,0],[2.397468,.001323,0,0],[2.397468,.001261,0,0],[2.397468,.001202,0,0],[2.397468,.001146,0,0],[2.397468,.001093,0,0],[2.397468,.001042,0,0],[2.397468,993e-6,0,0],[2.397468,947e-6,0,0],[2.397468,902e-6,0,0],[2.397468,86e-5,0,0],[2.397468,82e-5,0,0],[2.397469,782e-6,0,0],[2.397469,745e-6,0,0],[2.397469,71e-5,0,0],[2.397469,677e-6,0,0],[2.397469,646e-6,0,0],[2.397469,616e-6,0,0],[2.397469,587e-6,0,0],[2.397469,559e-6,0,0],[2.397469,533e-6,0,0],[2.397469,508e-6,0,0],[2.397469,485e-6,0,0],[2.397469,462e-6,0,0],[2.397469,44e-5,0,0],[2.397469,42e-5,0,0],[2.397469,4e-4,0,0],[2.397469,381e-6,0,0],[2.397469,364e-6,0,0],[2.397469,347e-6,0,0],[2.397469,33e-5,0,0],[2.397469,315e-6,0,0],[2.397469,3e-4,0,0],[2.397469,286e-6,0,0],[2.397469,273e-6,0,0],[2.397469,26e-5,0,0],[2.397469,248e-6,0,0],[2.397469,236e-6,0,0],[2.397469,225e-6,0,0],[2.397469,215e-6,0,0],[2.397469,205e-6,0,0],[2.397469,195e-6,0,0],[2.397469,186e-6,0,0],[2.397469,177e-6,0,0],[2.397469,169e-6,0,0],[2.397469,161e-6,0,0],[2.397469,154e-6,0,0],[2.397469,147e-6,0,0],[2.397469,14e-5,0,0],[2.397469,133e-6,0,0],[2.397469,127e-6,0,0],[2.397469,121e-6,0,0],[2.397469,115e-6,0,0],[2.397469,11e-5,0,0],[2.397469,105e-6,0,0],[2.397469,1e-4,0,0],[2.397469,95e-6,0,0],[2.397469,91e-6,0,0],[2.397469,87e-6,0,0],[2.397469,83e-6,0,0],[2.397469,79e-6,0,0],[2.397469,75e-6,0,0],[2.397469,71e-6,0,0],[2.397469,68e-6,0,0],[2.397469,65e-6,0,0],[2.397469,62e-6,0,0],[2.397469,59e-6,0,0],[2.397469,56e-6,0,0],[2.397469,54e-6,0,0],[2.397469,51e-6,0,0],[2.397469,49e-6,0,0],[2.397469,46e-6,0,0],[2.397469,44e-6,0,0],[2.397469,42e-6,0,0],[2.397469,4e-5,0,0],[2.397469,38e-6,0,0],[2.397469,37e-6,0,0],[2.397469,35e-6,0,0],[2.397469,33e-6,0,0],[2.397469,32e-6,0,0],[2.397469,3e-5,0,0],[2.397469,29e-6,0,0],[2.397469,27e-6,0,0],[2.397469,26e-6,0,0],[2.397469,25e-6,0,0],[2.397469,24e-6,0,0],[2.397469,23e-6,0,0],[2.397469,22e-6,0,0],[2.397469,21e-6,0,0],[2.397469,2e-5,0,0],[2.397469,19e-6,0,0],[2.397469,18e-6,0,0],[2.397469,17e-6,0,0],[2.397469,16e-6,0,0],[2.397469,15e-6,0,0],[2.397469,15e-6,0,0],[2.397469,14e-6,0,0],[2.397469,13e-6,0,0],[2.397469,13e-6,0,0],[2.397469,12e-6,0,0],[2.397469,12e-6,0,0],[2.397469,11e-6,0,0],[2.397469,11e-6,0,0],[2.397469,1e-5,0,0],[2.397469,1e-5,0,0],[2.397469,9e-6,0,0],[2.397469,9e-6,0,0],[2.397469,8e-6,0,0],[2.397469,8e-6,0,0],[2.397469,8e-6,0,0],[2.397469,7e-6,0,0],[2.397469,7e-6,0,0],[2.397469,7e-6,0,0],[2.397469,6e-6,0,0],[2.397469,6e-6,0,0],[2.397469,6e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,1e-6,0,0],[2.397469,1e-6,0,0],[2.397469,1e-6,0,0]],_i=1,Ei=1,Pi=1,Mi=[0,0,0],Bi=[0,0,-1],ki=[0,1,0],Ti=343,Ii=["logarithmic","linear","none"],Fi="logarithmic",Li="ambisonic",Oi=1,Ri=1e3,Ni=0,Hi=1,zi=0,ji=0,Qi=1,Ui=0,Wi=2,Gi=6400,qi={left:0,right:0,front:0,back:0,down:0,up:0},Vi=1,Yi={width:0,height:0,depth:0},Xi=1,Zi=1,Ji=1,Ki=1.5,$i=3.8,ts=.01,es=3,ns=[31.25,62.5,125,250,500,1e3,2e3,4e3,8e3],is=ns.length,ss=new Float32Array(is),os={transparent:[1,1,1,1,1,1,1,1,1],"acoustic-ceiling-tiles":[.672,.675,.7,.66,.72,.92,.88,.75,1],"brick-bare":[.03,.03,.03,.03,.03,.04,.05,.07,.14],"brick-painted":[.006,.007,.01,.01,.02,.02,.02,.03,.06],"concrete-block-coarse":[.36,.36,.36,.44,.31,.29,.39,.25,.5],"concrete-block-painted":[.092,.09,.1,.05,.06,.07,.09,.08,.16],"curtain-heavy":[.073,.106,.14,.35,.55,.72,.7,.65,1],"fiber-glass-insulation":[.193,.22,.22,.82,.99,.99,.99,.99,1],"glass-thin":[.18,.169,.18,.06,.04,.03,.02,.02,.04],"glass-thick":[.35,.35,.35,.25,.18,.12,.07,.04,.08],grass:[.05,.05,.15,.25,.4,.55,.6,.6,.6],"linoleum-on-concrete":[.02,.02,.02,.03,.03,.03,.03,.02,.04],marble:[.01,.01,.01,.01,.01,.01,.02,.02,.04],metal:[.03,.035,.04,.04,.05,.05,.05,.07,.09],"parquet-on-concrete":[.028,.03,.04,.04,.07,.06,.06,.07,.14],"plaster-rough":[.017,.018,.02,.03,.04,.05,.04,.03,.06],"plaster-smooth":[.011,.012,.013,.015,.02,.03,.04,.05,.1],"plywood-panel":[.4,.34,.28,.22,.17,.09,.1,.11,.22],"polished-concrete-or-tile":[.008,.008,.01,.01,.015,.02,.02,.02,.04],"sheet-rock":[.29,.279,.29,.1,.05,.04,.07,.09,.18],"water-or-ice-surface":[.006,.006,.008,.008,.013,.015,.02,.025,.05],"wood-ceiling":[.15,.147,.15,.11,.1,.07,.06,.07,.14],"wood-panel":[.28,.28,.28,.22,.17,.09,.1,.11,.22],uniform:[.5,.5,.5,.5,.5,.5,.5,.5,.5]},rs={left:"transparent",right:"transparent",front:"transparent",back:"transparent",down:"transparent",up:"transparent"},as=3,cs=4,ls=1e-4,us=[6e-4,6e-4,7e-4,8e-4,.001,.0015,.0026,.006,.0207],hs=1.38,ds=6.28318530717959,As=55.2620422318571,ps=6.90775527898214,gs=.346573590279973,fs=57.29577951308232,ms=1e-8,vs=function(){window.console.log.apply(window.console,["%c[ResonanceAudio]%c "+Array.prototype.slice.call(arguments).join(" ")+" %c(@"+performance.now().toFixed(2)+"ms)","background: #BBDEFB; color: #FF5722; font-weight: 700","font-weight: 400","color: #AAA"])},ys=function(t){let e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e>ms&&(e=1/e,t[0]*=e,t[1]*=e,t[2]*=e),t},ws=function(t,e,n,i,s,o,r){r[0]=e*o-n*s,r[1]=n*i-t*o,r[2]=t*s-e*i};
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bs{constructor(t,e){null==e&&(e={}),null==e.ambisonicOrder&&(e.ambisonicOrder=Qi),null==e.azimuth&&(e.azimuth=zi),null==e.elevation&&(e.elevation=ji),null==e.sourceWidth&&(e.sourceWidth=Ui),this._context=t,this.input=t.createGain(),this._channelGain=[],this._merger=void 0,this.output=t.createGain(),this.setAmbisonicOrder(e.ambisonicOrder),this._azimuth=e.azimuth,this._elevation=e.elevation,this.setSourceWidth(e.sourceWidth)}setAmbisonicOrder(t){this._ambisonicOrder=bs.validateAmbisonicOrder(t),this.input.disconnect();for(let t=0;t<this._channelGain.length;t++)this._channelGain[t].disconnect();null!=this._merger&&this._merger.disconnect(),delete this._channelGain,delete this._merger;let e=(this._ambisonicOrder+1)*(this._ambisonicOrder+1);this._merger=this._context.createChannelMerger(e),this._channelGain=new Array(e);for(let t=0;t<e;t++)this._channelGain[t]=this._context.createGain(),this.input.connect(this._channelGain[t]),this._channelGain[t].connect(this._merger,0,t);this._merger.connect(this.output)}dispose(){this._merger.disconnect(this.output);let t=(this._ambisonicOrder+1)*(this._ambisonicOrder+1);for(let e=0;e<t;++e)this._channelGain[e].disconnect(this._merger,0,e),this.input.disconnect(this._channelGain[e])}setDirection(t,e){(null==t||isNaN(t))&&(t=zi),(null==e||isNaN(e))&&(e=ji),this._azimuth=t,this._elevation=e,(t=Math.round(t%360))<0&&(t+=360),e=Math.round(Math.min(90,Math.max(-90,e)))+90,this._channelGain[0].gain.value=Si[this._spreadIndex][0];for(let n=1;n<=this._ambisonicOrder;n++){let i=Si[this._spreadIndex][n];for(let s=-n;s<=n;s++){let o=n*n+n+s,r=n*(n+1)/2+Math.abs(s)-1,a=Ci[1][e][r];if(0!=s){let e=Di+s-1;s<0&&(e=Di+s),a*=Ci[0][t][e]}this._channelGain[o].gain.value=a*i}}}setSourceWidth(t){this._spreadIndex=Math.min(359,Math.max(0,Math.round(t))),this.setDirection(this._azimuth,this._elevation)}}bs.validateAmbisonicOrder=function(t){return isNaN(t)||null==t?(vs("Error: Invalid ambisonic order",options.ambisonicOrder,"\nUsing ambisonicOrder=1 instead."),t=1):t<1?(vs("Error: Unable to render ambisonic order",options.ambisonicOrder,"(Min order is 1)","\nUsing min order instead."),t=1):t>Di&&(vs("Error: Unable to render ambisonic order",options.ambisonicOrder,"(Max order is",Di,")\nUsing max order instead."),options.ambisonicOrder=Di),t};
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class xs{constructor(t,e){null==e&&(e={}),null==e.ambisonicOrder&&(e.ambisonicOrder=Qi),null==e.position&&(e.position=Mi.slice()),null==e.forward&&(e.forward=Bi.slice()),null==e.up&&(e.up=ki.slice()),null==e.renderingMode&&(e.renderingMode=Li),this.position=new Float32Array(3),this._tempMatrix3=new Float32Array(9),this._ambisonicOrder=bs.validateAmbisonicOrder(e.ambisonicOrder),this._context=t,1==this._ambisonicOrder?this._renderer=function(t,e){return new pi(t,e)}(t,{renderingMode:e.renderingMode}):this._ambisonicOrder>1&&(this._renderer=function(t,e){return new wi(t,e)}(t,{ambisonicOrder:this._ambisonicOrder,renderingMode:e.renderingMode})),this.input=t.createGain(),this.output=t.createGain(),this.ambisonicOutput=t.createGain(),this._renderer.initialize().then(()=>{this.input.connect(this._renderer.input),this._ambisonicOrder>1?this._renderer._hoaRotator.output.connect(this.ambisonicOutput):this._renderer._foaRotator.output.connect(this.ambisonicOutput),this._renderer.output.connect(this.output)}),this.setOrientation(e.forward[0],e.forward[1],e.forward[2],e.up[0],e.up[1],e.up[2])}getRenderingMode(){return this._renderer.getRenderingMode()}setRenderingMode(t){this._renderer.setRenderingMode(t)}dispose(){this.input.disconnect(this._renderer.input),this._ambisonicOrder>1?this._renderer._hoaRotator.output.disconnect(this.ambisonicOutput):this._renderer._foaRotator.output.disconnect(this.ambisonicOutput),this._renderer.output.disconnect(this.output),this._renderer.dispose()}setOrientation(t,e,n,i,s,o){ws(t,e,n,i,s,o,this._tempMatrix3),this._tempMatrix3[3]=i,this._tempMatrix3[4]=s,this._tempMatrix3[5]=o,this._tempMatrix3[6]=-t,this._tempMatrix3[7]=-e,this._tempMatrix3[8]=-n,this._renderer.setRotationMatrix3(this._tempMatrix3)}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t,e){null==e&&(e={}),null==e.alpha&&(e.alpha=Ni),null==e.sharpness&&(e.sharpness=Hi),this._context=t,this._lowpass=t.createBiquadFilter(),this._lowpass.type="lowpass",this._lowpass.Q.value=0,this._lowpass.frequency.value=.5*t.sampleRate,this._cosTheta=0,this.setPattern(e.alpha,e.sharpness),this.input=this._lowpass,this.output=this._lowpass}computeAngle(t,e){let n=ys(t),i=ys(e),s=1;if(this._alpha>ms){let t=n[0]*i[0]+n[1]*i[1]+n[2]*i[2];s=1-this._alpha+this._alpha*t,s=Math.pow(Math.abs(s),this._sharpness)}this._lowpass.frequency.value=.5*this._context.sampleRate*s}setPattern(t,e){this._alpha=Math.min(1,Math.max(0,t)),this._sharpness=Math.max(1,e),this.computeAngle([this._cosTheta*this._cosTheta,0,0],[1,0,0])}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t,e){null==e&&(e={}),null==e.minDistance&&(e.minDistance=Oi),null==e.maxDistance&&(e.maxDistance=Ri),null==e.rolloff&&(e.rolloff=Fi),this.minDistance=e.minDistance,this.maxDistance=e.maxDistance,this.setRolloff(e.rolloff),this._gainNode=t.createGain(),this.setDistance(e.maxDistance),this.input=this._gainNode,this.output=this._gainNode}setDistance(t){let e=1;if("logarithmic"==this._rolloff){if(t>this.maxDistance)e=0;else if(t>this.minDistance){let n=this.maxDistance-this.minDistance;if(n>ms){let i=1/(n+1);e=(1/(t-this.minDistance+1)-i)/(1-i)}}}else if("linear"==this._rolloff)if(t>this.maxDistance)e=0;else if(t>this.minDistance){let n=this.maxDistance-this.minDistance;n>ms&&(e=(this.maxDistance-t)/n)}this._gainNode.gain.value=e}setRolloff(t){let e=~Ii.indexOf(t);null!=t&&e?t=t.toString().toLowerCase():(e||vs('Invalid rolloff model ("'+t+'"). Using default: "'+Fi+'".'),t=Fi),this._rolloff=t}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(t,e){null==e&&(e={}),null==e.position&&(e.position=Mi.slice()),null==e.forward&&(e.forward=Bi.slice()),null==e.up&&(e.up=ki.slice()),null==e.minDistance&&(e.minDistance=Oi),null==e.maxDistance&&(e.maxDistance=Ri),null==e.rolloff&&(e.rolloff=Fi),null==e.gain&&(e.gain=_i),null==e.alpha&&(e.alpha=Ni),null==e.sharpness&&(e.sharpness=Hi),null==e.sourceWidth&&(e.sourceWidth=Ui),this._scene=t,this._position=e.position,this._forward=e.forward,this._up=e.up,this._dx=new Float32Array(3),this._right=[],ws(this._forward[0],this._forward[1],this._forward[2],this._up[0],this._up[1],this._up[2],this._right);let n=t._context;this.input=n.createGain(),this._directivity=new Cs(n,{alpha:e.alpha,sharpness:e.sharpness}),this._toEarly=n.createGain(),this._toLate=n.createGain(),this._attenuation=new Ds(n,{minDistance:e.minDistance,maxDistance:e.maxDistance,rolloff:e.rolloff}),this._encoder=new bs(n,{ambisonicOrder:t._ambisonicOrder,sourceWidth:e.sourceWidth}),this.input.connect(this._toLate),this._toLate.connect(t._room.late.input),this.input.connect(this._attenuation.input),this._attenuation.output.connect(this._toEarly),this._toEarly.connect(t._room.early.input),this._attenuation.output.connect(this._directivity.input),this._directivity.output.connect(this._encoder.input),this._encoder.output.connect(t._listener.input),this.setPosition(e.position[0],e.position[1],e.position[2]),this.input.gain.value=e.gain}dispose(){this._encoder.output.disconnect(this._scene._listener.input),this._directivity.output.disconnect(this._encoder.input),this._attenuation.output.disconnect(this._directivity.input),this._toEarly.disconnect(this._scene._room.early.input),this._attenuation.output.disconnect(this._toEarly),this.input.disconnect(this._attenuation.input),this._toLate.disconnect(this._scene._room.late.input),this.input.disconnect(this._toLate),this._encoder.dispose()}setPosition(t,e,n){this._position[0]=t,this._position[1]=e,this._position[2]=n;let i=function(t){let e=1;return t>ms&&(e=1-t/Pi,e=Math.max(0,Math.min(1,e))),e}(this._scene._room.getDistanceOutsideRoom(this._position[0],this._position[1],this._position[2]));this._toLate.gain.value=i,this._toEarly.gain.value=i,this._update()}_update(){for(let t=0;t<3;t++)this._dx[t]=this._position[t]-this._scene._listener.position[t];let t=Math.sqrt(this._dx[0]*this._dx[0]+this._dx[1]*this._dx[1]+this._dx[2]*this._dx[2]);t>0&&(this._dx[0]/=t,this._dx[1]/=t,this._dx[2]/=t);let e=Math.atan2(-this._dx[0],this._dx[2])*fs,n=Math.atan2(this._dx[1],Math.sqrt(this._dx[0]*this._dx[0]+this._dx[2]*this._dx[2]))*fs;this._attenuation.setDistance(t),this._directivity.computeAngle(this._forward,this._dx),this._encoder.setDirection(e,n)}setRolloff(t){this._attenuation.setRolloff(t)}setMinDistance(t){this._attenuation.minDistance=t}setMaxDistance(t){this._attenuation.maxDistance=t}setGain(t){this.input.gain.value=t}setOrientation(t,e,n,i,s,o){this._forward[0]=t,this._forward[1]=e,this._forward[2]=n,this._up[0]=i,this._up[1]=s,this._up[2]=o,ws(t,e,n,i,s,o,this._right)}setSourceWidth(t){this._encoder.setSourceWidth(t),this.setPosition(this._position[0],this._position[1],this._position[2])}setDirectivityPattern(t,e){this._directivity.setPattern(t,e),this.setPosition(this._position[0],this._position[1],this._position[2])}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(t,e){null==e&&(e={}),null==e.durations&&(e.durations=ss.slice()),null==e.predelay&&(e.predelay=Ki),null==e.gain&&(e.gain=ts),null==e.bandwidth&&(e.bandwidth=Zi),null==e.tailonset&&(e.tailonset=$i);let n=e.predelay/1e3;this._bandwidthCoeff=e.bandwidth*gs,this._tailonsetSamples=e.tailonset/1e3,this._context=t,this.input=t.createGain(),this._predelay=t.createDelay(n),this._convolver=t.createConvolver(),this.output=t.createGain(),this.output.gain.value=e.gain,this._convolver.normalize=!1,this.input.connect(this._predelay),this._predelay.connect(this._convolver),this._convolver.connect(this.output),this.setDurations(e.durations)}dispose(){this.input.disconnect(this._predelay),this._predelay.disconnect(this._convolver),this._convolver.disconnect(this.output)}setDurations(t){if(t.length!==is)return void vs("Warning: invalid number of RT60 values provided to reverb.");let e=new Float32Array(is),n=this._context.sampleRate;for(let i=0;i<t.length;i++)t[i]=Math.max(0,Math.min(es,t[i])),e[i]=Math.round(t[i]*n*Ji);let i=0;for(let t=0;t<e.length;t++)e[t]>i&&(i=e[t]);i<1&&(i=1);let s=this._context.createBuffer(1,i,n),o=s.getChannelData(0),r=new Float32Array(i);for(let t=0;t<i;t++)r[t]=2*Math.random()-1;for(let t=0;t<is;t++){let i=-ps/e[t],s=ds*ns[t]/n,a=Math.sin(s),c=a*Math.sinh(this._bandwidthCoeff*s/a),l=1/(1+c),u=c*l,h=-2*Math.cos(s)*l,d=(1-c)*l,A=0,p=0;for(let n=0;n<e[t];n++){let t=r[n]*Math.exp(i*n)-h*A-d*p;o[n]+=u*(t-p),p=A,A=t}}let a=Math.round(this._tailonsetSamples);for(let t=0;t<Math.min(o.length,a);t++){let e=.5*(1-Math.cos(ds*t/(2*a-1)));o[t]*=e}this._convolver.buffer=s}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(t,e){null==e&&(e={}),null==e.speedOfSound&&(e.speedOfSound=Ti),null==e.listenerPosition&&(e.listenerPosition=Mi.slice()),null==e.coefficients&&(e.coefficients={},Object.assign(e.coefficients,qi)),this.speedOfSound=e.speedOfSound,this.input=t.createGain(),this.output=t.createGain(),this._lowpass=t.createBiquadFilter(),this._delays={},this._gains={},this._inverters={},this._merger=t.createChannelMerger(4);for(let e in qi)qi.hasOwnProperty(e)&&(this._delays[e]=t.createDelay(Wi),this._gains[e]=t.createGain());this._inverters.right=t.createGain(),this._inverters.down=t.createGain(),this._inverters.back=t.createGain(),this._lowpass.type="lowpass",this._lowpass.frequency.value=Gi,this._lowpass.Q.value=0;for(let t in qi)qi.hasOwnProperty(t)&&(this._delays[t].delayTime.value=0,this._gains[t].gain.value=0);this._inverters.right.gain.value=-1,this._inverters.down.gain.value=-1,this._inverters.back.gain.value=-1,this.input.connect(this._lowpass);for(let t in qi)qi.hasOwnProperty(t)&&(this._lowpass.connect(this._delays[t]),this._delays[t].connect(this._gains[t]),this._gains[t].connect(this._merger,0,0));this._gains.left.connect(this._merger,0,1),this._gains.right.connect(this._inverters.right),this._inverters.right.connect(this._merger,0,1),this._gains.up.connect(this._merger,0,2),this._gains.down.connect(this._inverters.down),this._inverters.down.connect(this._merger,0,2),this._gains.front.connect(this._merger,0,3),this._gains.back.connect(this._inverters.back),this._inverters.back.connect(this._merger,0,3),this._merger.connect(this.output),this._listenerPosition=e.listenerPosition,this.setRoomProperties(e.dimensions,e.coefficients)}dipose(){this.input.disconnect(this._lowpass);for(let t in qi)qi.hasOwnProperty(t)&&(this._lowpass.disconnect(this._delays[t]),this._delays[t].disconnect(this._gains[t]),this._gains[t].disconnect(this._merger,0,0));this._gains.left.disconnect(this._merger,0,1),this._gains.right.disconnect(this._inverters.right),this._inverters.right.disconnect(this._merger,0,1),this._gains.up.disconnect(this._merger,0,2),this._gains.down.disconnect(this._inverters.down),this._inverters.down.disconnect(this._merger,0,2),this._gains.front.disconnect(this._merger,0,3),this._gains.back.disconnect(this._inverters.back),this._inverters.back.disconnect(this._merger,0,3),this._merger.disconnect(this.output)}setListenerPosition(t,e,n){this._listenerPosition=[t,e,n];let i={left:Xi*Math.max(0,this._halfDimensions.width+t)+Vi,right:Xi*Math.max(0,this._halfDimensions.width-t)+Vi,front:Xi*Math.max(0,this._halfDimensions.depth+n)+Vi,back:Xi*Math.max(0,this._halfDimensions.depth-n)+Vi,down:Xi*Math.max(0,this._halfDimensions.height+e)+Vi,up:Xi*Math.max(0,this._halfDimensions.height-e)+Vi};for(let t in qi)if(qi.hasOwnProperty(t)){let e=i[t]/this.speedOfSound;this._delays[t].delayTime.value=e;let n=this._coefficients[t]/i[t];this._gains[t].gain.value=n}}setRoomProperties(t,e){null==t&&(t={},Object.assign(t,Yi)),null==e&&(e={},Object.assign(e,qi)),this._coefficients=e,this._halfDimensions={},this._halfDimensions.width=.5*t.width,this._halfDimensions.height=.5*t.height,this._halfDimensions.depth=.5*t.depth,this.setListenerPosition(this._listenerPosition[0],this._listenerPosition[1],this._listenerPosition[2])}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t){let e={};for(let t in rs)rs.hasOwnProperty(t)&&(e[t]=os[rs[t]]);null==t&&(t={},Object.assign(t,rs));for(let n in rs)rs.hasOwnProperty(n)&&t.hasOwnProperty(n)?t[n]in os?e[n]=os[t[n]]:vs('Material "'+t[n]+'" on wall "'+n+'" not found. Using "'+rs[n]+'".'):vs('Wall "'+n+'" is not defined. Default used.');return e}function j(t){null==t&&(t={});for(let e in Yi)t.hasOwnProperty(e)||(t[e]=Yi[e]);return t}function Q(t,e,n){let i=new Float32Array(is);t=j(t),e=function(t){null==t&&(t={});for(let e in rs)t.hasOwnProperty(e)||(t[e]=os[rs[e]]);return t}(e),null==n&&(n=Ti);let s=As/n,o=t.width*t.height*t.depth;if(o<ls)return i;let r=t.width*t.height,a=t.width*t.depth,c=t.depth*t.height,l=2*(r+a+c);for(let t=0;t<is;t++){let n=((e.left[t]+e.right[t])*r+(e.down[t]+e.up[t])*a+(e.front[t]+e.back[t])*c)/l;i[t]=hs*s*o/(-l*Math.log(1-n)+4*us[t]*o)}return i}function U(t){let e=[];for(let n in qi)if(qi.hasOwnProperty(n)){e[n]=0;for(let i=0;i<as;i++){let s=i+cs;e[n]+=t[n][s]}e[n]/=as,e[n]=Math.sqrt(1-e[n])}return e}class Ps{constructor(t,e){null==e&&(e={}),null==e.listenerPosition&&(e.listenerPosition=Mi.slice()),null==e.dimensions&&(e.dimensions={},Object.assign(e.dimensions,Yi)),null==e.materials&&(e.materials={},Object.assign(e.materials,rs)),null==e.speedOfSound&&(e.speedOfSound=Ti),e.dimensions=j(e.dimensions);let n=H(e.materials),i=U(n),s=Q(e.dimensions,n,e.speedOfSound);this.early=new Es(t,{dimensions:e.dimensions,coefficients:i,speedOfSound:e.speedOfSound,listenerPosition:e.listenerPosition}),this.late=new _s(t,{durations:s}),this.speedOfSound=e.speedOfSound,this.output=t.createGain(),this.early.output.connect(this.output),this._merger=t.createChannelMerger(4),this.late.output.connect(this._merger,0,0),this._merger.connect(this.output)}dispose(){this.early.output.disconnect(this.output),this.late.output.disconnect(this._merger,0,0),this._merger.disconnect(this.output)}setProperties(t,e){let n=H(e),i=Q(t,n,this.speedOfSound);this.late.setDurations(i),this.early.speedOfSound=this.speedOfSound;let s=U(n);this.early.setRoomProperties(t,s)}setListenerPosition(t,e,n){this.early.speedOfSound=this.speedOfSound,this.early.setListenerPosition(t,e,n);let i=this.getDistanceOutsideRoom(t,e,n),s=1;i>ms&&(s=1-i/Ei,s=Math.max(0,Math.min(1,s))),this.output.gain.value=s}getDistanceOutsideRoom(t,e,n){let i=Math.max(0,-this.early._halfDimensions.width-t,t-this.early._halfDimensions.width),s=Math.max(0,-this.early._halfDimensions.height-e,e-this.early._halfDimensions.height),o=Math.max(0,-this.early._halfDimensions.depth-n,n-this.early._halfDimensions.depth);return Math.sqrt(i*i+s*s+o*o)}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ms{constructor(t,e){null==e&&(e={}),null==e.ambisonicOrder&&(e.ambisonicOrder=Qi),null==e.listenerPosition&&(e.listenerPosition=Mi.slice()),null==e.listenerForward&&(e.listenerForward=Bi.slice()),null==e.listenerUp&&(e.listenerUp=ki.slice()),null==e.dimensions&&(e.dimensions={},Object.assign(e.dimensions,Yi)),null==e.materials&&(e.materials={},Object.assign(e.materials,rs)),null==e.speedOfSound&&(e.speedOfSound=Ti),null==e.renderingMode&&(e.renderingMode=Li),this._ambisonicOrder=bs.validateAmbisonicOrder(e.ambisonicOrder),this._sources=[],this._room=new Ps(t,{listenerPosition:e.listenerPosition,dimensions:e.dimensions,materials:e.materials,speedOfSound:e.speedOfSound}),this._listener=new xs(t,{ambisonicOrder:e.ambisonicOrder,position:e.listenerPosition,forward:e.listenerForward,up:e.listenerUp,renderingMode:e.renderingMode}),this._context=t,this.output=t.createGain(),this.ambisonicOutput=t.createGain(),this.ambisonicInput=this._listener.input,this._room.output.connect(this._listener.input),this._listener.output.connect(this.output),this._listener.ambisonicOutput.connect(this.ambisonicOutput)}getRenderingMode(){return this._listener.getRenderingMode()}setRenderingMode(t){this._listener.setRenderingMode(t)}dispose(){this._room.output.disconnect(this._listener.input),this._listener.output.disconnect(this.output),this._listener.ambisonicOutput.disconnect(this.ambisonicOutput)}createSource(t){let e=new Ss(this,t);return this._sources[this._sources.length]=e,e}removeSource(t){const e=this._sources.findIndex(e=>e===t);e>-1&&(this._sources.splice(e,1),t.dispose())}setAmbisonicOrder(t){this._ambisonicOrder=bs.validateAmbisonicOrder(t)}setRoomProperties(t,e){this._room.setProperties(t,e)}setListenerPosition(t,e,n){this._listener.position[0]=t,this._listener.position[1]=e,this._listener.position[2]=n,this._room.setListenerPosition(t,e,n),this._sources.forEach((function(t){t._update()}))}setListenerOrientation(t,e,n,i,s,o){this._listener.setOrientation(t,e,n,i,s,o)}setListenerFromMatrix(t){this._listener.setFromMatrix(t),this.setListenerPosition(this._listener.position[0],this._listener.position[1],this._listener.position[2])}setSpeedOfSound(t){this._room.speedOfSound=t}}Ms.Version="2.0.0";class Bs extends Kn{constructor(t,e,n,i){const s=i.createSource();super(t,e,n,s.input),this.inNode.disconnect(n.destination),this.resScene=i,this.resNode=s,Object.seal(this)}update(t){super.update(t);const{p:e,f:n,u:i}=t;this.resNode.setMinDistance(this.minDistance),this.resNode.setMaxDistance(this.maxDistance),this.resNode.setPosition(e.x,e.y,e.z),this.resNode.setOrientation(n.x,n.y,n.z,i.x,i.y,i.z)}dispose(){this.resScene.removeSource(this.resNode),this.resNode=null,super.dispose()}}class ks extends ni{constructor(t){super(),this.scene=new Ms(t,{ambisonicOrder:1,renderingMode:"bypass"}),this.scene.output.connect(t.destination),this.scene.setRoomProperties({width:10,height:5,depth:10},{left:"transparent",right:"transparent",front:"transparent",back:"transparent",down:"grass",up:"transparent"}),Object.seal(this)}update(t){super.update(t);const{p:e,f:n,u:i}=t;this.scene.setListenerPosition(e.x,e.y,e.z),this.scene.setListenerOrientation(n.x,n.y,n.z,i.x,i.y,i.z)}createSource(t,e,n,i){return n?new Bs(t,e,i,this.scene):super.createSource(t,e,n,i)}}const Ts=1024,Is=new t,Fs=new Event("audioready");let Ls=Object.prototype.hasOwnProperty.call(window,"AudioContext"),Os=Ls&&Object.prototype.hasOwnProperty.call(window,"AudioListener"),Rs=Os&&Object.prototype.hasOwnProperty.call(AudioListener.prototype,"setPosition"),Ns=Os&&Object.prototype.hasOwnProperty.call(AudioListener.prototype,"positionX"),Hs=Os;class zs extends kn{constructor(){super(),this.minDistance=1,this.minDistanceSq=1,this.maxDistance=10,this.maxDistanceSq=100,this.rolloff=1,this.transitionTime=.5,this.users=new Map,this.analysers=new Map,this.clips=new Map,this.onAudioActivity=t=>{Is.id=t.id,Is.isActive=t.isActive,this.dispatchEvent(Is)},this.listener=null,this.audioContext=null,this.createContext(),Object.seal(this)}addEventListener(t,e,n){t===Fs.type&&this.ready?e(Fs):super.addEventListener(t,e,n)}get ready(){return this.audioContext&&"running"===this.audioContext.state}async start(){this.createContext(),await this.audioContext.resume()}update(){if(this.audioContext){const t=this.currentTime;for(let e of this.clips.values())e.update(t);for(let e of this.users.values())e.update(t);for(let e of this.analysers.values())e.update(t)}}createContext(){if(!this.audioContext){if(Ls)try{this.audioContext=new AudioContext,this.ready?console.log("AudioContext is already running."):(console.log("AudioContext is not yet running."),function(t,e){e=e||(()=>!0);const n=async i=>{let s=e();if(s instanceof Promise&&(s=await s),i.isTrusted&&s){for(let t of Bn)window.removeEventListener(t,n);const e=t();e instanceof Promise&&await e}};for(let t of Bn)window.addEventListener(t,n)}(()=>{console.log("AudioContext is finally running."),this.dispatchEvent(Fs)},async()=>(await this.start(),this.ready)))}catch(t){Ls=!1,console.warn("Could not create WebAudio AudioContext",t)}if(Ls||(this.audioContext=new Yn),Ls&&Hs)try{this.listener=new ks(this.audioContext)}catch(t){Hs=!1,console.warn("Resonance Audio API not available!",t)}if(Ls&&!Hs&&Ns)try{this.listener=new si(this.audioContext.listener)}catch(t){Ns=!1,console.warn("No AudioListener.positionX property!",t)}if(Ls&&!Hs&&!Ns&&Rs)try{this.listener=new ri(this.audioContext.listener)}catch(t){Rs=!1,console.warn("No WebAudio API!",t)}Rs&&Ls||(this.listener=new ni)}}createSpatializer(t,e,n){if(!this.listener)throw new Error("Audio context isn't ready");if(!e)throw new Error("No stream or audio element given.");return this.listener.createSource(t,e,n,this.audioContext)}get currentTime(){return this.audioContext.currentTime}createUser(t){return this.users.has(t)||this.users.set(t,new Vn),this.users.get(t)}createLocalUser(t){const e=this.createUser(t);return e.spatializer=this.listener,e}async createClip(t,e,n,i,s,...o){const r=new Vn,a=[];for(let t of o){const e=document.createElement("source");s&&(t=await m(t,s)),e.src=t,a.push(e)}const c=document.createElement("audio");return c.loop=e,c.controls=!1,c.playsInline=!0,c.autoplay=n,c.append(...a),r.spatializer=this.createSpatializer(t,c,i),this.clips.set(t,r),r}async playClip(t,e=1){if(this.clips.has(t)){const n=this.clips.get(t);n.volume=e,await n.spatializer.play()}}stopClip(t){if(this.clips.has(t)){this.clips.get(t).spatializer.stop()}}getSource(t,e){return t.get(e)||null}getUser(t){return this.getSource(this.users,t)}getClip(t){return this.getSource(this.clips,t)}removeSource(t,e){if(t.has(e)){const n=t.get(e);t.delete(e),n.dispose()}}removeUser(t){this.removeSource(this.users,t)}removeClip(t){this.removeSource(this.clips,t)}setUserStream(t,e){if(this.users.has(t)){if(this.analysers.has(t)){const e=this.analysers.get(t);this.analysers.delete(t),e.removeEventListener("audioActivity",this.onAudioActivity),e.dispose()}const n=this.users.get(t);if(n.spatializer=null,e){n.spatializer=this.createSpatializer(t,e,!0),n.spatializer.setAudioProperties(this.minDistance,this.maxDistance,this.rolloff,this.transitionTime),n.spatializer.audio.autoPlay=!0,n.spatializer.audio.muted=!0,n.spatializer.audio.addEventListener("onloadedmetadata",()=>n.spatializer.audio.play()),n.spatializer.audio.play();const i=new Rn(n,this.audioContext,Ts);i.addEventListener("audioActivity",this.onAudioActivity),this.analysers.set(t,i)}}}setAudioProperties(t,e,n,i){this.minDistance=t,this.maxDistance=e,this.transitionTime=i,this.rolloff=n;for(let t of this.users.values())t.spatializer&&t.spatializer.setAudioProperties(this.minDistance,this.maxDistance,this.rolloff,this.transitionTime);for(let t of this.clips.values())t.spatializer&&t.spatializer.setAudioProperties(this.minDistance,this.maxDistance,this.rolloff,this.transitionTime)}withPose(t,e,n,i){if(t.has(e)){const s=t.get(e).pose;null===n&&(n=this.transitionTime),i(s,n)}}withUser(t,e,n){this.withPose(this.users,t,e,n)}setUserPosition(t,e,n,i,s=null){this.withUser(t,s,(t,s)=>{t.setTargetPosition(e,n,i,this.currentTime,s)})}setUserOrientation(t,e,n,i,s,o,r,a=null){this.withUser(t,a,(t,a)=>{t.setTargetOrientation(e,n,i,s,o,r,this.currentTime,a)})}setUserPose(t,e,n,i,s,o,r,a,c,l,u=null){this.withUser(t,u,(t,u)=>{t.setTarget(e,n,i,s,o,r,a,c,l,this.currentTime,u)})}withClip(t,e,n){this.withPose(this.clips,t,e,n)}setClipPosition(t,e,n,i,s=null){this.withClip(t,s,(t,s)=>{t.setTargetPosition(e,n,i,this.currentTime,s)})}setClipOrientation(t,e,n,i,s,o,r,a=null){this.withClip(t,a,(t,a)=>{t.setTargetOrientation(e,n,i,s,o,r,this.currentTime,a)})}setClipPose(t,e,n,i,s,o,r,a,c,l,u=null){this.withClip(t,u,(t,u)=>{t.setTarget(e,n,i,s,o,r,a,c,l,this.currentTime,u)})}}function W(t,e){return n=>{t(n),e(n)}}function G(t,e,n,i){return void 0===i&&a(n)&&(i=n,n=void 0),new Promise((s,a)=>{const c=o(e);if(c){const n=s,i=()=>{t.removeEventListener(e,n)};s=W(i,s),a=W(i,a)}const l=o(n);if(l){const e=a,i=()=>{t.removeEventListener(n,e)};s=W(i,s),a=W(i,a)}if(r(i)){const t=setTimeout(a,i,`'${e}' has timed out.`),n=()=>clearTimeout(t);s=W(n,s),a=W(n,a)}c&&t.addEventListener(e,s),l&&t.addEventListener(n,()=>{a("Rejection event found")})})}const js="v0.10.4";console.info("Calla",js);class Qs extends Event{constructor(t,e,n){super(t),this.id=e;for(let t in n)"isTrusted"===t||Object.prototype.hasOwnProperty.call(Event.prototype,t)||(this[t]=n[t])}}const Us=["userMoved","userTurned","userPosed","emote","userInitRequest","userInitResponse","audioMuteStatusChanged","videoMuteStatusChanged","localAudioMuteStatusChanged","localVideoMuteStatusChanged","videoConferenceJoined","videoConferenceLeft","participantJoined","participantLeft","avatarChanged","displayNameChange","audioActivity","setAvatarEmoji","deviceListChanged","participantRoleChanged","audioAdded","videoAdded","audioRemoved","videoRemoved","audioChanged","videoChanged"],Ws=new t;function q(t,e){if("localhost"===window.location.hostname){const n=(...t)=>{"conference.endpoint_message_received"===e&&t.length>=2&&("e2e-ping-request"===t[1].type||"e2e-ping-response"===t[1].type||"stats"===t[1].type)||console.log(e,...t)};t.addEventListener(e,n)}}function V(t,e){for(let n of Object.values(e))-1===n.indexOf("audioLevelsChanged")&&q(t,n)}class Gs extends kn{constructor(t,e,n){super(),this.host=t,this.bridgeHost=e,this.bridgeMUC=n,this._prepTask=null,this.joined=!1,this.connection=null,this.conference=null,this.audio=new zs,this.audio.addEventListener("audioActivity",t=>{Ws.id=t.id,Ws.isActive=t.isActive,this.dispatchEvent(Ws)}),this.hasAudioPermission=!1,this.hasVideoPermission=!1,this.localUserID=null,this.preferredAudioOutputID=null,this.preferredAudioInputID=null,this.preferredVideoInputID=null,this.addEventListener("participantJoined",async t=>{const e=await this.userInitRequestAsync(t.id);r(e.x)&&r(e.y)&&r(e.z)?this.audio.setUserPosition(e.id,e.x,e.y,e.z):r(e.fx)&&r(e.fy)&&r(e.fz)&&r(e.ux)&&r(e.uy)&&r(e.uz)&&(r(e.px)&&r(e.py)&&r(e.pz)?this.audio.setUserPose(e.id,e.px,e.py,e.pz,e.fx,e.fy,e.fz,e.ux,e.uy,e.uz):this.audio.setUserOrientation(e.id,e.fx,e.fy,e.fz,e.ux,e.uy,e.uz))}),this.addEventListener("userInitRequest",t=>{const e=this.audio.getUser(this.localUserID),{p:n,f:i,u:s}=e.pose.end;this.userInitResponse(t.id,{id:this.localUserID,px:n.x,py:n.y,pz:n.z,fx:i.x,fy:i.y,fz:i.z,ux:s.x,uy:s.y,uz:s.z})}),this.addEventListener("userMoved",t=>{this.audio.setUserPosition(t.id,t.x,t.y,t.z)}),this.addEventListener("userTurned",t=>{this.audio.setUserOrientation(t.id,t.fx,t.fy,t.fz,t.ux,t.uy,t.uz)}),this.addEventListener("userPosed",t=>{this.audio.setUserPose(t.id,t.px,t.py,t.pz,t.fx,t.fy,t.fz,t.ux,t.uy,t.uz)}),this.addEventListener("participantLeft",t=>{this.removeUser(t.id)});const i=t=>{const e=Object.assign(new Event("audioChanged"),{id:t.id,stream:t.stream});this.dispatchEvent(e)},s=t=>{const e=Object.assign(new Event("videoChanged"),{id:t.id,stream:t.stream});this.dispatchEvent(e)};this.addEventListener("audioAdded",i),this.addEventListener("audioRemoved",i),this.addEventListener("videoAdded",s),this.addEventListener("videoRemoved",s),this.addEventListener("audioMuteStatusChanged",t=>{if(t.id===this.localUserID){const e=Object.assign(new Event("localAudioMuteStatusChanged"),{id:t.id,muted:t.muted});this.dispatchEvent(e)}}),this.addEventListener("videoMuteStatusChanged",t=>{if(t.id===this.localUserID){const e=Object.assign(new Event("localVideoMuteStatusChanged"),{id:t.id,muted:t.muted});this.dispatchEvent(e)}});const o=()=>this.dispose();window.addEventListener("beforeunload",o),window.addEventListener("unload",o),window.addEventListener("pagehide",o),Object.seal(this)}get appFingerPrint(){return"Calla"}userIDs(){return Object.keys(this.conference.participants)}userExists(t){return!!this.conference.participants[t]}users(){return Object.keys(this.conference.participants).map(t=>[t,this.conference.participants[t].getDisplayName()])}update(){this.audio.update()}_prepareAsync(){return this._prepTask||(console.info("Connecting to:",this.host),this._prepTask=import(`https://${this.host}/libs/lib-jitsi-meet.min.js`)),this._prepTask}async join(t,e){await this.leaveAsync(),await this._prepareAsync(),t=t.toLocaleLowerCase(),JitsiMeetJS.setLogLevel(JitsiMeetJS.logLevels.ERROR),JitsiMeetJS.init(),this.connection=new JitsiMeetJS.JitsiConnection(null,null,{hosts:{domain:this.bridgeHost,muc:this.bridgeMUC},serviceUrl:`https://${this.host}/http-bind`,enableLipSync:!0});const{CONNECTION_ESTABLISHED:n,CONNECTION_FAILED:i,CONNECTION_DISCONNECTED:s}=JitsiMeetJS.events.connection;V(this.connection,JitsiMeetJS.events.connection);const o=()=>{this.dispatchEvent(Object.assign(new Event("videoConferenceLeft"),{roomName:t})),this.localUserID=null,this.conference=null,this.joined=!1},r=t=>{console.error("Connection failed",t),this.dispose(),o(),a()},a=()=>{this.connection.removeEventListener(n,c),this.connection.removeEventListener(i,r),this.connection.removeEventListener(s,a),this.connection=null},c=n=>{this.conference=this.connection.initJitsiConference(t,{openBridgeChannel:!0});const{TRACK_ADDED:i,TRACK_REMOVED:s,CONFERENCE_JOINED:a,CONFERENCE_LEFT:c,USER_JOINED:l,USER_LEFT:u,DISPLAY_NAME_CHANGED:h,ENDPOINT_MESSAGE_RECEIVED:d,CONNECTION_INTERRUPTED:A}=JitsiMeetJS.events.conference;V(this.conference,JitsiMeetJS.events.conference),this.conference.addEventListener(a,async()=>{this.localUserID=this.conference.myUserId(),console.log("======== CONFERENCE_JOINED ::",this.localUserID);const n=this.audio.createLocalUser(this.localUserID);this.joined=!0,this.setDisplayName(e),this.dispatchEvent(Object.assign(new Event("videoConferenceJoined"),{id:this.localUserID,roomName:t,displayName:e,pose:n.pose})),await this.setPreferredDevicesAsync()}),this.conference.addEventListener(c,o);const p=(t,e)=>{const n=t.getParticipantId()||this.localUserID,i=t.getType()+"MuteStatusChanged",s=Object.assign(new Event(i),{id:n,muted:e});this.dispatchEvent(s)},g=t=>{p(t,t.isMuted())};this.conference.addEventListener(l,(t,e)=>{console.log("======== USER_JOINED ::",t);const n=this.audio.createUser(t),i=Object.assign(new Event("participantJoined"),{id:t,displayName:e.getDisplayName(),pose:n.pose});this.dispatchEvent(i)}),this.conference.addEventListener(u,t=>{const e=Object.assign(new Event("participantLeft"),{id:t});this.dispatchEvent(e)}),this.conference.addEventListener(h,(t,e)=>{const n=Object.assign(new Event("displayNameChange"),{id:t,displayName:e});this.dispatchEvent(n)}),this.conference.addEventListener(i,t=>{const e=t.getParticipantId()||this.localUserID,n=t.isLocal(),i=t.getType(),s=Object.assign(new Event(i+"Added"),{id:e,stream:t.stream}),o=this.audio.getUser(e);V(t,JitsiMeetJS.events.track),t.addEventListener(JitsiMeetJS.events.track.TRACK_MUTE_CHANGED,g),o.tracks.has(i)&&(o.tracks.get(i).dispose(),o.tracks.delete(i)),o.tracks.set(i,t),"audio"!==i||n||this.audio.setUserStream(e,t.stream),this.dispatchEvent(s),p(t,!1)}),this.conference.addEventListener(s,t=>{const e=t.getParticipantId()||this.localUserID,n=t.isLocal(),i=t.getType(),s=Object.assign(new Event(i+"Removed"),{id:e,stream:null}),o=this.audio.getUser(e);o&&o.tracks.has(i)&&(o.tracks.get(i).dispose(),o.tracks.delete(i)),"audio"!==i||n||this.audio.setUserStream(e,null),t.dispose(),p(t,!0),this.dispatchEvent(s)}),this.conference.addEventListener(d,(t,e)=>{this.rxGameData({user:t,data:e})}),this.conference.addEventListener(A,(...t)=>{console.log("CONNECTION_INTERRUPTED"),r(t)}),this.conference.join()};this.connection.addEventListener(n,c),this.connection.addEventListener(i,r),this.connection.addEventListener(s,a),V(JitsiMeetJS.mediaDevices,JitsiMeetJS.events.mediaDevices),this.connection.connect()}dispatchEvent(t){null!==t.id&&void 0!==t.id&&"local"!==t.id||(null===this.localUserID&&console.warn("I DON'T KNOW THE LOCAL USER ID YET!"),t.id=this.localUserID),super.dispatchEvent(t)}async setPreferredDevicesAsync(){await this.setPreferredAudioInputAsync(!0),await this.setPreferredVideoInputAsync(!1),await this.setPreferredAudioOutputAsync(!0)}async getPreferredAudioOutputAsync(t){return n(await this.getAudioOutputDevicesAsync(),t=>t.deviceId===this.preferredAudioOutputID,t=>"communications"===t.deviceId,t=>"default"===t.deviceId,e=>t&&e&&e.deviceId)}async setPreferredAudioOutputAsync(t){const e=await this.getPreferredAudioOutputAsync(t);e&&await this.setAudioOutputDeviceAsync(e)}async getPreferredAudioInputAsync(t){return n(await this.getAudioInputDevicesAsync(),t=>t.deviceId===this.preferredAudioInputID,t=>"communications"===t.deviceId,t=>"default"===t.deviceId,e=>t&&e&&e.deviceId)}async setPreferredAudioInputAsync(t){const e=await this.getPreferredAudioInputAsync(t);e&&await this.setAudioInputDeviceAsync(e)}async getPreferredVideoInputAsync(t){return n(await this.getVideoInputDevicesAsync(),t=>t.deviceId===this.preferredVideoInputID,e=>t&&e&&/front/i.test(e.label),e=>t&&e&&e.deviceId)}async setPreferredVideoInputAsync(t){const e=await this.getPreferredVideoInputAsync(t);e&&await this.setVideoInputDeviceAsync(e)}dispose(){if(this.localUserID){const t=this.audio.getUser(this.localUserID);if(t)for(let e of t.tracks.values())e.dispose()}}setDisplayName(t){this.conference.setDisplayName(t)}async leaveAsync(){if(this.conference){if(null!==this.localUserID){const t=this.audio.getUser(this.localUserID);if(t){if(t.tracks.has("video")){const e=G(this,"videoRemoved");this.conference.removeTrack(t.tracks.get("video")),await e}if(t.tracks.has("audio")){const e=G(this,"audioRemoved");this.conference.removeTrack(t.tracks.get("audio")),await e}}}await this.conference.leave(),await this.connection.disconnect()}}async _getDevicesAsync(){await this._prepareAsync();const t=await navigator.mediaDevices.enumerateDevices();for(let e of t)e.deviceId.length>0&&(this.hasAudioPermission|="audioinput"===e.kind&&e.label.length>0,this.hasVideoPermission|="videoinput"===e.kind&&e.label.length>0);return t}async getAvailableDevicesAsync(){let t=await this._getDevicesAsync();for(let e=0;e<3&&!this.hasAudioPermission;++e){t=null;try{await navigator.mediaDevices.getUserMedia({audio:!this.hasAudioPermission,video:!this.hasVideoPermission})}catch(t){console.warn(t)}t=await this._getDevicesAsync()}return{audioOutput:Xn?t.filter(t=>"audiooutput"===t.kind):[],audioInput:t.filter(t=>"audioinput"===t.kind),videoInput:t.filter(t=>"videoinput"===t.kind)}}async getAudioOutputDevicesAsync(){if(!Xn)return[];const t=await this.getAvailableDevicesAsync();return t&&t.audioOutput||[]}async getAudioInputDevicesAsync(){const t=await this.getAvailableDevicesAsync();return t&&t.audioInput||[]}async getVideoInputDevicesAsync(){const t=await this.getAvailableDevicesAsync();return t&&t.videoInput||[]}async setAudioOutputDeviceAsync(t){Xn&&(this.preferredAudioOutputID=t&&t.deviceId||null,await JitsiMeetJS.mediaDevices.setAudioOutputDevice(this.preferredAudioOutputID))}taskOf(t){return function(t,e,n,i){if(!o(e))throw new Error("Need an event name on which to resolve the operation.");if(!s(n))throw new Error("Filtering tests function is required. Otherwise, use `once`.");return new Promise((n,s)=>{const o=()=>{t.removeEventListener(e,n)};if(n=W(o,n),s=W(o,s),r(i)){const t=setTimeout(s,i,`'${e}' has timed out.`),o=()=>clearTimeout(t);n=W(o,n),s=W(o,s)}t.addEventListener(e,n)})}(this,t,t=>t.id===this.localUserID,5e3)}getCurrentMediaTrack(t){if(null===this.localUserID)return null;const e=this.audio.getUser(this.localUserID);return e&&e.tracks.has(t)?e.tracks.get(t):null}async setAudioInputDeviceAsync(t){this.preferredAudioInputID=t&&t.deviceId||null;const e=this.getCurrentMediaTrack("audio");if(e){const t=this.taskOf("audioRemoved");this.conference.removeTrack(e),await t}if(this.joined&&this.preferredAudioInputID){const t=this.taskOf("audioAdded"),e=await JitsiMeetJS.createLocalTracks({devices:["audio"],micDeviceId:this.preferredAudioInputID});for(let t of e)this.conference.addTrack(t);await t}}async setVideoInputDeviceAsync(t){this.preferredVideoInputID=t&&t.deviceId||null;const e=this.getCurrentMediaTrack("video");if(e){const t=this.taskOf("videoRemoved");this.conference.removeTrack(e),await t}if(this.joined&&this.preferredVideoInputID){const t=this.taskOf("videoAdded"),e=await JitsiMeetJS.createLocalTracks({devices:["video"],cameraDeviceId:this.preferredVideoInputID});for(let t of e)this.conference.addTrack(t);await t}}async getCurrentAudioInputDeviceAsync(){const t=this.getCurrentMediaTrack("audio"),e=(await this.getAudioInputDevicesAsync()).filter(e=>null!==t&&e.deviceId===t.deviceId);return 0===e.length?null:e[0]}async getCurrentAudioOutputDeviceAsync(){if(!Xn)return null;const t=JitsiMeetJS.mediaDevices.getAudioOutputDevice(),e=(await this.getAudioOutputDevicesAsync()).filter(e=>e.deviceId===t);return 0===e.length?null:e[0]}async getCurrentVideoInputDeviceAsync(){const t=this.getCurrentMediaTrack("video"),e=(await this.getVideoInputDevicesAsync()).filter(e=>null!==t&&e.deviceId===t.deviceId);return 0===e.length?null:e[0]}async toggleAudioMutedAsync(){const t=this.taskOf("audioMuteStatusChanged"),e=this.getCurrentMediaTrack("audio");if(e){e.isMuted()?await e.unmute():await e.mute()}else await this.setPreferredAudioInputAsync(!0);return(await t).muted}async toggleVideoMutedAsync(){const t=this.taskOf("videoMuteStatusChanged");this.getCurrentMediaTrack("video")?await this.setVideoInputDeviceAsync(null):await this.setPreferredVideoInputAsync(!0);return(await t).muted}isMediaMuted(t){const e=this.getCurrentMediaTrack(t);return null===e||e.isMuted()}get isAudioMuted(){return this.isMediaMuted("audio")}get isVideoMuted(){return this.isMediaMuted("video")}txGameData(t,e){this.conference.sendMessage(e,t)}rxGameData(t){t.data.hax===this.appFingerPrint&&this.receiveMessageFrom(t.user.getId(),t.data.command,t.data.value)}sendMessageTo(t,e,n){this.txGameData(t,{hax:this.appFingerPrint,command:e,value:n})}receiveMessageFrom(t,e,n){const i=new Qs(e,t,n);this.dispatchEvent(i)}setAudioProperties(t,e,n,i){this.audio.setAudioProperties(t,e,n,i)}setLocalPosition(t,e,n){this.audio.setUserPosition(this.localUserID,t,e,n);for(let i of this.userIDs())this.sendMessageTo(i,"userMoved",{x:t,y:e,z:n})}setLocalOrientation(t,e,n,i,s,o){this.audio.setUserOrientation(this.localUserID,t,e,n,i,s,o);for(let t of this.userIDs())this.sendMessageTo(t,"userTurned",{x:x,y:y,z:z})}setLocalPose(t,e,n,i,s,o,r,a,c){this.audio.setUserPose(this.localUserID,t,e,n,i,s,o,r,a,c);for(let l of this.userIDs())this.sendMessageTo(l,"userPosed",{px:t,py:e,pz:n,fx:i,fy:s,fz:o,ux:r,uy:a,uz:c})}removeUser(t){this.audio.removeUser(t)}async setAudioMutedAsync(t){let e=this.isAudioMuted;return t!==e&&(e=await this.toggleAudioMutedAsync()),e}async setVideoMutedAsync(t){let e=this.isVideoMuted;return t!==e&&(e=await this.toggleVideoMutedAsync()),e}addEventListener(t,e,n){if(-1===Us.indexOf(t))throw new Error("Unsupported event type: "+t);super.addEventListener(t,e,n)}async userInitRequestAsync(t){return await(e=this,n="userInitResponse",i=()=>this.sendMessageTo(t,"userInitRequest"),s=e=>e.id===t&&a(e.px)&&a(e.py)&&a(e.pz),o=1e3,new Promise((t,a)=>{let c=null,l=null;const u=()=>{null!==c&&clearTimeout(c),null!==l&&clearTimeout(l),e.removeEventListener(n,h)};function h(e){s(e)&&(u(),t(e))}if(e.addEventListener(n,h),void 0!==o){void 0!==r&&(l=setTimeout(()=>{u(),a(`'${n}' has timed out.`)},r));const t=()=>{i(),c=setTimeout(t,o)};c=setTimeout(t,0)}}));var e,n,i,s,o,r}userInitResponse(t,e){this.sendMessageTo(t,"userInitResponse",e)}set avatarEmoji(t){for(let e of this.userIDs())this.sendMessageTo(e,"setAvatarEmoji",t)}set avatarURL(t){for(let e of this.userIDs())this.sendMessageTo(e,"avatarChanged",{url:t})}emote(t){for(let e of this.userIDs())this.sendMessageTo(e,"emote",t)}}function Y(t,e){for(let n in e){let i=e[n],s=void 0;i instanceof Array&&(s=i[1],i=i[0]),t.addEventListener(n,i,s)}}const qs="tele.calla.chat",Vs=qs,Ys="conference."+qs;class Xs{constructor(t,e){this.value=t,this.desc=e}contains(t){return this.value.indexOf(t.value)>=0}}function X(t,e,n=null){return Object.assign(new Xs(t,e),n)}class Zs extends Xs{constructor(t,e,...n){super(t,e),this.alts=n,this.width=null}random(){const t=Math.floor(Math.random()*this.alts.length);if(t<0)return null;const e=this.alts[t];return e instanceof Zs?e.random():e}contains(t){return super.contains(t)||this.alts.reduce((e,n)=>e||n.contains(t),!1)}}function Z(t,e,...n){return new Zs(t,e,...n)}function J(t,e,n,...i){return Object.assign(Z(t,e,...Object.values(n).filter(t=>t instanceof Xs),...i),n)}const Js=X("︎","Variation Selector-15: text style"),Ks=X("️","Variation Selector-16: emoji style"),$s=X("‍","Zero Width Joiner"),to=(X("⃣","Combining Enclosing Circle Backslash"),X("⃣","Combining Enclosing Keycap"),X("♀️","Female")),eo=X("♂️","Male"),no=X("🏻","Light Skin Tone"),io=X("🏼","Medium-Light Skin Tone"),so=X("🏽","Medium Skin Tone"),oo=X("🏾","Medium-Dark Skin Tone"),ro=X("🏿","Dark Skin Tone"),ao=X("🦰","Red Hair"),co=X("🦱","Curly Hair"),lo=X("🦳","White Hair"),uo=X("🦲","Bald");function K(t,e){if(t instanceof Array)return t.map(t=>K(t,e));if(t instanceof Zs){const{value:n,desc:i}=K(X(t.value,t.desc),e);return Z(n,i,...K(t.alts,e))}return e instanceof Array?e.map(e=>K(t,e)):X(t.value+e.value,t.desc+": "+e.desc)}function $(t,e){if(t instanceof Array)return t.map(t=>$(t,e));if(t instanceof Zs){const{value:n,desc:i}=$(X(t.value,t.desc),e);return Z(n,i,...$(t.alts,e))}return e instanceof Array?e.map(e=>$(t,e)):X(t.value+$s.value+e.value,t.desc+": "+e.desc)}function tt(t,e,...n){const i=X(t,e),s=K(i,no),o=K(i,io),r=K(i,so),a=K(i,oo),c=K(i,ro);return J(i.value,i.desc,{default:i,light:s,mediumLight:o,medium:r,mediumDark:a,dark:c},...n)}function et(t){const e=$(t,eo),n=$(t,to);return J(t.value,t.desc,{default:t,man:e,woman:n})}function nt(t,e){return et(tt(t,e))}function it(t,e,...n){const i=tt(t,e),s=$(i,ao),o=$(i,co),r=$(i,lo),a=$(i,uo);return J(i.value,i.desc,{default:i,red:s,curly:o,white:r,bald:a},...n)}function st(t,e){const n=X(t.value,e),i=$(Jo.default,n),s=$(nr.default,n);return J(t.value,t.desc,{symbol:t,men:i,women:s})}const ho=nt("🙍","Frowning"),Ao=nt("🙎","Pouting"),po=nt("🙅","Gesturing NO"),go=nt("🙆","Gesturing OK"),fo=nt("💁","Tipping Hand"),mo=nt("🙋","Raising Hand"),vo=nt("🙇","Bowing"),yo=nt("🤦","Facepalming"),wo=nt("🤷","Shrugging"),bo=nt("🧏","Can't Hear"),xo=nt("💆","Getting Massage"),Co=nt("💇","Getting Haircut"),Do=nt("👷","Construction Worker"),So=nt("💂","Guard"),_o=nt("🕵","Spy"),Eo=(nt("👮","Police"),nt("👳","Wearing Turban")),Po=nt("🦸","Superhero"),Mo=nt("🦹","Supervillain"),Bo=nt("🧙","Mage"),ko=nt("🧚","Fairy"),To=nt("🧛","Vampire"),Io=nt("🧜","Merperson"),Fo=nt("🧝","Elf"),Lo=nt("🚶","Walking"),Oo=nt("🧍","Standing"),Ro=nt("🧎","Kneeling"),No=nt("🏃","Running"),Ho=Z("Gestures","Gestures",ho,Ao,po,go,fo,mo,vo,yo,wo,bo,xo,Co),zo=tt("👶","Baby"),jo=tt("🧒","Child"),Qo=tt("👦","Boy"),Uo=tt("👧","Girl"),Wo=J(jo.value,jo.desc,{default:jo,male:Qo,female:Uo}),Go=nt("👱","Blond Person"),qo=tt("🧑","Person",Go.default,Eo.default),Vo=tt("🧔","Bearded Man"),Yo=X("🕴️","Man in Suit, Levitating"),Xo=tt("👲","Man With Chinese Cap"),Zo=tt("🤵","Man in Tuxedo"),Jo=it("👨","Man",Go.man,Vo,Yo,Xo,Eo.man,Zo),Ko=tt("🤰","Pregnant Woman"),$o=tt("🤱","Breast-Feeding"),tr=tt("🧕","Woman With Headscarf"),er=tt("👰","Bride With Veil"),nr=it("👩","Woman",Go.woman,Ko,$o,tr,Eo.woman,er),ir=J(qo.value,"Adult",{default:qo,male:Jo,female:nr}),sr=tt("🧓","Older Person"),or=tt("👴","Old Man"),rr=tt("👵","Old Woman"),ar=J(sr.value,sr.desc,{default:sr,male:or,female:rr}),cr=X("⚕️","Medical"),lr=st(cr,"Health Care"),ur=X("🎓","Graduation Cap"),hr=st(ur,"Student"),dr=X("🏫","School"),Ar=st(dr,"Teacher"),pr=X("⚖️","Balance Scale"),gr=st(pr,"Judge"),fr=X("🌾","Sheaf of Rice"),mr=st(fr,"Farmer"),vr=X("🍳","Cooking"),yr=st(vr,"Cook"),wr=X("🔧","Wrench"),br=st(wr,"Mechanic"),xr=X("🏭","Factory"),Cr=st(xr,"Factory Worker"),Dr=X("💼","Briefcase"),Sr=st(Dr,"Office Worker"),_r=X("🚒","Fire Engine"),Er=st(_r,"Fire Fighter"),Pr=X("🚀","Rocket"),Mr=st(Pr,"Astronaut"),Br=X("✈️","Airplane"),kr=st(Br,"Pilot"),Tr=X("🎨","Artist Palette"),Ir=st(Tr,"Artist"),Fr=X("🎤","Microphone"),Lr=st(Fr,"Singer"),Or=X("💻","Laptop"),Rr=st(Or,"Technologist"),Nr=X("🔬","Microscope"),Hr=st(Nr,"Scientist"),zr=X("👑","Crown"),jr=tt("🤴","Prince"),Qr=tt("👸","Princess"),Ur=J(zr.value,zr.desc,{symbol:zr,male:jr,female:Qr}),Wr=J("Roles","Depictions of people working",{healthCareWorkers:lr,students:hr,teachers:Ar,judges:gr,farmers:mr,cooks:yr,mechanics:br,factoryWorkers:Cr,officeWorkers:Sr,scientists:Hr,technologists:Rr,singers:Lr,artists:Ir,pilots:kr,astronauts:Mr,fireFighters:Er,spies:_o,guards:So,constructionWorkers:Do,royalty:Ur}),Gr=tt("👼","Cherub"),qr=tt("🎅","Santa Claus"),Vr=tt("🤶","Mrs. Claus"),Yr=et(X("🧞","Genie")),Xr=et(X("🧟","Zombie")),Zr=J("Fantasy","Depictions of fantasy characters",{cherub:Gr,santaClaus:qr,mrsClaus:Vr,superheroes:Po,supervillains:Mo,mages:Bo,fairies:ko,vampires:To,merpeople:Io,elves:Fo,genies:Yr,zombies:Xr}),Jr=X("🦯","Probing Cane"),Kr=st(Jr,"Probing"),$r=X("🦼","Motorized Wheelchair"),ta=st($r,"In Motorized Wheelchair"),ea=X("🦽","Manual Wheelchair"),na=st(ea,"In Manual Wheelchair"),ia=tt("🕺","Man Dancing"),sa=tt("💃","Woman Dancing"),oa=J(ia.value,"Dancing",{male:ia,female:sa}),ra=nt("🤹","Juggler"),aa=nt("🧗","Climber"),ca=X("🤺","Fencer"),la=tt("🏇","Jockey"),ua=X("⛷️","Skier"),ha=tt("🏂","Snowboarder"),da=nt("🏌️","Golfer"),Aa=nt("🏄","Surfing"),pa=nt("🚣","Rowing Boat"),ga=nt("🏊","Swimming"),fa=nt("⛹️","Basket Baller"),ma=nt("🏋️","Weight Lifter"),va=nt("🚴","Biker"),ya=nt("🚵","Mountain Biker"),wa=nt("🤸","Cartwheeler"),ba=et(X("🤼","Wrestler")),xa=nt("🤽","Water Polo Player"),Ca=nt("🤾","Hand Baller"),Da=J("In Motion","Depictions of people in motion",{walking:Lo,standing:Oo,kneeling:Ro,withProbingCane:Kr,inMotorizedWheelchair:ta,inManualWheelchair:na,dancers:oa,jugglers:ra,climbers:aa,fencer:ca,jockeys:la,skier:ua,snowboarders:ha,golfers:da,surfers:Aa,rowers:pa,swimmers:ga,runners:No,basketballers:fa,weightLifters:ma,bikers:va,mountainBikers:ya,cartwheelers:wa,wrestlers:ba,waterPoloers:xa,handBallers:Ca}),Sa=nt("🧘","In Lotus Position"),_a=tt("🛀","In Bath"),Ea=tt("🛌","In Bed"),Pa=nt("🧖","In Sauna"),Ma=J("Resting","Depictions of people at rest",{inLotusPosition:Sa,inBath:_a,inBed:Ea,inSauna:Pa}),Ba=Z(zo.value,zo.desc,zo,Gr),ka=J("People","People",{babies:Ba,children:Wo,adults:ir,elderly:ar}),Ta=J("All People","All People",{people:ka,gestures:Ho,inMotion:Da,resting:Ma,roles:Wr,fantasy:Zr}),Ia=X("👹","Ogre"),Fa=X("👺","Goblin"),La=X("👻","Ghost"),Oa=X("👽","Alien"),Ra=X("👾","Alien Monster"),Na=X("👿","Angry Face with Horns"),Ha=X("💀","Skull"),za=X("💩","Pile of Poo"),ja=X("😀","Grinning Face"),Qa=X("😁","Beaming Face with Smiling Eyes"),Ua=X("😂","Face with Tears of Joy"),Wa=X("😃","Grinning Face with Big Eyes"),Ga=X("😄","Grinning Face with Smiling Eyes"),qa=X("😅","Grinning Face with Sweat"),Va=X("😆","Grinning Squinting Face"),Ya=X("😇","Smiling Face with Halo"),Xa=X("😈","Smiling Face with Horns"),Za=X("😉","Winking Face"),Ja=X("😊","Smiling Face with Smiling Eyes"),Ka=X("😋","Face Savoring Food"),$a=X("😌","Relieved Face"),tc=X("😍","Smiling Face with Heart-Eyes"),ec=X("😎","Smiling Face with Sunglasses"),nc=X("😏","Smirking Face"),ic=X("😐","Neutral Face"),sc=X("😑","Expressionless Face"),oc=X("😒","Unamused Face"),rc=X("😓","Downcast Face with Sweat"),ac=X("😔","Pensive Face"),cc=X("😕","Confused Face"),lc=X("😖","Confounded Face"),uc=X("😗","Kissing Face"),hc=X("😘","Face Blowing a Kiss"),dc=X("😙","Kissing Face with Smiling Eyes"),Ac=X("😚","Kissing Face with Closed Eyes"),pc=X("😛","Face with Tongue"),gc=X("😜","Winking Face with Tongue"),fc=X("😝","Squinting Face with Tongue"),mc=X("😞","Disappointed Face"),vc=X("😟","Worried Face"),yc=X("😠","Angry Face"),wc=X("😡","Pouting Face"),bc=X("😢","Crying Face"),xc=X("😣","Persevering Face"),Cc=X("😤","Face with Steam From Nose"),Dc=X("😥","Sad but Relieved Face"),Sc=X("😦","Frowning Face with Open Mouth"),_c=X("😧","Anguished Face"),Ec=X("😨","Fearful Face"),Pc=X("😩","Weary Face"),Mc=X("😪","Sleepy Face"),Bc=X("😫","Tired Face"),kc=X("😬","Grimacing Face"),Tc=X("😭","Loudly Crying Face"),Ic=X("😮","Face with Open Mouth"),Fc=X("😯","Hushed Face"),Lc=X("😰","Anxious Face with Sweat"),Oc=X("😱","Face Screaming in Fear"),Rc=X("😲","Astonished Face"),Nc=X("😳","Flushed Face"),Hc=X("😴","Sleeping Face"),zc=X("😵","Dizzy Face"),jc=X("😶","Face Without Mouth"),Qc=X("😷","Face with Medical Mask"),Uc=X("😸","Grinning Cat with Smiling Eyes"),Wc=X("😹","Cat with Tears of Joy"),Gc=X("😺","Grinning Cat"),qc=X("😻","Smiling Cat with Heart-Eyes"),Vc=X("😼","Cat with Wry Smile"),Yc=X("😽","Kissing Cat"),Xc=X("😾","Pouting Cat"),Zc=X("😿","Crying Cat"),Jc=X("🙀","Weary Cat"),Kc=X("🙁","Slightly Frowning Face"),$c=X("🙂","Slightly Smiling Face"),tl=X("🙃","Upside-Down Face"),el=X("🙄","Face with Rolling Eyes"),nl=X("🙈","See-No-Evil Monkey"),il=X("🙉","Hear-No-Evil Monkey"),sl=X("🙊","Speak-No-Evil Monkey"),ol=X("🤐","Zipper-Mouth Face"),rl=X("🤑","Money-Mouth Face"),al=X("🤒","Face with Thermometer"),cl=X("🤓","Nerd Face"),ll=X("🤔","Thinking Face"),ul=X("🤕","Face with Head-Bandage"),hl=X("🤖","Robot"),dl=X("🤗","Hugging Face"),Al=X("🤠","Cowboy Hat Face"),pl=X("🤡","Clown Face"),gl=X("🤢","Nauseated Face"),fl=X("🤣","Rolling on the Floor Laughing"),ml=X("🤤","Drooling Face"),vl=X("🤥","Lying Face"),yl=X("🤧","Sneezing Face"),wl=X("🤨","Face with Raised Eyebrow"),bl=X("🤩","Star-Struck"),xl=X("🤪","Zany Face"),Cl=X("🤫","Shushing Face"),Dl=X("🤬","Face with Symbols on Mouth"),Sl=X("🤭","Face with Hand Over Mouth"),_l=X("🤮","Face Vomiting"),El=X("🤯","Exploding Head"),Pl=X("🥰","Smiling Face with Hearts"),Ml=X("🥱","Yawning Face"),Bl=X("🥳","Partying Face"),kl=X("🥴","Woozy Face"),Tl=X("🥵","Hot Face"),Il=X("🥶","Cold Face"),Fl=X("🥺","Pleading Face"),Ll=X("🧐","Face with Monocle"),Ol=X("☠️","Skull and Crossbones"),Rl=X("☹️","Frowning Face"),Nl=X("☺️","Smiling Face"),Hl=X("🗣️","Speaking Head"),zl=X("👤","Bust in Silhouette"),jl=J("Faces","Round emoji faces",{ogre:Ia,goblin:Fa,ghost:La,alien:Oa,alienMonster:Ra,angryFaceWithHorns:Na,skull:Ha,pileOfPoo:za,grinningFace:ja,beamingFaceWithSmilingEyes:Qa,faceWithTearsOfJoy:Ua,grinningFaceWithBigEyes:Wa,grinningFaceWithSmilingEyes:Ga,grinningFaceWithSweat:qa,grinningSquitingFace:Va,smillingFaceWithHalo:Ya,smilingFaceWithHorns:Xa,winkingFace:Za,smilingFaceWithSmilingEyes:Ja,faceSavoringFood:Ka,relievedFace:$a,smilingFaceWithHeartEyes:tc,smilingFaceWithSunglasses:ec,smirkingFace:nc,neutralFace:ic,expressionlessFace:sc,unamusedFace:oc,downcastFaceWithSweat:rc,pensiveFace:ac,confusedFace:cc,confoundedFace:lc,kissingFace:uc,faceBlowingAKiss:hc,kissingFaceWithSmilingEyes:dc,kissingFaceWithClosedEyes:Ac,faceWithTongue:pc,winkingFaceWithTongue:gc,squintingFaceWithTongue:fc,disappointedFace:mc,worriedFace:vc,angryFace:yc,poutingFace:wc,cryingFace:bc,perseveringFace:xc,faceWithSteamFromNose:Cc,sadButRelievedFace:Dc,frowningFaceWithOpenMouth:Sc,anguishedFace:_c,fearfulFace:Ec,wearyFace:Pc,sleepyFace:Mc,tiredFace:Bc,grimacingFace:kc,loudlyCryingFace:Tc,faceWithOpenMouth:Ic,hushedFace:Fc,anxiousFaceWithSweat:Lc,faceScreamingInFear:Oc,astonishedFace:Rc,flushedFace:Nc,sleepingFace:Hc,dizzyFace:zc,faceWithoutMouth:jc,faceWithMedicalMask:Qc,grinningCatWithSmilingEyes:Uc,catWithTearsOfJoy:Wc,grinningCat:Gc,smilingCatWithHeartEyes:qc,catWithWrySmile:Vc,kissingCat:Yc,poutingCat:Xc,cryingCat:Zc,wearyCat:Jc,slightlyFrowningFace:Kc,slightlySmilingFace:$c,updisdeDownFace:tl,faceWithRollingEyes:el,seeNoEvilMonkey:nl,hearNoEvilMonkey:il,speakNoEvilMonkey:sl,zipperMouthFace:ol,moneyMouthFace:rl,faceWithThermometer:al,nerdFace:cl,thinkingFace:ll,faceWithHeadBandage:ul,robot:hl,huggingFace:dl,cowboyHatFace:Al,clownFace:pl,nauseatedFace:gl,rollingOnTheFloorLaughing:fl,droolingFace:ml,lyingFace:vl,sneezingFace:yl,faceWithRaisedEyebrow:wl,starStruck:bl,zanyFace:xl,shushingFace:Cl,faceWithSymbolsOnMouth:Dl,faceWithHandOverMouth:Sl,faceVomitting:_l,explodingHead:El,smilingFaceWithHearts:Pl,yawningFace:Ml,partyingFace:Bl,woozyFace:kl,hotFace:Tl,coldFace:Il,pleadingFace:Fl,faceWithMonocle:Ll,skullAndCrossbones:Ol,frowningFace:Rl,smilingFace:Nl,speakingHead:Hl,bust:zl}),Ql=X("💋","Kiss Mark"),Ul=X("💌","Love Letter"),Wl=X("💓","Beating Heart"),Gl=X("💔","Broken Heart"),ql=X("💕","Two Hearts"),Vl=X("💖","Sparkling Heart"),Yl=X("💗","Growing Heart"),Xl=X("💘","Heart with Arrow"),Zl=X("💙","Blue Heart"),Jl=X("💚","Green Heart"),Kl=X("💛","Yellow Heart"),$l=X("💜","Purple Heart"),tu=X("💝","Heart with Ribbon"),eu=X("💞","Revolving Hearts"),nu=X("💟","Heart Decoration"),iu=X("🖤","Black Heart"),su=X("🤍","White Heart"),ou=X("🤎","Brown Heart"),ru=X("🧡","Orange Heart"),au=X("❣️","Heart Exclamation"),cu=X("❤️","Red Heart"),lu=J("Love","Hearts and kisses",{kissMark:Ql,loveLetter:Ul,beatingHeart:Wl,brokenHeart:Gl,twoHearts:ql,sparklingHeart:Vl,growingHeart:Yl,heartWithArrow:Xl,blueHeart:Zl,greenHeart:Jl,yellowHeart:Kl,purpleHeart:$l,heartWithRibbon:tu,revolvingHearts:eu,heartDecoration:nu,blackHeart:iu,whiteHeart:su,brownHeart:ou,orangeHeart:ru,heartExclamation:au,redHeart:cu}),uu=X("💢","Anger Symbol"),hu=X("💣","Bomb"),du=X("💤","Zzz"),Au=X("💥","Collision"),pu=X("💦","Sweat Droplets"),gu=X("💨","Dashing Away"),fu=X("💫","Dizzy"),mu=X("💬","Speech Balloon"),vu=X("💭","Thought Balloon"),yu=X("💯","Hundred Points"),wu=X("🕳️","Hole"),bu=X("🗨️","Left Speech Bubble"),xu=X("🗩️","Right Speech Bubble"),Cu=X("🗪️","Conversation Bubbles 2"),Du=X("🗫️","Conversation Bubbles 3"),Su=X("🗬️","Left Thought Bubble"),_u=X("🗭️","Right Thought Bubble"),Eu=X("🗮️","Left Anger Bubble"),Pu=X("🗯️","Right Anger Bubble"),Mu=X("🗰️","Anger Bubble"),Bu=X("🗱️","Anger Bubble Lightning"),ku=X("🗲️","Lightning Bolt"),Tu=Z("Cartoon","Cartoon symbols",uu,hu,du,Au,pu,gu,fu,mu,vu,yu,wu,bu,xu,Cu,Du,Su,_u,Eu,Pu,Mu,Bu,ku),Iu=X("👆","Backhand Index Pointing Up"),Fu=X("👇","Backhand Index Pointing Down"),Lu=X("👈","Backhand Index Pointing Left"),Ou=X("👉","Backhand Index Pointing Right"),Ru=X("👊","Oncoming Fist"),Nu=X("👋","Waving Hand"),Hu=X("🖏","OK Hand"),zu=X("👍","Thumbs Up"),ju=X("👎","Thumbs Down"),Qu=X("👏","Clapping Hands"),Uu=X("👐","Open Hands"),Wu=X("💅","Nail Polish"),Gu=X("🖐️","Hand with Fingers Splayed"),qu=X("🖑️","Hand with Fingers Splayed 2"),Vu=X("🖒","Thumbs Up 2"),Yu=X("🖓","Thumbs Down 2"),Xu=X("🖔","Peace Fingers"),Zu=X("🖕","Middle Finger"),Ju=X("🖖","Vulcan Salute"),Ku=X("🖗","Hand Pointing Down"),$u=X("🖘","Hand Pointing Left"),th=X("🖙","Hand Pointing Right"),eh=X("🖚","Hand Pointing Left 2"),nh=X("🖛","Hand Pointing Right 2"),ih=X("🖜","Index Pointing Left"),sh=X("🖝","Index Pointing Right"),oh=X("🖞","Index Pointing Up"),rh=X("🖟","Index Pointing Down"),ah=X("🖠","Index Pointing Up 2"),ch=X("🖡","Index Pointing Down 2"),lh=X("🖢","Index Pointing Up 3"),uh=X("🖣","Index Pointing Down 3"),hh=X("🙌","Raising Hands"),dh=X("🙏","Folded Hands"),Ah=X("🤏","Pinching Hand"),ph=X("🤘","Sign of the Horns"),gh=X("🤙","Call Me Hand"),fh=X("🤚","Raised Back of Hand"),mh=X("🤛","Left-Facing Fist"),vh=X("🤜","Right-Facing Fist"),yh=X("🤝","Handshake"),wh=X("🤞","Crossed Fingers"),bh=X("🤟","Love-You Gesture"),xh=X("🤲","Palms Up Together"),Ch=X("☝️","Index Pointing Up 4"),Dh=X("✊","Raised Fist"),Sh=X("✋","Raised Hand"),_h=X("✌️","Victory Hand"),Eh=X("✍️","Writing Hand"),Ph=Z("Hands","Hands pointing at things",Iu,Fu,Lu,Ou,Ru,Nu,Hu,zu,ju,Qu,Uu,Wu,Gu,qu,qu,Vu,Yu,Xu,Zu,Ju,Ku,$u,th,eh,nh,ih,sh,oh,rh,ah,ch,lh,uh,hh,dh,Ah,ph,gh,fh,mh,vh,yh,wh,bh,xh,Ch,Dh,Sh,_h,Eh),Mh=Z("Body Parts","General body parts",X("👀","Eyes"),X("👁️","Eye"),X("👁️‍🗨️","Eye in Speech Bubble"),X("👂","Ear"),X("👃","Nose"),X("👄","Mouth"),X("👅","Tongue"),X("💪","Flexed Biceps"),X("🤳","Selfie"),X("🦴","Bone"),X("🦵","Leg"),X("🦶","Foot"),X("🦷","Tooth"),X("🦻","Ear with Hearing Aid"),X("🦾","Mechanical Arm"),X("🦿","Mechanical Leg"),X("🧠","Brain")),Bh=Z("Animals","Animals and insects",X("🐀","Rat"),X("🐁","Mouse"),X("🐂","Ox"),X("🐃","Water Buffalo"),X("🐄","Cow"),X("🐅","Tiger"),X("🐆","Leopard"),X("🐇","Rabbit"),X("🐈","Cat"),X("🐉","Dragon"),X("🐊","Crocodile"),X("🐋","Whale"),X("🐌","Snail"),X("🐍","Snake"),X("🐎","Horse"),X("🐏","Ram"),X("🐐","Goat"),X("🐑","Ewe"),X("🐒","Monkey"),X("🐓","Rooster"),X("🐔","Chicken"),X("🐕","Dog"),X("🐕‍🦺","Service Dog"),X("🐖","Pig"),X("🐗","Boar"),X("🐘","Elephant"),X("🐙","Octopus"),X("🐚","Spiral Shell"),X("🐛","Bug"),X("🐜","Ant"),X("🐝","Honeybee"),X("🐞","Lady Beetle"),X("🐟","Fish"),X("🐠","Tropical Fish"),X("🐡","Blowfish"),X("🐢","Turtle"),X("🐣","Hatching Chick"),X("🐤","Baby Chick"),X("🐥","Front-Facing Baby Chick"),X("🐦","Bird"),X("🐧","Penguin"),X("🐨","Koala"),X("🐩","Poodle"),X("🐪","Camel"),X("🐫","Two-Hump Camel"),X("🐬","Dolphin"),X("🐭","Mouse Face"),X("🐮","Cow Face"),X("🐯","Tiger Face"),X("🐰","Rabbit Face"),X("🐱","Cat Face"),X("🐲","Dragon Face"),X("🐳","Spouting Whale"),X("🐴","Horse Face"),X("🐵","Monkey Face"),X("🐶","Dog Face"),X("🐷","Pig Face"),X("🐸","Frog"),X("🐹","Hamster"),X("🐺","Wolf"),X("🐻","Bear"),X("🐻‍❄️","Polar Bear"),X("🐼","Panda"),X("🐽","Pig Nose"),X("🐾","Paw Prints"),X("🐿️","Chipmunk"),X("🕊️","Dove"),X("🕷️","Spider"),X("🕸️","Spider Web"),X("🦁","Lion"),X("🦂","Scorpion"),X("🦃","Turkey"),X("🦄","Unicorn"),X("🦅","Eagle"),X("🦆","Duck"),X("🦇","Bat"),X("🦈","Shark"),X("🦉","Owl"),X("🦊","Fox"),X("🦋","Butterfly"),X("🦌","Deer"),X("🦍","Gorilla"),X("🦎","Lizard"),X("🦏","Rhinoceros"),X("🦒","Giraffe"),X("🦓","Zebra"),X("🦔","Hedgehog"),X("🦕","Sauropod"),X("🦖","T-Rex"),X("🦗","Cricket"),X("🦘","Kangaroo"),X("🦙","Llama"),X("🦚","Peacock"),X("🦛","Hippopotamus"),X("🦜","Parrot"),X("🦝","Raccoon"),X("🦟","Mosquito"),X("🦠","Microbe"),X("🦡","Badger"),X("🦢","Swan"),X("🦥","Sloth"),X("🦦","Otter"),X("🦧","Orangutan"),X("🦨","Skunk"),X("🦩","Flamingo"),X("🦮","Guide Dog")),kh=X("💮","White Flower"),Th=Z("Plants","Flowers, trees, and things",X("🌱","Seedling"),X("🌲","Evergreen Tree"),X("🌳","Deciduous Tree"),X("🌴","Palm Tree"),X("🌵","Cactus"),X("🌷","Tulip"),X("🌸","Cherry Blossom"),X("🌹","Rose"),X("🌺","Hibiscus"),X("🌻","Sunflower"),X("🌼","Blossom"),fr,X("🌿","Herb"),X("🍀","Four Leaf Clover"),X("🍁","Maple Leaf"),X("🍂","Fallen Leaf"),X("🍃","Leaf Fluttering in Wind"),X("🏵️","Rosette"),X("💐","Bouquet"),kh,X("🥀","Wilted Flower"),X("☘️","Shamrock")),Ih=X("🍌","Banana"),Fh=Z("Food","Food, drink, and utensils",X("🌭","Hot Dog"),X("🌮","Taco"),X("🌯","Burrito"),X("🌰","Chestnut"),X("🌶️","Hot Pepper"),X("🌽","Ear of Corn"),X("🍄","Mushroom"),X("🍅","Tomato"),X("🍆","Eggplant"),X("🍇","Grapes"),X("🍈","Melon"),X("🍉","Watermelon"),X("🍊","Tangerine"),X("🍋","Lemon"),Ih,X("🍍","Pineapple"),X("🍎","Red Apple"),X("🍏","Green Apple"),X("🍐","Pear"),X("🍑","Peach"),X("🍒","Cherries"),X("🍓","Strawberry"),X("🍔","Hamburger"),X("🍕","Pizza"),X("🍖","Meat on Bone"),X("🍗","Poultry Leg"),X("🍘","Rice Cracker"),X("🍙","Rice Ball"),X("🍚","Cooked Rice"),X("🍛","Curry Rice"),X("🍜","Steaming Bowl"),X("🍝","Spaghetti"),X("🍞","Bread"),X("🍟","French Fries"),X("🍠","Roasted Sweet Potato"),X("🍡","Dango"),X("🍢","Oden"),X("🍣","Sushi"),X("🍤","Fried Shrimp"),X("🍥","Fish Cake with Swirl"),X("🍱","Bento Box"),X("🍲","Pot of Food"),vr,X("🍿","Popcorn"),X("🥐","Croissant"),X("🥑","Avocado"),X("🥒","Cucumber"),X("🥓","Bacon"),X("🥔","Potato"),X("🥕","Carrot"),X("🥖","Baguette Bread"),X("🥗","Green Salad"),X("🥘","Shallow Pan of Food"),X("🥙","Stuffed Flatbread"),X("🥚","Egg"),X("🥜","Peanuts"),X("🥝","Kiwi Fruit"),X("🥞","Pancakes"),X("🥟","Dumpling"),X("🥠","Fortune Cookie"),X("🥡","Takeout Box"),X("🥣","Bowl with Spoon"),X("🥥","Coconut"),X("🥦","Broccoli"),X("🥨","Pretzel"),X("🥩","Cut of Meat"),X("🥪","Sandwich"),X("🥫","Canned Food"),X("🥬","Leafy Green"),X("🥭","Mango"),X("🥮","Moon Cake"),X("🥯","Bagel"),X("🦀","Crab"),X("🦐","Shrimp"),X("🦑","Squid"),X("🦞","Lobster"),X("🦪","Oyster"),X("🧀","Cheese Wedge"),X("🧂","Salt"),X("🧄","Garlic"),X("🧅","Onion"),X("🧆","Falafel"),X("🧇","Waffle"),X("🧈","Butter"),X("🍦","Soft Ice Cream"),X("🍧","Shaved Ice"),X("🍨","Ice Cream"),X("🍩","Doughnut"),X("🍪","Cookie"),X("🍫","Chocolate Bar"),X("🍬","Candy"),X("🍭","Lollipop"),X("🍮","Custard"),X("🍯","Honey Pot"),X("🍰","Shortcake"),X("🎂","Birthday Cake"),X("🥧","Pie"),X("🧁","Cupcake"),X("🍵","Teacup Without Handle"),X("🍶","Sake"),X("🍷","Wine Glass"),X("🍸","Cocktail Glass"),X("🍹","Tropical Drink"),X("🍺","Beer Mug"),X("🍻","Clinking Beer Mugs"),X("🍼","Baby Bottle"),X("🍾","Bottle with Popping Cork"),X("🥂","Clinking Glasses"),X("🥃","Tumbler Glass"),X("🥛","Glass of Milk"),X("🥤","Cup with Straw"),X("🧃","Beverage Box"),X("🧉","Mate"),X("🧊","Ice"),X("☕","Hot Beverage"),X("🍴","Fork and Knife"),X("🍽️","Fork and Knife with Plate"),X("🏺","Amphora"),X("🔪","Kitchen Knife"),X("🥄","Spoon"),X("🥢","Chopsticks")),Lh=(Z("National Flags","Flags of countries from around the world",X("🇦🇨","Flag: Ascension Island"),X("🇦🇩","Flag: Andorra"),X("🇦🇪","Flag: United Arab Emirates"),X("🇦🇫","Flag: Afghanistan"),X("🇦🇬","Flag: Antigua & Barbuda"),X("🇦🇮","Flag: Anguilla"),X("🇦🇱","Flag: Albania"),X("🇦🇲","Flag: Armenia"),X("🇦🇴","Flag: Angola"),X("🇦🇶","Flag: Antarctica"),X("🇦🇷","Flag: Argentina"),X("🇦🇸","Flag: American Samoa"),X("🇦🇹","Flag: Austria"),X("🇦🇺","Flag: Australia"),X("🇦🇼","Flag: Aruba"),X("🇦🇽","Flag: Åland Islands"),X("🇦🇿","Flag: Azerbaijan"),X("🇧🇦","Flag: Bosnia & Herzegovina"),X("🇧🇧","Flag: Barbados"),X("🇧🇩","Flag: Bangladesh"),X("🇧🇪","Flag: Belgium"),X("🇧🇫","Flag: Burkina Faso"),X("🇧🇬","Flag: Bulgaria"),X("🇧🇭","Flag: Bahrain"),X("🇧🇮","Flag: Burundi"),X("🇧🇯","Flag: Benin"),X("🇧🇱","Flag: St. Barthélemy"),X("🇧🇲","Flag: Bermuda"),X("🇧🇳","Flag: Brunei"),X("🇧🇴","Flag: Bolivia"),X("🇧🇶","Flag: Caribbean Netherlands"),X("🇧🇷","Flag: Brazil"),X("🇧🇸","Flag: Bahamas"),X("🇧🇹","Flag: Bhutan"),X("🇧🇻","Flag: Bouvet Island"),X("🇧🇼","Flag: Botswana"),X("🇧🇾","Flag: Belarus"),X("🇧🇿","Flag: Belize"),X("🇨🇦","Flag: Canada"),X("🇨🇨","Flag: Cocos (Keeling) Islands"),X("🇨🇩","Flag: Congo - Kinshasa"),X("🇨🇫","Flag: Central African Republic"),X("🇨🇬","Flag: Congo - Brazzaville"),X("🇨🇭","Flag: Switzerland"),X("🇨🇮","Flag: Côte d’Ivoire"),X("🇨🇰","Flag: Cook Islands"),X("🇨🇱","Flag: Chile"),X("🇨🇲","Flag: Cameroon"),X("🇨🇳","Flag: China"),X("🇨🇴","Flag: Colombia"),X("🇨🇵","Flag: Clipperton Island"),X("🇨🇷","Flag: Costa Rica"),X("🇨🇺","Flag: Cuba"),X("🇨🇻","Flag: Cape Verde"),X("🇨🇼","Flag: Curaçao"),X("🇨🇽","Flag: Christmas Island"),X("🇨🇾","Flag: Cyprus"),X("🇨🇿","Flag: Czechia"),X("🇩🇪","Flag: Germany"),X("🇩🇬","Flag: Diego Garcia"),X("🇩🇯","Flag: Djibouti"),X("🇩🇰","Flag: Denmark"),X("🇩🇲","Flag: Dominica"),X("🇩🇴","Flag: Dominican Republic"),X("🇩🇿","Flag: Algeria"),X("🇪🇦","Flag: Ceuta & Melilla"),X("🇪🇨","Flag: Ecuador"),X("🇪🇪","Flag: Estonia"),X("🇪🇬","Flag: Egypt"),X("🇪🇭","Flag: Western Sahara"),X("🇪🇷","Flag: Eritrea"),X("🇪🇸","Flag: Spain"),X("🇪🇹","Flag: Ethiopia"),X("🇪🇺","Flag: European Union"),X("🇫🇮","Flag: Finland"),X("🇫🇯","Flag: Fiji"),X("🇫🇰","Flag: Falkland Islands"),X("🇫🇲","Flag: Micronesia"),X("🇫🇴","Flag: Faroe Islands"),X("🇫🇷","Flag: France"),X("🇬🇦","Flag: Gabon"),X("🇬🇧","Flag: United Kingdom"),X("🇬🇩","Flag: Grenada"),X("🇬🇪","Flag: Georgia"),X("🇬🇫","Flag: French Guiana"),X("🇬🇬","Flag: Guernsey"),X("🇬🇭","Flag: Ghana"),X("🇬🇮","Flag: Gibraltar"),X("🇬🇱","Flag: Greenland"),X("🇬🇲","Flag: Gambia"),X("🇬🇳","Flag: Guinea"),X("🇬🇵","Flag: Guadeloupe"),X("🇬🇶","Flag: Equatorial Guinea"),X("🇬🇷","Flag: Greece"),X("🇬🇸","Flag: South Georgia & South Sandwich Islands"),X("🇬🇹","Flag: Guatemala"),X("🇬🇺","Flag: Guam"),X("🇬🇼","Flag: Guinea-Bissau"),X("🇬🇾","Flag: Guyana"),X("🇭🇰","Flag: Hong Kong SAR China"),X("🇭🇲","Flag: Heard & McDonald Islands"),X("🇭🇳","Flag: Honduras"),X("🇭🇷","Flag: Croatia"),X("🇭🇹","Flag: Haiti"),X("🇭🇺","Flag: Hungary"),X("🇮🇨","Flag: Canary Islands"),X("🇮🇩","Flag: Indonesia"),X("🇮🇪","Flag: Ireland"),X("🇮🇱","Flag: Israel"),X("🇮🇲","Flag: Isle of Man"),X("🇮🇳","Flag: India"),X("🇮🇴","Flag: British Indian Ocean Territory"),X("🇮🇶","Flag: Iraq"),X("🇮🇷","Flag: Iran"),X("🇮🇸","Flag: Iceland"),X("🇮🇹","Flag: Italy"),X("🇯🇪","Flag: Jersey"),X("🇯🇲","Flag: Jamaica"),X("🇯🇴","Flag: Jordan"),X("🇯🇵","Flag: Japan"),X("🇰🇪","Flag: Kenya"),X("🇰🇬","Flag: Kyrgyzstan"),X("🇰🇭","Flag: Cambodia"),X("🇰🇮","Flag: Kiribati"),X("🇰🇲","Flag: Comoros"),X("🇰🇳","Flag: St. Kitts & Nevis"),X("🇰🇵","Flag: North Korea"),X("🇰🇷","Flag: South Korea"),X("🇰🇼","Flag: Kuwait"),X("🇰🇾","Flag: Cayman Islands"),X("🇰🇿","Flag: Kazakhstan"),X("🇱🇦","Flag: Laos"),X("🇱🇧","Flag: Lebanon"),X("🇱🇨","Flag: St. Lucia"),X("🇱🇮","Flag: Liechtenstein"),X("🇱🇰","Flag: Sri Lanka"),X("🇱🇷","Flag: Liberia"),X("🇱🇸","Flag: Lesotho"),X("🇱🇹","Flag: Lithuania"),X("🇱🇺","Flag: Luxembourg"),X("🇱🇻","Flag: Latvia"),X("🇱🇾","Flag: Libya"),X("🇲🇦","Flag: Morocco"),X("🇲🇨","Flag: Monaco"),X("🇲🇩","Flag: Moldova"),X("🇲🇪","Flag: Montenegro"),X("🇲🇫","Flag: St. Martin"),X("🇲🇬","Flag: Madagascar"),X("🇲🇭","Flag: Marshall Islands"),X("🇲🇰","Flag: North Macedonia"),X("🇲🇱","Flag: Mali"),X("🇲🇲","Flag: Myanmar (Burma)"),X("🇲🇳","Flag: Mongolia"),X("🇲🇴","Flag: Macao Sar China"),X("🇲🇵","Flag: Northern Mariana Islands"),X("🇲🇶","Flag: Martinique"),X("🇲🇷","Flag: Mauritania"),X("🇲🇸","Flag: Montserrat"),X("🇲🇹","Flag: Malta"),X("🇲🇺","Flag: Mauritius"),X("🇲🇻","Flag: Maldives"),X("🇲🇼","Flag: Malawi"),X("🇲🇽","Flag: Mexico"),X("🇲🇾","Flag: Malaysia"),X("🇲🇿","Flag: Mozambique"),X("🇳🇦","Flag: Namibia"),X("🇳🇨","Flag: New Caledonia"),X("🇳🇪","Flag: Niger"),X("🇳🇫","Flag: Norfolk Island"),X("🇳🇬","Flag: Nigeria"),X("🇳🇮","Flag: Nicaragua"),X("🇳🇱","Flag: Netherlands"),X("🇳🇴","Flag: Norway"),X("🇳🇵","Flag: Nepal"),X("🇳🇷","Flag: Nauru"),X("🇳🇺","Flag: Niue"),X("🇳🇿","Flag: New Zealand"),X("🇴🇲","Flag: Oman"),X("🇵🇦","Flag: Panama"),X("🇵🇪","Flag: Peru"),X("🇵🇫","Flag: French Polynesia"),X("🇵🇬","Flag: Papua New Guinea"),X("🇵🇭","Flag: Philippines"),X("🇵🇰","Flag: Pakistan"),X("🇵🇱","Flag: Poland"),X("🇵🇲","Flag: St. Pierre & Miquelon"),X("🇵🇳","Flag: Pitcairn Islands"),X("🇵🇷","Flag: Puerto Rico"),X("🇵🇸","Flag: Palestinian Territories"),X("🇵🇹","Flag: Portugal"),X("🇵🇼","Flag: Palau"),X("🇵🇾","Flag: Paraguay"),X("🇶🇦","Flag: Qatar"),X("🇷🇪","Flag: Réunion"),X("🇷🇴","Flag: Romania"),X("🇷🇸","Flag: Serbia"),X("🇷🇺","Flag: Russia"),X("🇷🇼","Flag: Rwanda"),X("🇸🇦","Flag: Saudi Arabia"),X("🇸🇧","Flag: Solomon Islands"),X("🇸🇨","Flag: Seychelles"),X("🇸🇩","Flag: Sudan"),X("🇸🇪","Flag: Sweden"),X("🇸🇬","Flag: Singapore"),X("🇸🇭","Flag: St. Helena"),X("🇸🇮","Flag: Slovenia"),X("🇸🇯","Flag: Svalbard & Jan Mayen"),X("🇸🇰","Flag: Slovakia"),X("🇸🇱","Flag: Sierra Leone"),X("🇸🇲","Flag: San Marino"),X("🇸🇳","Flag: Senegal"),X("🇸🇴","Flag: Somalia"),X("🇸🇷","Flag: Suriname"),X("🇸🇸","Flag: South Sudan"),X("🇸🇹","Flag: São Tomé & Príncipe"),X("🇸🇻","Flag: El Salvador"),X("🇸🇽","Flag: Sint Maarten"),X("🇸🇾","Flag: Syria"),X("🇸🇿","Flag: Eswatini"),X("🇹🇦","Flag: Tristan Da Cunha"),X("🇹🇨","Flag: Turks & Caicos Islands"),X("🇹🇩","Flag: Chad"),X("🇹🇫","Flag: French Southern Territories"),X("🇹🇬","Flag: Togo"),X("🇹🇭","Flag: Thailand"),X("🇹🇯","Flag: Tajikistan"),X("🇹🇰","Flag: Tokelau"),X("🇹🇱","Flag: Timor-Leste"),X("🇹🇲","Flag: Turkmenistan"),X("🇹🇳","Flag: Tunisia"),X("🇹🇴","Flag: Tonga"),X("🇹🇷","Flag: Turkey"),X("🇹🇹","Flag: Trinidad & Tobago"),X("🇹🇻","Flag: Tuvalu"),X("🇹🇼","Flag: Taiwan"),X("🇹🇿","Flag: Tanzania"),X("🇺🇦","Flag: Ukraine"),X("🇺🇬","Flag: Uganda"),X("🇺🇲","Flag: U.S. Outlying Islands"),X("🇺🇳","Flag: United Nations"),X("🇺🇸","Flag: United States"),X("🇺🇾","Flag: Uruguay"),X("🇺🇿","Flag: Uzbekistan"),X("🇻🇦","Flag: Vatican City"),X("🇻🇨","Flag: St. Vincent & Grenadines"),X("🇻🇪","Flag: Venezuela"),X("🇻🇬","Flag: British Virgin Islands"),X("🇻🇮","Flag: U.S. Virgin Islands"),X("🇻🇳","Flag: Vietnam"),X("🇻🇺","Flag: Vanuatu"),X("🇼🇫","Flag: Wallis & Futuna"),X("🇼🇸","Flag: Samoa"),X("🇽🇰","Flag: Kosovo"),X("🇾🇪","Flag: Yemen"),X("🇾🇹","Flag: Mayotte"),X("🇿🇦","Flag: South Africa"),X("🇿🇲","Flag: Zambia"),X("🇿🇼","Flag: Zimbabwe")),Z("Flags","Basic flags",X("🎌","Crossed Flags"),X("🏁","Chequered Flag"),X("🏳️","White Flag"),X("🏳️‍🌈","Rainbow Flag"),X("🏴","Black Flag"),X("🏴󠁧󠁢󠁥󠁮󠁧󠁿","Flag: England"),X("🏴󠁧󠁢󠁳󠁣󠁴󠁿","Flag: Scotland"),X("🏴󠁧󠁢󠁷󠁬󠁳󠁿","Flag: Wales"),X("🚩","Triangular Flag"))),Oh=X("🏍️","Motorcycle"),Rh=X("🏎️","Racing Car"),Nh=X("💺","Seat"),Hh=X("🚁","Helicopter"),zh=X("🚂","Locomotive"),jh=X("🚃","Railway Car"),Qh=X("🚄","High-Speed Train"),Uh=X("🚅","Bullet Train"),Wh=X("🚆","Train"),Gh=X("🚇","Metro"),qh=X("🚈","Light Rail"),Vh=X("🚉","Station"),Yh=X("🚊","Tram"),Xh=X("🚋","Tram Car"),Zh=X("🚌","Bus"),Jh=X("🚍","Oncoming Bus"),Kh=X("🚎","Trolleybus"),$h=X("🚏","Bus Stop"),td=X("🚐","Minibus"),ed=X("🚑","Ambulance"),nd=(X("🚓","Police Car"),X("🚔","Oncoming Police Car"),X("🚕","Taxi")),id=X("🚖","Oncoming Taxi"),sd=X("🚗","Automobile"),od=X("🚘","Oncoming Automobile"),rd=X("🚙","Sport Utility Vehicle"),ad=X("🚚","Delivery Truck"),cd=X("🚛","Articulated Lorry"),ld=X("🚜","Tractor"),ud=X("🚝","Monorail"),hd=X("🚞","Mountain Railway"),dd=X("🚟","Suspension Railway"),Ad=X("🚠","Mountain Cableway"),pd=X("🚡","Aerial Tramway"),gd=X("🚢","Ship"),fd=X("🚤","Speedboat"),md=X("🚥","Horizontal Traffic Light"),vd=X("🚦","Vertical Traffic Light"),yd=X("🚧","Construction"),wd=(X("🚨","Police Car Light"),X("🚲","Bicycle")),bd=X("🛑","Stop Sign"),xd=X("🛢️","Oil Drum"),Cd=X("🛣️","Motorway"),Dd=X("🛤️","Railway Track"),Sd=X("🛥️","Motor Boat"),_d=X("🛩️","Small Airplane"),Ed=X("🛫","Airplane Departure"),Pd=X("🛬","Airplane Arrival"),Md=X("🛰️","Satellite"),Bd=X("🛳️","Passenger Ship"),kd=X("🛴","Kick Scooter"),Td=X("🛵","Motor Scooter"),Id=X("🛶","Canoe"),Fd=X("🛸","Flying Saucer"),Ld=X("🛹","Skateboard"),Od=X("🛺","Auto Rickshaw"),Rd=X("🪂","Parachute"),Nd=X("⚓","Anchor"),Hd=X("⛴️","Ferry"),zd=X("⛵","Sailboat"),jd=X("⛽","Fuel Pump"),Qd=Z("Vehicles","Things that go",Oh,Rh,Nh,Pr,Hh,zh,jh,Qh,Uh,Wh,Gh,qh,Vh,Yh,Xh,Zh,Jh,Kh,$h,td,ed,_r,nd,id,sd,od,rd,ad,cd,ld,ud,hd,dd,Ad,pd,gd,fd,md,vd,yd,wd,bd,xd,Cd,Dd,Sd,_d,Ed,Pd,Md,Bd,kd,Td,Id,Fd,Ld,Od,$r,ea,Rd,Nd,Hd,zd,jd,Br),Ud=(Z("Blood Types","Blood types",X("🅰","A Button (Blood Type)"),X("🅱","B Button (Blood Type)"),X("🅾","O Button (Blood Type)"),X("🆎","AB Button (Blood Type)")),Z("Regions","Region indicators",X("🇦","Regional Indicator Symbol Letter A"),X("🇧","Regional Indicator Symbol Letter B"),X("🇨","Regional Indicator Symbol Letter C"),X("🇩","Regional Indicator Symbol Letter D"),X("🇪","Regional Indicator Symbol Letter E"),X("🇫","Regional Indicator Symbol Letter F"),X("🇬","Regional Indicator Symbol Letter G"),X("🇭","Regional Indicator Symbol Letter H"),X("🇮","Regional Indicator Symbol Letter I"),X("🇯","Regional Indicator Symbol Letter J"),X("🇰","Regional Indicator Symbol Letter K"),X("🇱","Regional Indicator Symbol Letter L"),X("🇲","Regional Indicator Symbol Letter M"),X("🇳","Regional Indicator Symbol Letter N"),X("🇴","Regional Indicator Symbol Letter O"),X("🇵","Regional Indicator Symbol Letter P"),X("🇶","Regional Indicator Symbol Letter Q"),X("🇷","Regional Indicator Symbol Letter R"),X("🇸","Regional Indicator Symbol Letter S"),X("🇹","Regional Indicator Symbol Letter T"),X("🇺","Regional Indicator Symbol Letter U"),X("🇻","Regional Indicator Symbol Letter V"),X("🇼","Regional Indicator Symbol Letter W"),X("🇽","Regional Indicator Symbol Letter X"),X("🇾","Regional Indicator Symbol Letter Y"),X("🇿","Regional Indicator Symbol Letter Z")),Z("Japanese","Japanse symbology",X("🔰","Japanese Symbol for Beginner"),X("🈁","Japanese “Here” Button"),X("🈂️","Japanese “Service Charge” Button"),X("🈚","Japanese “Free of Charge” Button"),X("🈯","Japanese “Reserved” Button"),X("🈲","Japanese “Prohibited” Button"),X("🈳","Japanese “Vacancy” Button"),X("🈴","Japanese “Passing Grade” Button"),X("🈵","Japanese “No Vacancy” Button"),X("🈶","Japanese “Not Free of Charge” Button"),X("🈷️","Japanese “Monthly Amount” Button"),X("🈸","Japanese “Application” Button"),X("🈹","Japanese “Discount” Button"),X("🈺","Japanese “Open for Business” Button"),X("🉐","Japanese “Bargain” Button"),X("🉑","Japanese “Acceptable” Button"),X("㊗️","Japanese “Congratulations” Button"),X("㊙️","Japanese “Secret” Button")),Z("Clocks","Time-keeping pieces",X("🕐","One O’Clock"),X("🕑","Two O’Clock"),X("🕒","Three O’Clock"),X("🕓","Four O’Clock"),X("🕔","Five O’Clock"),X("🕕","Six O’Clock"),X("🕖","Seven O’Clock"),X("🕗","Eight O’Clock"),X("🕘","Nine O’Clock"),X("🕙","Ten O’Clock"),X("🕚","Eleven O’Clock"),X("🕛","Twelve O’Clock"),X("🕜","One-Thirty"),X("🕝","Two-Thirty"),X("🕞","Three-Thirty"),X("🕟","Four-Thirty"),X("🕠","Five-Thirty"),X("🕡","Six-Thirty"),X("🕢","Seven-Thirty"),X("🕣","Eight-Thirty"),X("🕤","Nine-Thirty"),X("🕥","Ten-Thirty"),X("🕦","Eleven-Thirty"),X("🕧","Twelve-Thirty"),X("🕰️","Mantelpiece Clock"),X("⌚","Watch"),X("⏰","Alarm Clock"),X("⏱️","Stopwatch"),X("⏲️","Timer Clock"),X("⌛","Hourglass Done"),X("⏳","Hourglass Not Done"))),Wd=X("🔃️","Clockwise Vertical Arrows"),Gd=X("🔄️","Counterclockwise Arrows Button"),qd=X("↔️","Left-Right Arrow"),Vd=X("↕️","Up-Down Arrow"),Yd=X("↖️","Up-Left Arrow"),Xd=X("↗️","Up-Right Arrow"),Zd=X("↘","Down-Right Arrow"),Jd=(X("↘︎","Down-Right Arrow"),X("↘️","Down-Right Arrow")),Kd=X("↙️","Down-Left Arrow"),$d=X("↩️","Right Arrow Curving Left"),tA=X("↪️","Left Arrow Curving Right"),eA=X("➡️","Right Arrow"),nA=X("⤴️","Right Arrow Curving Up"),iA=X("⤵️","Right Arrow Curving Down"),sA=X("⬅️","Left Arrow"),oA=X("⬆️","Up Arrow"),rA=X("⬇️","Down Arrow"),aA=Z("Arrows","Arrows pointing in different directions",Wd,Gd,qd,Vd,Yd,Xd,Jd,Kd,$d,tA,eA,nA,iA,sA,oA,rA),cA=Z("Shapes","Colored shapes",X("🔴","Red Circle"),X("🔵","Blue Circle"),X("🔶","Large Orange Diamond"),X("🔷","Large Blue Diamond"),X("🔸","Small Orange Diamond"),X("🔹","Small Blue Diamond"),X("🔺","Red Triangle Pointed Up"),X("🔻","Red Triangle Pointed Down"),X("🟠","Orange Circle"),X("🟡","Yellow Circle"),X("🟢","Green Circle"),X("🟣","Purple Circle"),X("🟤","Brown Circle"),X("⭕","Hollow Red Circle"),X("⚪","White Circle"),X("⚫","Black Circle"),X("🟥","Red Square"),X("🟦","Blue Square"),X("🟧","Orange Square"),X("🟨","Yellow Square"),X("🟩","Green Square"),X("🟪","Purple Square"),X("🟫","Brown Square"),X("🔲","Black Square Button"),X("🔳","White Square Button"),X("▪️","Black Small Square"),X("▫️","White Small Square"),X("◽","White Medium-Small Square"),X("◾","Black Medium-Small Square"),X("◻️","White Medium Square"),X("◼️","Black Medium Square"),X("⬛","Black Large Square"),X("⬜","White Large Square"),X("⭐","Star"),X("💠","Diamond with a Dot")),lA=X("🆑","CL Button"),uA=X("🆒","Cool Button"),hA=X("🆓","Free Button"),dA=X("🆔","ID Button"),AA=X("🆕","New Button"),pA=X("🆖","NG Button"),gA=X("🆗","OK Button"),fA=X("🆘","SOS Button"),mA=X("🆙","Up! Button"),vA=X("🆚","Vs Button"),yA=X("🔘","Radio Button"),wA=X("🔙","Back Arrow"),bA=X("🔚","End Arrow"),xA=X("🔛","On! Arrow"),CA=X("🔜","Soon Arrow"),DA=X("🔝","Top Arrow"),SA=X("☑️","Check Box with Check"),_A=X("🔠","Input Latin Uppercase"),EA=X("🔡","Input Latin Lowercase"),PA=X("🔢","Input Numbers"),MA=X("🔣","Input Symbols"),BA=X("🔤","Input Latin Letters"),kA=X("🔀","Shuffle Tracks Button"),TA=X("🔁","Repeat Button"),IA=X("🔂","Repeat Single Button"),FA=X("🔼","Upwards Button"),LA=X("🔽","Downwards Button"),OA=X("▶️","Play Button"),RA=X("◀️","Reverse Button"),NA=X("⏏️","Eject Button"),HA=X("⏩","Fast-Forward Button"),zA=X("⏪","Fast Reverse Button"),jA=X("⏫","Fast Up Button"),QA=X("⏬","Fast Down Button"),UA=X("⏭️","Next Track Button"),WA=X("⏮️","Last Track Button"),GA=X("⏯️","Play or Pause Button"),qA=X("⏸️","Pause Button"),VA=X("⏹️","Stop Button"),YA=X("⏺️","Record Button"),XA=Z("Buttons","Buttons",lA,uA,hA,dA,AA,pA,gA,fA,mA,vA,yA,wA,bA,xA,CA,DA,SA,_A,EA,PA,MA,BA,kA,TA,IA,FA,LA,OA,qA,RA,NA,HA,zA,jA,QA,UA,WA,GA,qA,VA,YA),ZA=Z("Zodiac","The symbology of astrology",X("♈","Aries"),X("♉","Taurus"),X("♊","Gemini"),X("♋","Cancer"),X("♌","Leo"),X("♍","Virgo"),X("♎","Libra"),X("♏","Scorpio"),X("♐","Sagittarius"),X("♑","Capricorn"),X("♒","Aquarius"),X("♓","Pisces"),X("⛎","Ophiuchus")),JA=(Z("Numbers","Numbers",X("0️","Digit Zero"),X("1️","Digit One"),X("2️","Digit Two"),X("3️","Digit Three"),X("4️","Digit Four"),X("5️","Digit Five"),X("6️","Digit Six"),X("7️","Digit Seven"),X("8️","Digit Eight"),X("9️","Digit Nine"),X("*️","Asterisk"),X("#️","Number Sign"),X("0️⃣","Keycap Digit Zero"),X("1️⃣","Keycap Digit One"),X("2️⃣","Keycap Digit Two"),X("3️⃣","Keycap Digit Three"),X("4️⃣","Keycap Digit Four"),X("5️⃣","Keycap Digit Five"),X("6️⃣","Keycap Digit Six"),X("7️⃣","Keycap Digit Seven"),X("8️⃣","Keycap Digit Eight"),X("9️⃣","Keycap Digit Nine"),X("*️⃣","Keycap Asterisk"),X("#️⃣","Keycap Number Sign"),X("🔟","Keycap: 10")),X("󠀫","Tag Plus Sign")),KA=X("󠀭","Tag Hyphen-Minus"),$A=(Z("Tags","Tags",X("󠀠","Tag Space"),X("󠀡","Tag Exclamation Mark"),X("󠀢","Tag Quotation Mark"),X("󠀣","Tag Number Sign"),X("󠀤","Tag Dollar Sign"),X("󠀥","Tag Percent Sign"),X("󠀦","Tag Ampersand"),X("󠀧","Tag Apostrophe"),X("󠀨","Tag Left Parenthesis"),X("󠀩","Tag Right Parenthesis"),X("󠀪","Tag Asterisk"),JA,X("󠀬","Tag Comma"),KA,X("󠀮","Tag Full Stop"),X("󠀯","Tag Solidus"),X("󠀰","Tag Digit Zero"),X("󠀱","Tag Digit One"),X("󠀲","Tag Digit Two"),X("󠀳","Tag Digit Three"),X("󠀴","Tag Digit Four"),X("󠀵","Tag Digit Five"),X("󠀶","Tag Digit Six"),X("󠀷","Tag Digit Seven"),X("󠀸","Tag Digit Eight"),X("󠀹","Tag Digit Nine"),X("󠀺","Tag Colon"),X("󠀻","Tag Semicolon"),X("󠀼","Tag Less-Than Sign"),X("󠀽","Tag Equals Sign"),X("󠀾","Tag Greater-Than Sign"),X("󠀿","Tag Question Mark"),X("󠁀","Tag Commercial at"),X("󠁁","Tag Latin Capital Letter a"),X("󠁂","Tag Latin Capital Letter B"),X("󠁃","Tag Latin Capital Letter C"),X("󠁄","Tag Latin Capital Letter D"),X("󠁅","Tag Latin Capital Letter E"),X("󠁆","Tag Latin Capital Letter F"),X("󠁇","Tag Latin Capital Letter G"),X("󠁈","Tag Latin Capital Letter H"),X("󠁉","Tag Latin Capital Letter I"),X("󠁊","Tag Latin Capital Letter J"),X("󠁋","Tag Latin Capital Letter K"),X("󠁌","Tag Latin Capital Letter L"),X("󠁍","Tag Latin Capital Letter M"),X("󠁎","Tag Latin Capital Letter N"),X("󠁏","Tag Latin Capital Letter O"),X("󠁐","Tag Latin Capital Letter P"),X("󠁑","Tag Latin Capital Letter Q"),X("󠁒","Tag Latin Capital Letter R"),X("󠁓","Tag Latin Capital Letter S"),X("󠁔","Tag Latin Capital Letter T"),X("󠁕","Tag Latin Capital Letter U"),X("󠁖","Tag Latin Capital Letter V"),X("󠁗","Tag Latin Capital Letter W"),X("󠁘","Tag Latin Capital Letter X"),X("󠁙","Tag Latin Capital Letter Y"),X("󠁚","Tag Latin Capital Letter Z"),X("󠁛","Tag Left Square Bracket"),X("󠁜","Tag Reverse Solidus"),X("󠁝","Tag Right Square Bracket"),X("󠁞","Tag Circumflex Accent"),X("󠁟","Tag Low Line"),X("󠁠","Tag Grave Accent"),X("󠁡","Tag Latin Small Letter a"),X("󠁢","Tag Latin Small Letter B"),X("󠁣","Tag Latin Small Letter C"),X("󠁤","Tag Latin Small Letter D"),X("󠁥","Tag Latin Small Letter E"),X("󠁦","Tag Latin Small Letter F"),X("󠁧","Tag Latin Small Letter G"),X("󠁨","Tag Latin Small Letter H"),X("󠁩","Tag Latin Small Letter I"),X("󠁪","Tag Latin Small Letter J"),X("󠁫","Tag Latin Small Letter K"),X("󠁬","Tag Latin Small Letter L"),X("󠁭","Tag Latin Small Letter M"),X("󠁮","Tag Latin Small Letter N"),X("󠁯","Tag Latin Small Letter O"),X("󠁰","Tag Latin Small Letter P"),X("󠁱","Tag Latin Small Letter Q"),X("󠁲","Tag Latin Small Letter R"),X("󠁳","Tag Latin Small Letter S"),X("󠁴","Tag Latin Small Letter T"),X("󠁵","Tag Latin Small Letter U"),X("󠁶","Tag Latin Small Letter V"),X("󠁷","Tag Latin Small Letter W"),X("󠁸","Tag Latin Small Letter X"),X("󠁹","Tag Latin Small Letter Y"),X("󠁺","Tag Latin Small Letter Z"),X("󠁻","Tag Left Curly Bracket"),X("󠁼","Tag Vertical Line"),X("󠁽","Tag Right Curly Bracket"),X("󠁾","Tag Tilde"),X("󠁿","Cancel Tag")),Z("Math","Math",X("✖️","Multiply"),X("➕","Plus"),X("➖","Minus"),X("➗","Divide"))),tp=Z("Games","Games",X("♠️","Spade Suit"),X("♣️","Club Suit"),X("♥️","Heart Suit",{color:"red"}),X("♦️","Diamond Suit",{color:"red"}),X("🀄","Mahjong Red Dragon"),X("🃏","Joker"),X("🎯","Direct Hit"),X("🎰","Slot Machine"),X("🎱","Pool 8 Ball"),X("🎲","Game Die"),X("🎳","Bowling"),X("🎴","Flower Playing Cards"),X("🧩","Puzzle Piece"),X("♟️","Chess Pawn"),X("🪀","Yo-Yo"),X("🪁","Kite")),ep=Z("Sports Equipment","Sports equipment",X("🎽","Running Shirt"),X("🎾","Tennis"),X("🎿","Skis"),X("🏀","Basketball"),X("🏅","Sports Medal"),X("🏆","Trophy"),X("🏈","American Football"),X("🏉","Rugby Football"),X("🏏","Cricket Game"),X("🏐","Volleyball"),X("🏑","Field Hockey"),X("🏒","Ice Hockey"),X("🏓","Ping Pong"),X("🏸","Badminton"),X("🛷","Sled"),X("🥅","Goal Net"),X("🥇","1st Place Medal"),X("🥈","2nd Place Medal"),X("🥉","3rd Place Medal"),X("🥊","Boxing Glove"),X("🥌","Curling Stone"),X("🥍","Lacrosse"),X("🥎","Softball"),X("🥏","Flying Disc"),X("⚽","Soccer Ball"),X("⚾","Baseball"),X("⛸️","Ice Skate")),np=Z("Clothing","Clothing",X("🎩","Top Hat"),X("🤿","Diving Mask"),X("👒","Woman’s Hat"),X("👓","Glasses"),X("🕶️","Sunglasses"),X("👔","Necktie"),X("👕","T-Shirt"),X("👖","Jeans"),X("👗","Dress"),X("👘","Kimono"),X("👙","Bikini"),X("👚","Woman’s Clothes"),X("👛","Purse"),X("👜","Handbag"),X("👝","Clutch Bag"),X("👞","Man’s Shoe"),X("👟","Running Shoe"),X("👠","High-Heeled Shoe"),X("👡","Woman’s Sandal"),X("👢","Woman’s Boot"),X("🥋","Martial Arts Uniform"),X("🥻","Sari"),X("🥼","Lab Coat"),X("🥽","Goggles"),X("🥾","Hiking Boot"),X("🥿","Flat Shoe"),Jr,X("🦺","Safety Vest"),X("🧢","Billed Cap"),X("🧣","Scarf"),X("🧤","Gloves"),X("🧥","Coat"),X("🧦","Socks"),X("🧿","Nazar Amulet"),X("🩰","Ballet Shoes"),X("🩱","One-Piece Swimsuit"),X("🩲","Briefs"),X("🩳","Shorts")),ip=Z("Town","Town",X("🏗️","Building Construction"),X("🏘️","Houses"),X("🏙️","Cityscape"),X("🏚️","Derelict House"),X("🏛️","Classical Building"),X("🏜️","Desert"),X("🏝️","Desert Island"),X("🏞️","National Park"),X("🏟️","Stadium"),X("🏠","House"),X("🏡","House with Garden"),X("🏢","Office Building"),X("🏣","Japanese Post Office"),X("🏤","Post Office"),X("🏥","Hospital"),X("🏦","Bank"),X("🏧","ATM Sign"),X("🏨","Hotel"),X("🏩","Love Hotel"),X("🏪","Convenience Store"),dr,X("🏬","Department Store"),xr,X("🌉","Bridge at Night"),X("⛲","Fountain"),X("🛍️","Shopping Bags"),X("🧾","Receipt"),X("🛒","Shopping Cart"),X("💈","Barber Pole"),X("💒","Wedding"),X("🗳️","Ballot Box with Ballot")),sp=Z("Music","Music",X("🎼","Musical Score"),X("🎶","Musical Notes"),X("🎵","Musical Note"),X("🎷","Saxophone"),X("🎸","Guitar"),X("🎹","Musical Keyboard"),X("🎺","Trumpet"),X("🎻","Violin"),X("🥁","Drum"),X("🪕","Banjo")),op=Z("Weather","Weather",X("🌄","Sunrise Over Mountains"),X("🌅","Sunrise"),X("🌆","Cityscape at Dusk"),X("🌇","Sunset"),X("🌃","Night with Stars"),X("🌂","Closed Umbrella"),X("☂️","Umbrella"),X("☔️","Umbrella with Rain Drops"),X("☃️","Snowman"),X("⛄","Snowman Without Snow"),X("☀️","Sun"),X("☁️","Cloud"),X("🌤️","Sun Behind Small Cloud"),X("⛅","Sun Behind Cloud"),X("🌥️","Sun Behind Large Cloud"),X("🌦️","Sun Behind Rain Cloud"),X("🌧️","Cloud with Rain"),X("🌨️","Cloud with Snow"),X("🌩️","Cloud with Lightning"),X("⛈️","Cloud with Lightning and Rain"),X("❄️","Snowflake"),X("🌀","Cyclone"),X("🌪️","Tornado"),X("🌬️","Wind Face"),X("🌊","Water Wave"),X("🌫️","Fog"),X("🌁","Foggy"),X("🌈","Rainbow"),X("🌡️","Thermometer")),rp=Z("Astronomy","Astronomy",X("🌌","Milky Way"),X("🌍","Globe Showing Europe-Africa"),X("🌎","Globe Showing Americas"),X("🌏","Globe Showing Asia-Australia"),X("🌐","Globe with Meridians"),X("🌑","New Moon"),X("🌒","Waxing Crescent Moon"),X("🌓","First Quarter Moon"),X("🌔","Waxing Gibbous Moon"),X("🌕","Full Moon"),X("🌖","Waning Gibbous Moon"),X("🌗","Last Quarter Moon"),X("🌘","Waning Crescent Moon"),X("🌙","Crescent Moon"),X("🌚","New Moon Face"),X("🌛","First Quarter Moon Face"),X("🌜","Last Quarter Moon Face"),X("🌝","Full Moon Face"),X("🌞","Sun with Face"),X("🌟","Glowing Star"),X("🌠","Shooting Star"),X("☄️","Comet"),X("🪐","Ringed Planet")),ap=Z("Finance","Finance",X("💰","Money Bag"),X("💱","Currency Exchange"),X("💲","Heavy Dollar Sign"),X("💳","Credit Card"),X("💴","Yen Banknote"),X("💵","Dollar Banknote"),X("💶","Euro Banknote"),X("💷","Pound Banknote"),X("💸","Money with Wings"),X("💹","Chart Increasing with Yen")),cp=Z("Writing","Writing",X("🖊️","Pen"),X("🖋️","Fountain Pen"),X("🖌️","Paintbrush"),X("🖍️","Crayon"),X("✏️","Pencil"),X("✒️","Black Nib")),lp=X("⚗️","Alembic"),up=X("⚙️","Gear"),hp=X("⚛️","Atom Symbol"),dp=X("⌨️","Keyboard"),Ap=X("☎️","Telephone"),pp=X("🎙️","Studio Microphone"),gp=X("🎚️","Level Slider"),fp=X("🎛️","Control Knobs"),mp=X("🎥","Movie Camera"),vp=X("🎧","Headphone"),yp=X("🎮","Video Game"),wp=X("💡","Light Bulb"),bp=X("💽","Computer Disk"),xp=X("💾","Floppy Disk"),Cp=X("💿","Optical Disk"),Dp=X("📀","DVD"),Sp=X("📞","Telephone Receiver"),_p=X("📟","Pager"),Ep=X("📠","Fax Machine"),Pp=X("📡","Satellite Antenna"),Mp=X("📢","Loudspeaker"),Bp=X("📣","Megaphone"),kp=X("📱","Mobile Phone"),Tp=X("📲","Mobile Phone with Arrow"),Ip=X("📳","Mobile Phone Vibrating"),Fp=X("📴","Mobile Phone Off"),Lp=X("📵","No Mobile Phone"),Op=X("📶","Antenna Bars"),Rp=X("📷","Camera"),Np=X("📸","Camera with Flash"),Hp=X("📹","Video Camera"),zp=X("📺","Television"),jp=X("📻","Radio"),Qp=X("📼","Videocassette"),Up=X("📽️","Film Projector"),Wp=(X("📾️","Portable Stereo"),X("🔅","Dim Button")),Gp=X("🔆","Bright Button"),qp=X("🔇","Muted Speaker"),Vp=X("🔈","Speaker Low Volume"),Yp=X("🔉","Speaker Medium Volume"),Xp=X("🔊","Speaker High Volume"),Zp=X("🔋","Battery"),Jp=X("🔌","Electric Plug"),Kp=X("🔍","Magnifying Glass Tilted Left"),$p=X("🔎","Magnifying Glass Tilted Right"),tg=X("🔏","Locked with Pen"),eg=X("🔐","Locked with Key"),ng=X("🔑","Key"),ig=X("🔒","Locked"),sg=X("🔓","Unlocked"),og=X("🔔","Bell"),rg=X("🔕","Bell with Slash"),ag=X("🔖","Bookmark"),cg=X("🔗","Link"),lg=X("🕹️","Joystick"),ug=X("🖥️","Desktop Computer"),hg=X("🖨️","Printer"),dg=X("🖱️","Computer Mouse"),Ag=X("🖲️","Trackball"),pg=(X("🖿","Black Folder"),X("🗀","Folder"),X("🗁","Open Folder"),X("🗂","Card Index Dividers")),gg=X("🗃","Card File Box"),fg=X("🗄","File Cabinet"),mg=(X("🗅","Empty Note"),X("🗆","Empty Note Page"),X("🗇","Empty Note Pad"),X("🗈","Note"),X("🗉","Note Page"),X("🗊","Note Pad"),X("🗋","Empty Document"),X("🗌","Empty Page"),X("🗍","Empty Pages"),X("🗎","Document"),X("🗏","Page"),X("🗐","Pages"),X("🗑","Wastebasket")),vg=X("🗒","Spiral Note Pad"),yg=X("🗓","Spiral Calendar"),wg=(X("🗔","Desktop Window"),X("🗕","Minimize"),X("🗖","Maximize"),X("🗗","Overlap"),X("🗘","Reload"),X("🗙","Close"),X("🗚","Increase Font Size"),X("🗛","Decrease Font Size"),X("🗜","Compression")),bg=X("🗝","Old Key"),xg=Z("Technology","Technology",lg,yp,wp,Or,Dr,bp,xp,Cp,Dp,ug,dp,hg,dg,Ag,Ap,Sp,_p,Ep,Pp,Mp,Bp,zp,jp,Qp,Up,pp,gp,fp,Fr,mp,vp,Rp,Np,Hp,kp,Fp,Tp,tg,eg,ig,sg,og,rg,ag,cg,Ip,Op,Wp,Gp,qp,Vp,Yp,Xp,Zp,Jp),Cg=Z("Mail","Mail",X("📤","Outbox Tray"),X("📥","Inbox Tray"),X("📦","Package"),X("📧","E-Mail"),X("📨","Incoming Envelope"),X("📩","Envelope with Arrow"),X("📪","Closed Mailbox with Lowered Flag"),X("📫","Closed Mailbox with Raised Flag"),X("📬","Open Mailbox with Raised Flag"),X("📭","Open Mailbox with Lowered Flag"),X("📮","Postbox"),X("📯","Postal Horn")),Dg=Z("Celebration","Celebration",X("🎀","Ribbon"),X("🎁","Wrapped Gift"),X("🎃","Jack-O-Lantern"),X("🎄","Christmas Tree"),X("🧨","Firecracker"),X("🎆","Fireworks"),X("🎇","Sparkler"),X("✨","Sparkles"),X("❇️","Sparkle"),X("🎈","Balloon"),X("🎉","Party Popper"),X("🎊","Confetti Ball"),X("🎋","Tanabata Tree"),X("🎍","Pine Decoration"),X("🎎","Japanese Dolls"),X("🎏","Carp Streamer"),X("🎐","Wind Chime"),X("🎑","Moon Viewing Ceremony"),X("🎒","Backpack"),ur,X("🧧","Red Envelope"),X("🏮","Red Paper Lantern"),X("🎖️","Military Medal")),Sg=Z("Tools","Tools",X("🎣","Fishing Pole"),X("🔦","Flashlight"),wr,X("🔨","Hammer"),X("🔩","Nut and Bolt"),X("🛠️","Hammer and Wrench"),X("🧭","Compass"),X("🧯","Fire Extinguisher"),X("🧰","Toolbox"),X("🧱","Brick"),X("🪓","Axe"),X("⚒️","Hammer and Pick"),X("⛏️","Pick"),X("⛑️","Rescue Worker’s Helmet"),X("⛓️","Chains"),wg),_g=Z("Office","Office",X("📁","File Folder"),X("📂","Open File Folder"),X("📃","Page with Curl"),X("📄","Page Facing Up"),X("📅","Calendar"),X("📆","Tear-Off Calendar"),X("📇","Card Index"),pg,gg,fg,mg,vg,yg,X("📈","Chart Increasing"),X("📉","Chart Decreasing"),X("📊","Bar Chart"),X("📋","Clipboard"),X("📌","Pushpin"),X("📍","Round Pushpin"),X("📎","Paperclip"),X("🖇️","Linked Paperclips"),X("📏","Straight Ruler"),X("📐","Triangular Ruler"),X("📑","Bookmark Tabs"),X("📒","Ledger"),X("📓","Notebook"),X("📔","Notebook with Decorative Cover"),X("📕","Closed Book"),X("📖","Open Book"),X("📗","Green Book"),X("📘","Blue Book"),X("📙","Orange Book"),X("📚","Books"),X("📛","Name Badge"),X("📜","Scroll"),X("📝","Memo"),X("✂️","Scissors"),X("✉️","Envelope")),Eg=Z("Signs","Signs",X("🎦","Cinema"),Lp,X("🔞","No One Under Eighteen"),X("🚫","Prohibited"),X("🚬","Cigarette"),X("🚭","No Smoking"),X("🚮","Litter in Bin Sign"),X("🚯","No Littering"),X("🚰","Potable Water"),X("🚱","Non-Potable Water"),X("🚳","No Bicycles"),X("🚷","No Pedestrians"),X("🚸","Children Crossing"),X("🚹","Men’s Room"),X("🚺","Women’s Room"),X("🚻","Restroom"),X("🚼","Baby Symbol"),X("🚾","Water Closet"),X("🛂","Passport Control"),X("🛃","Customs"),X("🛄","Baggage Claim"),X("🛅","Left Luggage"),X("🅿️","Parking Button"),X("♿","Wheelchair Symbol"),X("☢️","Radioactive"),X("☣️","Biohazard"),X("⚠️","Warning"),X("⚡","High Voltage"),X("⛔","No Entry"),X("♻️","Recycling Symbol"),to,eo,X("⚧️","Transgender Symbol")),Pg=Z("Religion","Religion",X("🔯","Dotted Six-Pointed Star"),X("✡️","Star of David"),X("🕉️","Om"),X("🕋","Kaaba"),X("🕌","Mosque"),X("🕍","Synagogue"),X("🕎","Menorah"),X("🛐","Place of Worship"),X("🛕","Hindu Temple"),X("☦️","Orthodox Cross"),X("✝️","Latin Cross"),X("☪️","Star and Crescent"),X("☮️","Peace Symbol"),X("☯️","Yin Yang"),X("☸️","Wheel of Dharma"),X("♾️","Infinity"),X("🪔","Diya Lamp"),X("⛩️","Shinto Shrine"),X("⛪","Church"),X("✴️","Eight-Pointed Star"),X("📿","Prayer Beads")),Mg=X("🚪","Door"),Bg=Z("Household","Household",X("💄","Lipstick"),X("💍","Ring"),X("💎","Gem Stone"),X("📰","Newspaper"),ng,X("🔥","Fire"),X("🔫","Pistol"),X("🕯️","Candle"),X("🖼️","Framed Picture"),bg,X("🗞️","Rolled-Up Newspaper"),X("🗺️","World Map"),Mg,X("🚽","Toilet"),X("🚿","Shower"),X("🛁","Bathtub"),X("🛋️","Couch and Lamp"),X("🛏️","Bed"),X("🧴","Lotion Bottle"),X("🧵","Thread"),X("🧶","Yarn"),X("🧷","Safety Pin"),X("🧸","Teddy Bear"),X("🧹","Broom"),X("🧺","Basket"),X("🧻","Roll of Paper"),X("🧼","Soap"),X("🧽","Sponge"),X("🪑","Chair"),X("🪒","Razor"),X("🎗️","Reminder Ribbon")),kg=Z("Activities","Activities",X("🎞️","Film Frames"),X("🎟️","Admission Tickets"),X("🎠","Carousel Horse"),X("🎡","Ferris Wheel"),X("🎢","Roller Coaster"),Tr,X("🎪","Circus Tent"),X("🎫","Ticket"),X("🎬","Clapper Board"),X("🎭","Performing Arts")),Tg=Z("Travel","Travel",X("🏷️","Label"),X("🌋","Volcano"),X("🏔️","Snow-Capped Mountain"),X("⛰️","Mountain"),X("🏕️","Camping"),X("🏖️","Beach with Umbrella"),X("⛱️","Umbrella on Ground"),X("🏯","Japanese Castle"),X("👣","Footprints"),X("🗻","Mount Fuji"),X("🗼","Tokyo Tower"),X("🗽","Statue of Liberty"),X("🗾","Map of Japan"),X("🗿","Moai"),X("🛎️","Bellhop Bell"),X("🧳","Luggage"),X("⛳","Flag in Hole"),X("⛺","Tent"),X("♨️","Hot Springs")),Ig=Z("Medieval","Medieval",X("🏰","Castle"),X("🏹","Bow and Arrow"),zr,X("🔱","Trident Emblem"),X("🗡️","Dagger"),X("🛡️","Shield"),X("🔮","Crystal Ball"),X("⚔️","Crossed Swords"),X("⚜️","Fleur-de-lis")),Fg=X("‼️","Double Exclamation Mark"),Lg=X("⁉️","Exclamation Question Mark"),Og=X("ℹ️","Information"),Rg=X("Ⓜ️","Circled M"),Ng=X("✅","Check Mark Button"),Hg=X("✔️","Check Mark"),zg=X("✳️","Eight-Spoked Asterisk"),jg=X("❌","Cross Mark"),Qg=X("❎","Cross Mark Button"),Ug=X("❓","Question Mark"),Wg=X("❔","White Question Mark"),Gg=X("❕","White Exclamation Mark"),qg=X("❗","Exclamation Mark"),Vg=X("➰","Curly Loop"),Yg=X("➿","Double Curly Loop"),Xg=X("〰️","Wavy Dash"),Zg=X("〽️","Part Alternation Mark"),Jg=X("™️","Trade Mark"),Kg=X("©️","Copyright"),$g=X("®️","Registered"),tf=X("⛶️","Square: Four Corners"),ef=(J("Marks","Marks",{doubleExclamationMark:Fg,interrobang:Lg,information:Og,circledM:Rg,checkMarkButton:Ng,checkMark:Hg,eightSpokedAsterisk:zg,crossMark:jg,crossMarkButton:Qg,questionMark:Ug,whiteQuestionMark:Wg,whiteExclamationMark:Gg,exclamationMark:qg,curlyLoop:Vg,doubleCurlyLoop:Yg,wavyDash:Xg,partAlternationMark:Zg,tradeMark:Jg,copyright:Kg,registered:$g}),X("💧","Droplet")),nf=X("🩸","Drop of Blood"),sf=X("🩹","Adhesive Bandage"),of=X("🩺","Stethoscope"),rf=X("💉","Syringe"),af=X("💊","Pill"),cf=X("🧪","Test Tube"),lf=X("🧫","Petri Dish"),uf=X("🧬","DNA"),hf=X("🧮","Abacus"),df=X("🧲","Magnet"),Af=J("Science","Science",{droplet:ef,dropOfBlood:nf,adhesiveBandage:sf,stethoscope:of,syringe:rf,pill:af,microscope:Nr,testTube:cf,petriDish:lf,dna:uf,abacus:hf,magnet:df,telescope:X("🔭","Telescope"),medical:cr,balanceScale:pr,alembic:lp,gear:up,atomSymbol:hp,magnifyingGlassTiltedLeft:Kp,magnifyingGlassTiltedRight:$p}),pf=X("♔","White Chess King"),gf=X("♕","White Chess Queen"),ff=X("♖","White Chess Rook"),mf=X("♗","White Chess Bishop"),vf=X("♘","White Chess Knight"),yf=X("♙","White Chess Pawn"),wf=J(pf.value+gf.value+ff.value+mf.value+vf.value+yf.value,"White Chess Pieces",{width:"auto",king:pf,queen:gf,rook:ff,bishop:mf,knight:vf,pawn:yf}),bf=X("♚","Black Chess King"),xf=X("♛","Black Chess Queen"),Cf=X("♜","Black Chess Rook"),Df=X("♝","Black Chess Bishop"),Sf=X("♞","Black Chess Knight"),_f=X("♟","Black Chess Pawn"),Ef=J(bf.value+xf.value+Cf.value+Df.value+Sf.value+_f.value,"Black Chess Pieces",{width:"auto",king:bf,queen:xf,rook:Cf,bishop:Df,knight:Sf,pawn:_f}),Pf=J(yf.value+_f.value,"Chess Pawns",{width:"auto",white:yf,black:_f}),Mf=J(ff.value+Cf.value,"Chess Rooks",{width:"auto",white:ff,black:Cf}),Bf=J(mf.value+Df.value,"Chess Bishops",{width:"auto",white:mf,black:Df}),kf=J(vf.value+Sf.value,"Chess Knights",{width:"auto",white:vf,black:Sf}),Tf=J(gf.value+xf.value,"Chess Queens",{width:"auto",white:gf,black:xf}),If=J(pf.value+bf.value,"Chess Kings",{width:"auto",white:pf,black:bf}),Ff=J("Chess Pieces","Chess Pieces",{width:"auto",white:wf,black:Ef,pawns:Pf,rooks:Mf,bishops:Bf,knights:kf,queens:Tf,kings:If}),Lf=X("⚀","Dice: Side 1"),Of=X("⚁","Dice: Side 2"),Rf=X("⚂","Dice: Side 3"),Nf=X("⚃","Dice: Side 4"),Hf=X("⚄","Dice: Side 5"),zf=J("Dice","Dice",{dice1:Lf,dice2:Of,dice3:Rf,dice4:Nf,dice5:Hf,dice6:X("⚅","Dice: Side 6")}),jf=J("All Icons","All Icons",{faces:jl,love:lu,cartoon:Tu,hands:Ph,bodyParts:Mh,people:ka,gestures:Ho,inMotion:Da,resting:Ma,roles:Wr,fantasy:Zr,animals:Bh,plants:Th,food:Fh,flags:Lh,vehicles:Qd,clocks:Ud,arrows:aA,shapes:cA,buttons:XA,zodiac:ZA,chess:Ff,dice:zf,math:$A,games:tp,sportsEquipment:ep,clothing:np,town:ip,music:sp,weather:op,astro:rp,finance:ap,writing:cp,science:Af,tech:xg,mail:Cg,celebration:Dg,tools:Sg,office:_g,signs:Eg,religion:Pg,household:Bg,activities:kg,travel:Tg,medieval:Ig}),Qf="The quick brown fox jumps over the lazy dog",Uf=[];function ot(t){const e=[];return t.fontStyle&&"normal"!==t.fontStyle&&e.push(t.fontStyle),t.fontVariant&&"normal"!==t.fontVariant&&e.push(t.fontVariant),t.fontWeight&&"normal"!==t.fontWeight&&e.push(t.fontWeight),e.push(t.fontSize+"px"),e.push(t.fontFamily),e.join(" ")}async function rt(t,e=null){if(-1===Uf.indexOf(t)){e=e||Qf;0===(await document.fonts.load(t,e)).length?console.warn(`Failed to load font "${t}". If this is a system font, just set the object's \`value\` property, instead of calling \`loadFontAndSetText\`.`):Uf.push(t)}}class Wf{constructor(t,e,...n){this.key=t,this.value=e,this.tags=n.map(t=>t.toLocaleUpperCase()),Object.freeze(this)}apply(t){0===this.tags.length||this.tags.indexOf(t.tagName)>-1?"style"===this.key?Object.assign(t[this.key],this.value):c(xt)?this.value?t.setAttribute(this.key,""):t.removeAttribute(this.key):t[this.key]=this.value:console.warn(`Element ${t.tagName} does not support Attribute ${this.key}`)}}function at(t){return new Wf("autoplay",t,"audio","video")}function ct(t){return new Wf("className",t)}function lt(t){return new Wf("disabled",t,"button","command","fieldset","input","keygen","optgroup","option","select","textarea")}function ut(t){return new Wf("htmlFor",t,"label","output")}function ht(t){return new Wf("height",t,"canvas","embed","iframe","img","input","object","video")}function dt(t){return new Wf("href",t,"a","area","base","link")}function At(t){return new Wf("id",t)}function pt(t){return new Wf("max",t,"input","meter","progress")}function gt(t){return new Wf("min",t,"input","meter")}function ft(t){return new Wf("muted",t,"audio","video")}function mt(t){return new Wf("placeholder",t,"input","textarea")}function vt(t){return new Wf("playsInline",t,"audio","video")}function yt(t){return new Wf("step",t,"input")}function wt(t){return new Wf("title",t)}function bt(t){return new Wf("type",t,"button","input","command","embed","object","script","source","style","menu")}function xt(t){return new Wf("value",t,"button","data","input","li","meter","option","progress","param")}function Ct(t){return new Wf("width",t,"canvas","embed","iframe","img","input","object","video")}function Dt(t){return t.isOpen?t.isOpen():"none"!==t.style.display}function St(t,e,n=""){t.setOpen?t.setOpen(e,n):e?Pt(t,n):Mt(t)}function _t(t,e,n,i,s){s=s||"",t.accessKey&&(s+=` <kbd>(ALT+${t.accessKey.toUpperCase()})</kbd>`),t.updateLabel?t.updateLabel(e,n,i,s):t.innerHTML=(e?n:i)+s}function Et(t,e=""){t.toggleOpen?t.toggleOpen(e):Dt(t)?Mt(t):Pt(t)}function Pt(t,e=""){t.show?t.show():t.style.display=e}function Mt(t){t.hide?t.hide():t.style.display="none"}const Gf=lt(!0),qf=lt(!1);function Bt(t,e){t.setLocked?t.setLocked(e):e?Gf.apply(t):qf.apply(t)}function kt(t,e,n){return(1-n)*t+n*e}class Vf extends Event{constructor(){super("tick"),this.t=0,this.dt=0,this.sdt=0,Object.seal(this)}copy(t){this.t=t.t,this.dt=t.dt,this.sdt=t.sdt}}class Yf extends kn{constructor(t){super(),this._timer=null,this.targetFrameRate=t,this._onTick=t=>{const e=new Vf;let n=t;this._onTick=t=>{t>n&&(e.t=t,e.dt=t-n,e.sdt=e.dt,n=t,this._onTick=t=>{const i=t-n;i>0&&i>=this._frameTime&&(e.t=t,e.dt=i,e.sdt=kt(e.sdt,e.dt,.01),n=t,this.dispatchEvent(e))})}}}restart(){this.stop(),this.start()}get isRunning(){return null!==this._timer}start(){throw new Error("Not implemented in base class")}stop(){this._timer=null}get targetFrameRate(){return this._targetFPS}set targetFrameRate(t){this._targetFPS=t,this._frameTime=1e3/t}}class Xf extends Yf{constructor(){super(120)}start(){const t=e=>{this._timer=requestAnimationFrame(t),this._onTick(e)};this._timer=requestAnimationFrame(t)}stop(){this.isRunning&&(cancelAnimationFrame(this._timer),super.stop())}}class Zf{constructor(t,e){this.key=t,this.value=e,Object.freeze(this)}apply(t){t.style[this.key]=this.value}}class Jf{constructor(...t){this.set=new Map;const e=(t,e)=>{e||c(e)?this.set.set(t,e):this.set.has(t)&&this.set.delete(t)};for(let n of t)if(n instanceof Zf){const{key:t,value:i}=n;e(t,i)}else if(n instanceof Jf)for(let t of n.set.entries()){const[n,i]=t;e(n,i)}}apply(t){for(let e of this.set.entries()){const[n,i]=e;t.style[n]=i}}}function Tt(t){return new Zf("backgroundColor",t)}function It(t){return new Zf("fontFamily",t)}function Ft(t){return new Zf("margin",t)}function Lt(t){return new Zf("width",t)}function Ot(t){return new Zf("zIndex",t)}It("'Droid Sans Mono', 'Consolas', 'Lucida Console', 'Courier New', 'Courier', monospace"),It("-apple-system, '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', sans-serif");function Rt(t,...e){let n=null;for(let t=0;t<e.length;++t){const i=e[t];s(i)&&(e[t]=i(!0)),i instanceof Wf&&"id"===i.key&&(n=document.getElementById(i.value))}null===n&&(n=document.createElement(t));for(let t of e)null!=t&&(o(t)||r(t)||c(t)||t instanceof Date?n.appendChild(document.createTextNode(t)):t instanceof Node?n.appendChild(t):t.element instanceof Node?n.appendChild(t.element):t instanceof Wf||t instanceof Zf||t instanceof Jf?t.apply(n):t instanceof Mn?t.add(n):console.trace(`Skipping ${t}: unsupported value type.`,t));return n}function Nt(...t){return Rt("a",...t)}function Ht(...t){return function(...t){return Rt("button",...t)}(...t,bt("button"))}function zt(...t){return Rt("canvas",...t)}function jt(...t){return Rt("div",...t)}function Qt(...t){return Rt("h1",...t)}function Ut(...t){return Rt("input",...t)}function Wt(...t){return Ut(bt("text"),...t)}function Gt(...t){return Ut(bt("url"),...t)}function qt(...t){return Rt("label",...t)}function Vt(...t){return Rt("li",...t)}function Yt(...t){return Rt("option",...t)}function Xt(...t){return Rt("p",...t)}function Zt(...t){return Rt("span",...t)}function Jt(...t){return Rt("ul",...t)}function Kt(t,e,...n){return window.OffscreenCanvas?new OffscreenCanvas(t,e):zt(...n,Ct(t),ht(e))}function $t(...t){return jt(Ft("auto"),...t)}const Kf=new Event("toggleOptions"),$f=new Event("tweet"),tm=new Event("leave"),em=new Event("toggleFullscreen"),nm=new Event("toggleInstructions"),im=new Event("toggleUserDirectory"),sm=new Event("toggleAudio"),om=new Event("toggleVideo"),rm=new Event("changeDevices"),am=new Event("emote"),cm=new Event("selectEmoji"),lm=new Event("zoomChanged");class um extends kn{constructor(t,e,n){super();const i=t=>()=>this.dispatchEvent(t),s=t=>{this.zoom+=t,this.dispatchEvent(lm)};this.element=jt(At("controls")),this.element.append(this.optionsButton=Ht(At("optionsButton"),wt("Show/hide options"),u(i(Kf)),$t(up.value),$t("Options")),this.instructionsButton=Ht(At("instructionsButton"),wt("Show/hide instructions"),u(i(nm)),$t(Ug.value),$t("Info")),this.shareButton=Ht(At("shareButton"),wt("Share your current room to twitter"),u(i($f)),function(...t){return Rt("img",...t)}(function(t){return new Wf("src",t,"audio","embed","iframe","img","input","script","source","track","video")}("https://cdn2.iconfinder.com/data/icons/minimalism/512/twitter.png"),function(t){return new Wf("alt",t,"applet","area","img","input")}("icon"),function(t){return new Wf("role",t)}("presentation"),new Zf("height","25px"),Ft("2px auto -2px auto")),$t("Tweet")),this.showUsersButton=Ht(At("showUsersButton"),wt("View user directory"),u(i(im)),$t(Hl.value),$t("Users")),this.fullscreenButton=Ht(At("fullscreenButton"),wt("Toggle fullscreen"),u(i(em)),u(()=>this.isFullscreen=!this.isFullscreen),$t(tf.value),$t("Expand")),this.leaveButton=Ht(At("leaveButton"),wt("Leave the room"),u(i(tm)),$t(Mg.value),$t("Leave")),jt(At("toggleAudioControl"),ct("comboButton"),this.toggleAudioButton=Ht(At("toggleAudioButton"),wt("Toggle audio mute/unmute"),u(i(sm)),this.toggleAudioLabel=$t(Xp.value),$t("Audio")),this.toggleVideoButton=Ht(At("toggleVideoButton"),wt("Toggle video mute/unmute"),u(i(om)),this.toggleVideoLabel=$t(Lp.value),$t("Video")),this.changeDevicesButton=Ht(At("changeDevicesButton"),wt("Change devices"),u(i(rm)),$t(FA.value),$t("Change"))),jt(At("emojiControl"),ct("comboButton"),function(t){return new Zf("textAlign",t)}("center"),Ht(At("emoteButton"),wt("Emote"),u(i(am)),this.emoteButton=$t(kh.value),$t("Emote")),Ht(At("selectEmoteButton"),wt("Select Emoji"),u(i(cm)),$t(FA.value),$t("Change"))),this.zoomInButton=Ht(At("zoomInButton"),wt("Zoom in"),u(()=>s(.5)),$t(Kp.value),$t("+")),jt(At("zoomSliderContainer"),this.slider=function(...t){return Ut(bt("range"),...t)}(At("zoomSlider"),wt("Zoom"),gt(e),pt(n),yt(.1),xt(0),d(()=>this.dispatchEvent(lm)))),this.zoomOutButton=Ht(At("zoomOutButton"),wt("Zoom out"),u(()=>s(-.5)),$t($p.value),$t("-"))),this._audioEnabled=!0,this._videoEnabled=!1,Object.seal(this)}get isFullscreen(){return null!==document.fullscreenElement}set isFullscreen(t){t?document.body.requestFullscreen():document.exitFullscreen(),_t(this.fullscreenButton,t,Zd.value,tf.value)}hide(){this.element.style.display="none"}show(){this.element.style.display=""}get enabled(){return!this.instructionsButton.disabled}set enabled(t){for(let e of this.element.querySelectorAll("button"))e.disabled=!t}get audioEnabled(){return this._audioEnabled}set audioEnabled(t){this._audioEnabled=t,_t(this.toggleAudioLabel,t,Xp.value,qp.value)}get videoEnabled(){return this._videoEnabled}set videoEnabled(t){this._videoEnabled=t,_t(this.toggleVideoLabel,t,Hp.value,Lp.value)}setEmojiButton(t,e){this.emoteButton.innerHTML=e.value}get zoom(){return parseFloat(this.slider.value)}set zoom(t){this.slider.value=t}}class hm extends kn{constructor(t,...e){super(),this.element=Rt(t,...e)}get id(){return this.element.id}get eventTarget(){return this.element}isForwardedEvent(t){return!0}addEventListener(t,e,n){this.isForwardedEvent(t)?this.eventTarget.addEventListener(t,e,n):super.addEventListener(t,e,n)}removeEventListener(t,e){this.isForwardedEvent(t)?this.eventTarget.removeEventListener(t,e):super.removeEventListener(t,e)}get style(){return this.element.style}get tagName(){return this.element.tagName}get disabled(){return this.element.disabled}set disabled(t){this.element.disabled=t}focus(){this.element.focus()}blur(){this.element.blur()}}const dm=lt(!0),Am=lt(!1),pm=new WeakMap;function te(t){if(function(t){for(;t.lastChild;)t.lastChild.remove()}(t.element),0===t.values.length)t.element.append(Yt(t.noSelectionText)),dm.apply(t.element);else{t.emptySelectionEnabled&&t.element.append(Yt(t.noSelectionText));for(let e of t.values)t.element.append(Yt(xt(t.makeID(e)),t.makeLabel(e)));Am.apply(t.element)}}function ee(t,e,n,i,...s){return new gm(t,e,n,i,...s)}class gm extends hm{constructor(t,e,n,i,...o){if(super("select",At(t),...o),!s(n))throw new Error("makeID parameter must be a Function");if(!s(i))throw new Error("makeLabel parameter must be a Function");this.noSelectionText=e,this.makeID=t=>null!==t&&n(t)||null,this.makeLabel=t=>null!==t&&i(t)||"None",this.emptySelectionEnabled=!0,Object.seal(this)}get emptySelectionEnabled(){return this._emptySelectionEnabled}set emptySelectionEnabled(t){this._emptySelectionEnabled=t,te(this)}get values(){return pm.has(this)||pm.set(this,[]),pm.get(this)}set values(t){const e=this.selectedValue,n=this.values;n.splice(0,n.length,...t),te(this),this.selectedValue=e}get options(){return this.element.options}get selectedIndex(){let t=this.element.selectedIndex;return this.emptySelectionEnabled&&--t,t}set selectedIndex(t){this.emptySelectionEnabled&&++t,this.element.selectedIndex=t}get selectedValue(){return 0<=this.selectedIndex&&this.selectedIndex<this.values.length?this.values[this.selectedIndex]:null}set selectedValue(t){this.selectedIndex=this.indexOf(t)}get selectedText(){const t=this.element.selectedOptions;if(1===t.length)return t[0].textContent||t[0].innerText}set selectedText(t){const e=this.values.findIndex(e=>null!==t&&this.makeLabel(e)===t);this.selectedIndex=e}indexOf(t){return this.values.findIndex(e=>null!==t&&this.makeID(t)===this.makeID(e))}contains(t){return this.indexOf(t)>=0}}const fm=new Event("hidden"),mm=new Event("shown");class vm extends kn{constructor(t){super(),this.element=jt(At(t)),this.header=this.element.querySelector(".header"),this.content=this.element.querySelector(".content"),this.footer=this.element.querySelector(".footer");const e=this.element.querySelector(".dialogTitle > button.closeButton");e&&e.addEventListener("click",()=>Mt(this))}get tagName(){return this.element.tagName}get disabled(){return this.element.disabled}set disabled(t){this.element.disabled=t}get style(){return this.element.style}appendChild(t){return this.element.appendChild(t)}append(...t){this.element.append(...t)}show(){Pt(this.element),this.dispatchEvent(mm)}async showAsync(){Pt(this),await G(this,"hidden")}hide(){Mt(this.element),this.dispatchEvent(fm)}}const ym=new Event("audioInputChanged"),wm=new Event("audioOutputChanged"),bm=new Event("videoInputChanged");class xm extends vm{constructor(){super("devices");const t=t=>()=>this.dispatchEvent(t);this.videoInputSelect=ee("videoInputDevices","No video input",t=>t.deviceId,t=>t.label,d(t(bm))),this.audioInputSelect=ee("audioInputDevices","No audio input",t=>t.deviceId,t=>t.label,d(t(ym))),this.audioOutputSelect=ee("audioOutputDevices","No audio output",t=>t.deviceId,t=>t.label,d(t(wm))),this.audioInputDevices=[],this.audioOutputDevices=[],this.videoInputDevices=[],Object.seal(this)}get audioInputDevices(){return this.audioInputSelect.values}set audioInputDevices(t){this.audioInputSelect.values=t}get currentAudioInputDevice(){return this.audioInputSelect.selectedValue}set currentAudioInputDevice(t){this.audioInputSelect.selectedValue=t}get audioOutputDevices(){return this.audioOutputSelect.values}set audioOutputDevices(t){this.audioOutputSelect.values=t}get currentAudioOutputDevice(){return this.audioOutputSelect.selectedValue}set currentAudioOutputDevice(t){this.audioOutputSelect.selectedValue=t}get videoInputDevices(){return this.videoInputSelect.values}set videoInputDevices(t){this.videoInputSelect.values=t}get currentVideoInputDevice(){return this.videoInputSelect.selectedValue}set currentVideoInputDevice(t){this.videoInputSelect.selectedValue=t}}function ne(t,e,n=null,i=null){return null===n&&(n=1),null===i&&(i=1),new Zf("gridArea",`${e}/${t}/${e+i}/${t+n}`)}function ie(t,e=null){return null===e&&(e=1),new Zf("gridRow",`${t}/${t+e}`)}const Cm=new Zf("display","grid");function se(...t){return function(...t){return new Jf(...t)}(Cm,function(t){return new Zf("gridTemplateColumns",t)}(t.join(" ")))}const Dm=lt(!0),Sm=lt(!1),_m=new Event("emojiCanceled");class Em extends vm{constructor(){super("emoji"),this.header.append(function(...t){return Rt("h2",...t)}("Recent"),this.recent=Xt("(None)"));const t=[],e=[];let n=null,i=0;function s(t,e){let n=t.value,i=n.indexOf(Ks.value);return-1===i&&(i=n.indexOf(Js.value)),i>=0&&(n=n.substring(0,i)),{value:n+e.value,desc:t.desc+"/"+e.desc}}const o=(t,r,a)=>{const c=t.alts||t;for(let t of c){const c=Ht(wt(t.desc),u(e=>{n=n&&e.ctrlKey?s(n,t):t,this.preview.innerHTML=`${n.value} - ${n.desc}`,Sm.apply(this.confirmButton),l&&(Et(l),c.innerHTML=t.value+(Dt(l)?"-":"+"))}),t.value);let l=null,h=null;a?(c.id="emoji-with-alt-"+i++,h=Jt(Vt(c,qt(ut(c.id),t.desc)))):h=Zt(c),t.alts&&(l=jt(),e.push(l),o(t,l,!0),Mt(l),h.appendChild(l),c.style.width="3em",c.innerHTML+="+"),t.width&&(c.style.width=t.width),t.color&&(c.style.color=t.color),r.appendChild(h)}};for(let t of Object.values(jf))if(t instanceof Zs){const e=Qt(),n=Xt(),i=Nt(dt("javascript:undefined"),wt(t.desc),u(()=>{Et(n),i.innerHTML=t.value+(Dt(n)?" -":" +")}),t.value+" -");o(t,n),e.appendChild(i),this.content.appendChild(e),this.content.appendChild(n)}this.footer.append(this.confirmButton=Ht(ct("confirm"),"OK",u(()=>{-1===t.indexOf(n)&&(t.push(n),this.recent.innerHTML="",o(t,this.recent)),this.dispatchEvent(new Pm(n)),Mt(this)})),Ht(ct("cancel"),"Cancel",u(()=>{Dm.apply(this.confirmButton),this.dispatchEvent(_m),Mt(this)})),this.preview=Zt(ne(1,4,3,1))),Dm.apply(this.confirmButton),this.selectAsync=()=>new Promise((t,n)=>{let i=null,s=null;const o=()=>{this.removeEventListener("emojiSelected",i),this.removeEventListener("emojiCanceled",s),this.removeEventListener("hidden",s)};i=e=>{o();try{t(e.emoji)}catch(t){n(t)}},s=()=>{o(),t(null)},this.addEventListener("emojiSelected",i),this.addEventListener("emojiCanceled",s),this.addEventListener("hidden",s),(()=>{for(let t of e)Mt(t)})(),Pt(this)})}}class Pm extends Event{constructor(t){super("emojiSelected"),this.emoji=t}}const Mm=new WeakMap;class Bm{constructor(t){this.ready=!1,this.connecting=!1,this.connected=!1,this.parent=t}validate(){const t=this.parent.roomName.length>0&&this.parent.userName.length>0;Bt(this.parent.connectButton,!this.ready||this.connecting||this.connected||!t),this.parent.connectButton.innerHTML=this.connected?"Connected":this.connecting?"Connecting...":this.ready?"Connect":"Loading..."}}class km extends vm{constructor(){super("login");const t=new Bm(this);Mm.set(this,t);const e=()=>t.validate();this.addEventListener("shown",()=>t.ready=!0),this.roomSelectControl=jt(At("roomSelectorControl")),this.roomEntryControl=jt(At("roomEntryControl"));const n=Array.prototype.map.call(this.element.querySelectorAll("#roomSelector option"),t=>({Name:t.textContent||t.innerText,ShortName:t.value}));this.roomSelect=ee("roomSelector","No rooms available",t=>t.ShortName,t=>t.Name),this.roomSelect.addEventListener("input",e),this.roomSelect.emptySelectionEnabled=!1,this.roomSelect.values=n,this.roomSelect.selectedIndex=0,this.roomInput=Wt(At("roomName")),this.roomInput.addEventListener("input",e),this.roomInput.addEventListener("keypress",t=>{"Enter"===t.key&&(0===this.userName.length?this.userNameInput.focus():0===this.email.length&&this.emailInput.focus())}),this.userNameInput=Wt(At("userName")),this.userNameInput.addEventListener("input",e),this.userNameInput.addEventListener("keypress",t=>{"Enter"===t.key&&(0===this.userName.length?this.userNameInput.focus():0===this.roomName.length&&(this.roomSelectMode?this.roomSelect.focus():this.roomInput.focus()))}),this.emailInput=function(...t){return Ut(bt("email"),...t)}(At("email")),this.emailInput.addEventListener("keypress",t=>{"Enter"===t.key&&(0===this.userName.length?this.userNameInput.focus():0===this.roomName.length&&(this.roomSelectMode?this.roomSelect.focus():this.roomInput.focus()))});Ht(At("createNewRoom")).addEventListener("click",()=>{this.roomSelectMode=!1});Ht(At("selectRoom")).addEventListener("click",()=>{this.roomSelectMode=!0}),this.connectButton=Ht(At("connect")),this.addEventListener("login",()=>{this.connecting=!0}),this.roomSelectMode=!0,t.validate()}_checkInput(t,e){!t.shiftKey&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&"Enter"===t.key&&this.userName.length>0&&this.roomName.length>0&&e(t)}addEventListener(t,e,n){"login"===t?(this.connectButton.addEventListener("click",e,n),this.roomInput.addEventListener("keypress",t=>this._checkInput(t,e)),this.userNameInput.addEventListener("keypress",t=>this._checkInput(t,e))):super.addEventListener(t,e,n)}removeEventListener(t,e){"login"===t?this.connectButton.removeEventListener("click",e):super.removeEventListener(t,e)}get roomSelectMode(){return"none"!==this.roomSelectControl.style.display}set roomSelectMode(t){const e=Mm.get(this);St(this.roomSelectControl,t),St(this.roomEntryControl,!t),t?this.roomSelect.selectedValue={ShortName:this.roomInput.value}:this.roomSelect.selectedIndex>=0&&(this.roomInput.value=this.roomSelect.selectedValue.ShortName),e.validate()}get roomName(){return(this.roomSelectMode?this.roomSelect.selectedValue&&this.roomSelect.selectedValue.ShortName:this.roomInput.value)||""}set roomName(t){null!=t&&0!==t.length||(t=this.roomSelect.values[0].ShortName),this.roomInput.value=t,this.roomSelect.selectedValue={ShortName:t},this.roomSelectMode=this.roomSelect.selectedIndex>-1,Mm.get(this).validate()}set userName(t){this.userNameInput.value=t,Mm.get(this).validate()}get userName(){return this.userNameInput.value}set email(t){this.emailInput.value=t}get email(){return this.emailInput.value}get connectButtonText(){return this.connectButton.innerText||this.connectButton.textContent}set connectButtonText(t){this.connectButton.innerHTML=t}get ready(){return Mm.get(this).ready}set ready(t){const e=Mm.get(this);e.ready=t,e.validate()}get connecting(){return Mm.get(this).connecting}set connecting(t){const e=Mm.get(this);e.connecting=t,e.validate()}get connected(){return Mm.get(this).connected}set connected(t){Mm.get(this).connected=t,this.connecting=!1}}function oe(t,e,n,...i){return new Tm(t,e,n,...i)}class Tm extends hm{constructor(t,e,n,...i){super("div"),this.label=qt(ut(t),n),this.input=Ut(bt(e),...i),this.element.append(this.label,this.input),this.element.style.display="grid",Object.seal(this)}get eventTarget(){return this.input}get value(){return this.input.value}set value(t){this.input.value=t}get checked(){return this.input.checked}set checked(t){this.input.checked=t}setLocked(t){Bt(this.input,t)}}const Im=new Event("select");function re(t,e,...n){return new Fm(t,e,...n)}class Fm extends hm{constructor(t,e,...n){super("div",At(t),Xt(...n)),this.button=Ht(At(t+"Btn"),u(()=>this.dispatchEvent(Im)),e)}isForwardedEvent(t){return"select"!==t}get visible(){return null!==this.element.style.display}set visible(t){St(this.element,t),this.button.className=t?"tabSelected":"tabUnselected",this.element.className=t?"tabSelected":"tabUnselected"}}const Lm=new WeakMap;class Om extends kn{constructor(t){if(super(),!(t instanceof Gamepad))throw new Error("Value must be a Gamepad");this.id=t.id,this.displayId=t.displayId,this.connected=t.connected,this.hand=t.hand,this.pose=t.pose;const e={btnDownEvts:[],btnUpEvts:[],btnState:[],axisMaxed:[],axisMaxEvts:[],sticks:[]};this.lastButtons=[],this.buttons=[],this.axes=[],this.hapticActuators=[],this.axisThresholdMax=.9,this.axisThresholdMin=.1,this._isStick=e=>e%2==0&&e<t.axes.length-1;for(let n=0;n<t.buttons.length;++n)e.btnDownEvts[n]=Object.assign(new Event("gamepadbuttondown"),{button:n}),e.btnUpEvts[n]=Object.assign(new Event("gamepadbuttonup"),{button:n}),e.btnState[n]=!1,this.lastButtons[n]=null,this.buttons[n]=t.buttons[n];for(let n=0;n<t.axes.length;++n)e.axisMaxEvts[n]=Object.assign(new Event("gamepadaxismaxed"),{axis:n}),e.axisMaxed[n]=!1,this._isStick(n)&&(e.sticks[n/2]={x:0,y:0}),this.axes[n]=t.axes[n];if(void 0!==t.hapticActuators)for(let e=0;e<t.hapticActuators.length;++e)this.hapticActuators[e]=t.hapticActuators[e];Object.seal(this),Lm.set(this,e)}update(t){if(!(t instanceof Gamepad))throw new Error("Value must be a Gamepad");this.connected=t.connected,this.hand=t.hand,this.pose=t.pose;const e=Lm.get(this);for(let n=0;n<t.buttons.length;++n){const i=e.btnState[n],s=t.buttons[n].pressed;s!==i&&(e.btnState[n]=s,this.dispatchEvent((s?e.btnDownEvts:e.btnUpEvts)[n])),this.lastButtons[n]=this.buttons[n],this.buttons[n]=t.buttons[n]}for(let n=0;n<t.axes.length;++n){const i=e.axisMaxed[n],s=t.axes[n],o=Math.sign(s),r=Math.abs(s),a=r>=this.axisThresholdMax,c=r<=this.axisThresholdMin;a&&!i&&this.dispatchEvent(e.axisMaxEvts[n]),this.axes[n]=o*(a?1:c?0:r)}for(let t=0;t<this.axes.length-1;t+=2){const n=e.sticks[t/2];n.x=this.axes[t],n.y=this.axes[t+1]}if(void 0!==t.hapticActuators)for(let e=0;e<t.hapticActuators.length;++e)this.hapticActuators[e]=t.hapticActuators[e]}}let Rm=null;if(!Object.prototype.hasOwnProperty.call(CanvasRenderingContext2D.prototype,"getTransform")&&Object.prototype.hasOwnProperty.call(CanvasRenderingContext2D.prototype,"mozCurrentTransform")){class t{constructor(t){this.a=t[0],this.b=t[1],this.c=t[2],this.d=t[3],this.e=t[4],this.f=t[5]}get is2D(){return!0}get isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f}transformPoint(t){return{x:t.x*this.a+t.y*this.c+this.e,y:t.x*this.b+t.y*this.d+this.f}}}Rm=e=>new t(e.mozCurrentTransform)}else Rm=t=>t.getTransform();function ae(t){return Rm(t)}function ce(t,e,n,i=1){return e=Math.floor(e*i),n=Math.floor(n*i),(t.width!=e||t.height!=n)&&(t.width=e,t.height=n,!0)}function le(t,e,n,i=1){const s=t.imageSmoothingEnabled,o=t.textBaseline,r=t.textAlign,a=t.font,c=ce(t.canvas,e,n,i);return c&&(t.imageSmoothingEnabled=s,t.textBaseline=o,t.textAlign=r,t.font=a),c}const Nm=new WeakMap,Hm=new Event("redrawn");class zm{constructor(){this.color="black",this.bgColor=null,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="sans-serif",this.fontSize=20,this.scale=1,this.padding={top:0,right:0,bottom:0,left:0},this.value=null,this.canvas=Kt(10,10),this.g=this.canvas.getContext("2d"),this.g.textBaseline="top"}redraw(t){if(this.g.clearRect(0,0,this.canvas.width,this.canvas.height),this.fontFamily&&this.fontSize&&this.color&&this.scale&&this.value){const e=this.fontSize*this.scale,n=ot(this);this.g.font=n;const i=this.g.measureText(this.value);let s=0,o=0,r=i.width,a=e;void 0!==i.actualBoundingBoxLeft&&(o=i.actualBoundingBoxAscent,r=i.actualBoundingBoxRight-i.actualBoundingBoxLeft,a=i.actualBoundingBoxDescent+i.actualBoundingBoxAscent),s+=this.padding.left,o+=this.padding.top,r+=this.padding.right+this.padding.left,a+=this.padding.top+this.padding.bottom,le(this.g,r,a),this.bgColor?(this.g.fillStyle=this.bgColor,this.g.fillRect(0,0,this.canvas.width,this.canvas.height)):this.g.clearRect(0,0,this.canvas.width,this.canvas.height),this.g.fillStyle=this.color,this.g.fillText(this.value,s,o),t.dispatchEvent(Hm)}}}class jm extends kn{constructor(){super(),Nm.set(this,new zm)}async loadFontAndSetText(t=null){const e=ot(this);await rt(e,t),this.value=t}get canvas(){return Nm.get(this).canvas}get width(){const t=Nm.get(this);return t.canvas.width/t.scale}get height(){const t=Nm.get(this);return t.canvas.height/t.scale}get scale(){return Nm.get(this).scale}set scale(t){if(this.scale!==t){const e=Nm.get(this);e.scale=t,e.redraw(this)}}get padding(){return Nm.get(this).padding}set padding(t){if(t instanceof Array)if(1===t.length)t={top:t[0],right:t[0],bottom:t[0],left:t[0]};else if(2===t.length)t={top:t[0],right:t[1],bottom:t[0],left:t[1]};else{if(4!==t.length)return;t={top:t[0],right:t[1],bottom:t[2],left:t[3]}}else r(t)&&(t={top:t,right:t,bottom:t,left:t});if(this.padding.top!==t.top||this.padding.right!=t.right||this.padding.bottom!=t.bottom||this.padding.left!=t.left){const e=Nm.get(this);e.padding=t,e.redraw(this)}}get fontStyle(){return Nm.get(this).fontStyle}set fontStyle(t){if(this.fontStyle!==t){const e=Nm.get(this);e.fontStyle=t,e.redraw(this)}}get fontVariant(){return Nm.get(this).fontVariant}set fontVariant(t){if(this.fontVariant!==t){const e=Nm.get(this);e.fontVariant=t,e.redraw(this)}}get fontWeight(){return Nm.get(this).fontWeight}set fontWeight(t){if(this.fontWeight!==t){const e=Nm.get(this);e.fontWeight=t,e.redraw(this)}}get fontSize(){return Nm.get(this).fontSize}set fontSize(t){if(this.fontSize!==t){const e=Nm.get(this);e.fontSize=t,e.redraw(this)}}get fontFamily(){return Nm.get(this).fontFamily}set fontFamily(t){if(this.fontFamily!==t){const e=Nm.get(this);e.fontFamily=t,e.redraw(this)}}get color(){return Nm.get(this).color}set color(t){if(this.color!==t){const e=Nm.get(this);e.color=t,e.redraw(this)}}get bgColor(){return Nm.get(this).bgColor}set bgColor(t){if(this.bgColor!==t){const e=Nm.get(this);e.bgColor=t,e.redraw(this)}}get value(){return Nm.get(this).value}set value(t){if(this.value!==t){const e=Nm.get(this);e.value=t,e.redraw(this)}}draw(t,e,n){const i=Nm.get(this);i.canvas.width>0&&i.canvas.height>0&&t.drawImage(i.canvas,e,n,this.width,this.height)}}const Qm=Object.freeze({none:null,emoji:"emoji",photo:"photo",video:"video"});class Um{constructor(t){this.canSwim=t,this.element=zt(128,128),this.g=this.element.getContext("2d")}draw(t,e,n,i){const s=this.element.width/this.element.height,o=s>1?e:s*n,r=s>1?e/s:n,a=(e-o)/2,c=(n-r)/2;t.drawImage(this.element,a,c,o,r)}}class Wm extends Um{constructor(t){super(function(t){return Aa.contains(t)||pa.contains(t)||ga.contains(t)||Io.contains(t)}(t)),this.value=t.value,this.desc=t.desc;const e=new jm;e.color=t.color||"black",e.fontFamily="Noto Color Emoji",e.fontSize=256,e.value=this.value,le(this.g,e.width,e.height),e.draw(this.g,0,0)}}class Gm extends Um{constructor(t){super(!1);const e=new Image;e.addEventListener("load",()=>{const t=(e.width-e.height)/2,n=Math.max(0,t),i=Math.max(0,-t),s=Math.min(e.width,e.height);le(this.g,s,s),this.g.drawImage(e,n,i,s,s,0,0,s,s)}),this.url=e.src=t&&t.href||t}}function ue(t,e,n){return t*(n-e)+e}const qm="undefined"!=typeof InstallTrigger,Vm=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0;class Ym extends Um{constructor(t){super(!1);let e=null;if(t instanceof HTMLVideoElement)e=t;else{if(!(t instanceof MediaStream))throw new Error("Can only create a video avatar from an HTMLVideoElement or MediaStream.");e=function(...t){return Rt("video",...t)}(at,vt,ft,function(t){return new Wf("volume",t,"audio","video")}(0),function(t){return new Wf("srcObject",t,"audio","video")}(t))}this.video=e,Vm||(e.play(),G(e,"canplay").then(()=>e.play()))}draw(t,e,n,i){if(this.video.videoWidth>0&&this.video.videoHeight>0){const t=(this.video.videoWidth-this.video.videoHeight)/2,e=Math.max(0,t),n=Math.max(0,-t),s=Math.min(this.video.videoWidth,this.video.videoHeight);le(this.g,s,s),this.g.save(),i&&(this.g.translate(s,0),this.g.scale(-1,1)),this.g.drawImage(this.video,e,n,s,s,0,0,s,s),this.g.restore()}super.draw(t,e,n,i)}}const Xm=1,Zm=5,Jm=5,Km=["userMoved","userPositionNeeded"],$m=new jm,tv=new jm;$m.fontFamily="Noto Color Emoji",$m.value=qp.value,tv.fontFamily="Noto Color Emoji",tv.value=Yp.value;class ev extends kn{constructor(t,e,n,i){super(),this.id=t,this.pose=n,this.label=i?"(Me)":`(${this.id})`,this.setAvatarVideo(null),this.avatarImage=null,this.avatarEmoji=zl,this.audioMuted=!1,this.videoMuted=!0,this.isMe=i,this.isActive=!1,this.stackUserCount=1,this.stackIndex=0,this.stackAvatarHeight=0,this.stackAvatarWidth=0,this.stackOffsetX=0,this.stackOffsetY=0,this.lastPositionRequestTime=performance.now()/1e3-Xm,this.visible=!0,this.userNameText=new jm,this.userNameText.color="white",this.userNameText.fontSize=128,this._displayName=null,this.displayName=e,Object.seal(this)}get x(){return this.pose.current.p.x}get y(){return this.pose.current.p.z}get gridX(){return this.pose.end.p.x}get gridY(){return this.pose.end.p.z}deserialize(t){switch(t.avatarMode){case Qm.emoji:this.avatarEmoji=t.avatarID;break;case Qm.photo:this.avatarImage=t.avatarID}}serialize(){return{id:this.id,avatarMode:this.avatarMode,avatarID:this.avatarID}}get avatarVideo(){return this._avatarVideo}setAvatarVideo(t){t instanceof MediaStream?this._avatarVideo=new Ym(t):this._avatarVideo=null}get avatarImage(){return this._avatarImage&&this._avatarImage.url||null}set avatarImage(t){o(t)&&t.length>0?this._avatarImage=new Gm(t):this._avatarImage=null}get avatarEmoji(){return this._avatarEmoji}set avatarEmoji(t){t&&t.value&&t.desc?this._avatarEmoji=new Wm(t):this._avatarEmoji=null}get avatarMode(){return this._avatarVideo?Qm.video:this._avatarImage?Qm.photo:this._avatarEmoji?Qm.emoji:Qm.none}get avatarID(){switch(this.avatarMode){case Qm.emoji:return{value:this.avatarEmoji.value,desc:this.avatarEmoji.desc};case Qm.photo:return this.avatarImage;default:return null}}get avatar(){switch(this.avatarMode){case Qm.emoji:return this._avatarEmoji;case Qm.photo:return this._avatarImage;case Qm.video:return this._avatarVideo;default:return null}}addEventListener(t,e,n){if(-1===Km.indexOf(t))throw new Error("Unrecognized event type: "+t);super.addEventListener(t,e,n)}get displayName(){return this._displayName||this.label}set displayName(t){this._displayName=t,this.userNameText.value=this.displayName}moveTo(t,e){this.isMe&&(this.moveEvent.x=t,this.moveEvent.y=e,this.dispatchEvent(this.moveEvent))}update(t,e){performance.now();this.stackUserCount=0,this.stackIndex=0;for(let t of e.values())t.gridX===this.gridX&&t.gridY===this.gridY&&(t.id===this.id&&(this.stackIndex=this.stackUserCount),++this.stackUserCount);this.stackAvatarWidth=t.tileWidth-(this.stackUserCount-1)*Zm,this.stackAvatarHeight=t.tileHeight-(this.stackUserCount-1)*Jm,this.stackOffsetX=this.stackIndex*Zm,this.stackOffsetY=this.stackIndex*Jm}drawShadow(t,e){const n=ae(t).a,i=this.x*e.tileWidth,s=this.y*e.tileHeight,o=ae(t).transformPoint({x:i,y:s});this.visible=-e.tileWidth<=o.x&&o.x<t.canvas.width&&-e.tileHeight<=o.y&&o.y<t.canvas.height,this.visible&&(t.save(),t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowOffsetX=3*n,t.shadowOffsetY=3*n,t.shadowBlur=3*n,this.innerDraw(t,e),t.restore())}drawAvatar(t,e){if(this.visible){if(t.save(),this.innerDraw(t,e),this.isActive&&!this.audioMuted){const e=this.stackAvatarHeight/2,n=ae(t).a;tv.fontSize=e,tv.scale=n,tv.draw(t,this.stackAvatarWidth-tv.width,0)}t.restore()}}innerDraw(t,e){if(t.translate(this.x*e.tileWidth+this.stackOffsetX,this.y*e.tileHeight+this.stackOffsetY),t.fillStyle="black",t.textBaseline="top",this.avatar&&this.avatar.draw(t,this.stackAvatarWidth,this.stackAvatarHeight,this.isMe),this.audioMuted||!this.videoMuted){const e=this.stackAvatarHeight/2,n=ae(t).a;this.audioMuted&&($m.fontSize=e,$m.scale=n,$m.draw(t,this.stackAvatarWidth-$m.width,0))}}drawName(t,e,n){if(this.visible){const i=ae(t).a;t.save();{t.translate(this.x*e.tileWidth+this.stackOffsetX,this.y*e.tileHeight+this.stackOffsetY),t.shadowColor="black",t.shadowOffsetX=3*i,t.shadowOffsetY=3*i,t.shadowBlur=3*i;const s=n/this.userNameText.fontSize;t.scale(s,s),this.userNameText.draw(t,0,-this.userNameText.height)}t.restore()}}drawHearingTile(t,e,n,i,s){t.save(),t.translate((this.gridX+n)*e.tileWidth,(this.gridY+i)*e.tileHeight),t.strokeStyle=`rgba(0, 255, 0, ${(1-s)/2})`,t.strokeRect(0,0,e.tileWidth,e.tileHeight),t.restore()}drawHearingRange(t,e,n,i){const s=ae(t).a,o=Math.min(i,Math.ceil(t.canvas.width/(2*e.tileWidth*s))),r=Math.min(i,Math.ceil(t.canvas.height/(2*e.tileHeight*s)));for(let s=0;s<r;++s)for(let r=0;r<o;++r){const o=b(Math.sqrt(r*r+s*s),n,i);o<=1&&(this.drawHearingTile(t,e,r,s,o),0!=s&&this.drawHearingTile(t,e,r,-s,o),0!=r&&this.drawHearingTile(t,e,-r,s,o),0!=r&&0!=s&&this.drawHearingTile(t,e,-r,-s,o))}}}const nv=new Event("inputBindingChanged");class iv extends kn{constructor(){super();const t=new Map([["keyButtonUp","ArrowUp"],["keyButtonDown","ArrowDown"],["keyButtonLeft","ArrowLeft"],["keyButtonRight","ArrowRight"],["keyButtonEmote","e"],["keyButtonToggleAudio","a"],["keyButtonZoomOut","["],["keyButtonZoomIn","]"],["gpAxisLeftRight",0],["gpAxisUpDown",1],["gpButtonEmote",0],["gpButtonToggleAudio",1],["gpButtonZoomIn",6],["gpButtonZoomOut",7],["gpButtonUp",12],["gpButtonDown",13],["gpButtonLeft",14],["gpButtonRight",15]]);for(let e of t.keys())Object.defineProperty(this,e,{get:()=>t.get(e),set:n=>{t.has(e)&&n!==t.get(e)&&(t.set(e,n),this.dispatchEvent(nv))}});this.clone=()=>{const e={};for(let n of t.entries())e[n[0]]=n[1];return e},Object.freeze(this)}}const sv=Lt("7em"),ov=Lt("3em"),rv=new Event("avatarURLChanged"),av=new Event("gamepadChanged"),cv=new Event("selectAvatar"),lv=new Event("fontSizeChanged"),uv=new Event("inputBindingChanged"),hv=new Event("audioPropertiesChanged"),dv=new Event("toggleDrawHearing"),Av=new Event("toggleVideo"),pv=Object.assign(new Event("gamepadbuttonup"),{button:0}),gv=Object.assign(new Event("gamepadaxismaxed"),{axis:0}),fv=lt(!0),mv=lt(!1),vv=new WeakMap;class yv{constructor(){this.inputBinding=new iv,this.pad=null}}class wv extends vm{constructor(){super("options");const t=t=>()=>this.dispatchEvent(t),e=new yv;vv.set(this,e);const n=d(t(hv)),i=(t,n)=>{const i=oe(t,"text",n,sv,new Mn("keyup",n=>{"Tab"!==n.key&&"Shift"!==n.key&&(i.value=e.inputBinding[t]=n.key,this.dispatchEvent(uv))},s));var s;return i.value=e.inputBinding[t],i},s=(t,n)=>{const i=oe(t,"text",n,ov);return this.addEventListener("gamepadbuttonup",n=>{document.activeElement===i.input&&(i.value=e.inputBinding[t]=n.button,this.dispatchEvent(uv))}),i.value=e.inputBinding[t],i},o=(t,n)=>{const i=oe(t,"text",n,ov);return this.addEventListener("gamepadaxismaxed",n=>{document.activeElement===i.input&&(i.value=e.inputBinding[t]=n.axis,this.dispatchEvent(uv))}),i.value=e.inputBinding[t],i},r=[re("avatar","Avatar",jt(qt(ut("selectAvatarEmoji"),"Emoji: "),Ht(At("selectAvatarEmoji"),"Select",u(t(cv))))," or ",jt(qt(ut("setAvatarURL"),"Photo: "),this.avatarURLInput=Gt(mt("https://example.com/me.png")),Ht(At("setAvatarURL"),"Set",u(()=>{this.avatarURL=this.avatarURLInput.value,this.dispatchEvent(rv)})),this.clearAvatarURLButton=Ht(lt,"Clear",u(()=>{this.avatarURL=null,this.dispatchEvent(rv)})))," or ",jt(qt(ut("videoAvatarButton"),"Video: "),this.useVideoAvatarButton=Ht(At("videoAvatarButton"),"Use video",u(t(Av)))),this.avatarPreview=zt(Ct(256),ht(256))),re("interface","Interface",this.fontSizeInput=oe("fontSize","number","Font size: ",xt(10),gt(5),pt(32),ov,d(t(lv))),Xt(this.drawHearingCheck=oe("drawHearing","checkbox","Draw hearing range: ",d(()=>{this.drawHearing=!this.drawHearing,this.dispatchEvent(dv)})),this.audioMinInput=oe("minAudio","number","Min: ",xt(1),gt(0),pt(100),ov,n),this.audioMaxInput=oe("maxAudio","number","Min: ",xt(10),gt(0),pt(100),ov,n),this.audioRolloffInput=oe("rollof","number","Rollof: ",xt(1),gt(.1),pt(10),yt(.1),ov,n))),re("keyboard","Keyboard",this.keyButtonUp=i("keyButtonUp","Up: "),this.keyButtonDown=i("keyButtonDown","Down: "),this.keyButtonLeft=i("keyButtonLeft","Left: "),this.keyButtonRight=i("keyButtonRight","Right: "),this.keyButtonEmote=i("keyButtonEmote","Emote: "),this.keyButtonToggleAudio=i("keyButtonToggleAudio","Toggle audio: ")),re("gamepad","Gamepad",jt(qt(ut("gamepads"),"Use gamepad: "),this.gpSelect=ee("gamepads","No gamepad",t=>t.id,t=>t.id,d(t(av)))),this.gpAxisLeftRight=o("gpAxisLeftRight","Left/Right axis:"),this.gpAxisUpDown=o("gpAxisUpDown","Up/Down axis:"),this.gpButtonUp=s("gpButtonUp","Up button: "),this.gpButtonDown=s("gpButtonDown","Down button: "),this.gpButtonLeft=s("gpButtonLeft","Left button: "),this.gpButtonRight=s("gpButtonRight","Right button: "),this.gpButtonEmote=s("gpButtonEmote","Emote button: "),this.gpButtonToggleAudio=s("gpButtonToggleAudio","Toggle audio button: "))],a=[];for(let t=0;t<r.length;++t)a[t]="1fr",r[t].element.style.gridColumnStart=t+1;se(...a).apply(this.header),this.header.append(...r.map(t=>t.button)),this.content.append(...r.map(t=>t.element));const c=t=>()=>{for(let e=0;e<r.length;++e)r[e].visible=e===t};for(let t=0;t<r.length;++t)r[t].visible=0===t,r[t].addEventListener("select",c(t));e.inputBinding.addEventListener("inputBindingChanged",()=>{for(let t of Object.getOwnPropertyNames(e.inputBinding))void 0!==xt[t]&&null!=this[t]&&(this[t].value=xt[t])}),this.gamepads=[],this._drawHearing=!1,this.user=null,this._avatarG=this.avatarPreview.getContext("2d"),Object.seal(this)}update(){if(Dt(this)){const t=this.currentGamepad;t&&(self.pad?self.pad.update(t):(self.pad=new Om(t),self.pad.addEventListener("gamepadbuttonup",t=>{pv.button=t.button,this.dispatchEvent(pv)}),self.pad.addEventListener("gamepadaxismaxed",t=>{gv.axis=t.axis,this.dispatchEvent(gv)}))),this.user&&this.user.avatar&&(this._avatarG.clearRect(0,0,this.avatarPreview.width,this.avatarPreview.height),this.user.avatar.draw(this._avatarG,this.avatarPreview.width,this.avatarPreview.height,!0))}}get avatarURL(){return 0===this.avatarURLInput.value.length?null:this.avatarURLInput.value}set avatarURL(t){o(t)?(this.avatarURLInput.value=t,mv.apply(this.clearAvatarURLButton)):(this.avatarURLInput.value="",fv.apply(this.clearAvatarURLButton))}setAvatarVideo(t){this.useVideoAvatarButton.innerHTML=null!==t?"Remove video":"Use video"}get inputBinding(){return vv.get(this).inputBinding.clone()}set inputBinding(t){const e=vv.get(this);for(let n of Object.getOwnPropertyNames(t))void 0!==e.inputBinding[n]&&void 0!==t[n]&&null!=this[n]&&(e.inputBinding[n]=this[n].value=t[n])}get gamepads(){return this.gpSelect.values}set gamepads(t){const e=0===t.length;this.gpSelect.values=t,Bt(this.gpAxisLeftRight,e),Bt(this.gpAxisUpDown,e),Bt(this.gpButtonUp,e),Bt(this.gpButtonDown,e),Bt(this.gpButtonLeft,e),Bt(this.gpButtonRight,e),Bt(this.gpButtonEmote,e),Bt(this.gpButtonToggleAudio,e)}get currentGamepadIndex(){return this.gpSelect.selectedIndex}get currentGamepad(){return this.currentGamepadIndex<0?null:navigator.getGamepads()[this.currentGamepadIndex]}get gamepadIndex(){return this.gpSelect.selectedIndex}set gamepadIndex(t){this.gpSelect.selectedIndex=t}get drawHearing(){return this._drawHearing}set drawHearing(t){this._drawHearing=t,this.drawHearingCheck.checked=t}get audioDistanceMin(){const t=parseFloat(this.audioMinInput.value);return a(t)?t:1}set audioDistanceMin(t){a(t)&&t>0&&(this.audioMinInput.value=t,this.audioDistanceMin>this.audioDistanceMax&&(this.audioDistanceMax=this.audioDistanceMin))}get audioDistanceMax(){const t=parseFloat(this.audioMaxInput.value);return a(t)?t:10}set audioDistanceMax(t){a(t)&&t>0&&(this.audioMaxInput.value=t,this.audioDistanceMin>this.audioDistanceMax&&(this.audioDistanceMin=this.audioDistanceMax))}get audioRolloff(){const t=parseFloat(this.audioRolloffInput.value);return a(t)?t:1}set audioRolloff(t){a(t)&&t>0&&(this.audioRolloffInput.value=t)}get fontSize(){const t=parseFloat(this.fontSizeInput.value);return a(t)?t:16}set fontSize(t){a(t)&&t>0&&(this.fontSizeInput.value=t)}}var he,de=[0,2e3,1e4,3e4,null],Ae=function(){function t(t){this.retryDelays=void 0!==t?t.concat([null]):de}return t.prototype.nextRetryDelayInMilliseconds=function(t){return this.retryDelays[t.previousRetryCount]},t}(),pe=(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),ge=function(t){function e(e,n){var i=this,s=this.constructor.prototype;return(i=t.call(this,e)||this).statusCode=n,i.__proto__=s,i}return pe(e,t),e}(Error),fe=function(t){function e(e){void 0===e&&(e="A timeout occurred.");var n=this,i=this.constructor.prototype;return(n=t.call(this,e)||this).__proto__=i,n}return pe(e,t),e}(Error),me=function(t){function e(e){void 0===e&&(e="An abort occurred.");var n=this,i=this.constructor.prototype;return(n=t.call(this,e)||this).__proto__=i,n}return pe(e,t),e}(Error),ve=Object.assign,ye=function(t,e,n){this.statusCode=t,this.statusText=e,this.content=n},we=function(){function t(){}return t.prototype.get=function(t,e){return this.send(ve({},e,{method:"GET",url:t}))},t.prototype.post=function(t,e){return this.send(ve({},e,{method:"POST",url:t}))},t.prototype.delete=function(t,e){return this.send(ve({},e,{method:"DELETE",url:t}))},t.prototype.getCookieString=function(t){return""},t}();!function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"}(he||(he={}));var be=function(){function t(){}return t.prototype.log=function(t,e){},t.instance=new t,t}(),xe=function(t,e){var n,i,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=2&o[0]?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(t){o=[6,t],i=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ce=function(){function t(){}return t.isRequired=function(t,e){if(null==t)throw new Error("The '"+e+"' argument is required.")},t.isIn=function(t,e,n){if(!(t in e))throw new Error("Unknown "+n+" value: "+t+".")},t}(),De=function(){function t(){}return Object.defineProperty(t,"isBrowser",{get:function(){return"object"==typeof window},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWebWorker",{get:function(){return"object"==typeof self&&"importScripts"in self},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isNode",{get:function(){return!this.isBrowser&&!this.isWebWorker},enumerable:!0,configurable:!0}),t}();function Se(t,e){var n="";return _e(t)?(n="Binary data of length "+t.byteLength,e&&(n+=". Content: '"+function(t){var e=new Uint8Array(t),n="";return e.forEach((function(t){n+="0x"+(t<16?"0":"")+t.toString(16)+" "})),n.substr(0,n.length-1)}(t)+"'")):"string"==typeof t&&(n="String data of length "+t.length,e&&(n+=". Content: '"+t+"'")),n}function _e(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Ee(t,e,n,i,s,o,r){return function(t,e,n,i){return new(n||(n=Promise))((function(s,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){t.done?s(t.value):new n((function(e){e(t.value)})).then(r,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){var a,c,l,u,h;return xe(this,(function(d){switch(d.label){case 0:return s?[4,s()]:[3,2];case 1:(l=d.sent())&&((a={}).Authorization="Bearer "+l,c=a),d.label=2;case 2:return t.log(he.Trace,"("+e+" transport) sending data. "+Se(o,r)+"."),u=_e(o)?"arraybuffer":"text",[4,n.post(i,{content:o,headers:c,responseType:u})];case 3:return h=d.sent(),t.log(he.Trace,"("+e+" transport) request complete. Response status: "+h.statusCode+"."),[2]}}))}))}var Pe,Me=function(){function t(t,e){this.subject=t,this.observer=e}return t.prototype.dispose=function(){var t=this.subject.observers.indexOf(this.observer);t>-1&&this.subject.observers.splice(t,1),0===this.subject.observers.length&&this.subject.cancelCallback&&this.subject.cancelCallback().catch((function(t){}))},t}(),Be=function(){function t(t){this.minimumLogLevel=t,this.outputConsole=console}return t.prototype.log=function(t,e){if(t>=this.minimumLogLevel)switch(t){case he.Critical:case he.Error:this.outputConsole.error("["+(new Date).toISOString()+"] "+he[t]+": "+e);break;case he.Warning:this.outputConsole.warn("["+(new Date).toISOString()+"] "+he[t]+": "+e);break;case he.Information:this.outputConsole.info("["+(new Date).toISOString()+"] "+he[t]+": "+e);break;default:this.outputConsole.log("["+(new Date).toISOString()+"] "+he[t]+": "+e)}},t}(),ke=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Te=Object.assign;if("undefined"==typeof XMLHttpRequest){var Ie="function"==typeof __webpack_require__?__non_webpack_require__:require;Pe=Ie("request")}var Fe,Le,Oe=function(t){function e(e){var n=t.call(this)||this;if(void 0===Pe)throw new Error("The 'request' module could not be loaded.");return n.logger=e,n.cookieJar=Pe.jar(),n.request=Pe.defaults({jar:n.cookieJar}),n}return ke(e,t),e.prototype.send=function(t){var e=this;return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new me):new Promise((function(n,i){var s;s=_e(t.content)?Buffer.from(t.content):t.content||"";var o=e.request(t.url,{body:s,encoding:"arraybuffer"===t.responseType?null:"utf8",headers:Te({"X-Requested-With":"XMLHttpRequest"},t.headers),method:t.method,timeout:t.timeout},(function(s,o,r){if(t.abortSignal&&(t.abortSignal.onabort=null),s)return"ETIMEDOUT"===s.code&&(e.logger.log(he.Warning,"Timeout from HTTP request."),i(new fe)),e.logger.log(he.Warning,"Error from HTTP request. "+s),void i(s);o.statusCode>=200&&o.statusCode<300?n(new ye(o.statusCode,o.statusMessage||"",r)):i(new ge(o.statusMessage||"",o.statusCode||0))}));t.abortSignal&&(t.abortSignal.onabort=function(){o.abort(),i(new me)})}))},e.prototype.getCookieString=function(t){return this.cookieJar.getCookieString(t)},e}(we),Re=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ne=function(t){function e(e){var n=t.call(this)||this;return n.logger=e,n}return Re(e,t),e.prototype.send=function(t){var e=this;return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new me):t.method?t.url?new Promise((function(n,i){var s=new XMLHttpRequest;s.open(t.method,t.url,!0),s.withCredentials=!0,s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Content-Type","text/plain;charset=UTF-8");var o=t.headers;o&&Object.keys(o).forEach((function(t){s.setRequestHeader(t,o[t])})),t.responseType&&(s.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=function(){s.abort(),i(new me)}),t.timeout&&(s.timeout=t.timeout),s.onload=function(){t.abortSignal&&(t.abortSignal.onabort=null),s.status>=200&&s.status<300?n(new ye(s.status,s.statusText,s.response||s.responseText)):i(new ge(s.statusText,s.status))},s.onerror=function(){e.logger.log(he.Warning,"Error from HTTP request. "+s.status+": "+s.statusText+"."),i(new ge(s.statusText,s.status))},s.ontimeout=function(){e.logger.log(he.Warning,"Timeout from HTTP request."),i(new fe)},s.send(t.content||"")})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},e}(we),He=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ze=function(t){function e(e){var n=t.call(this)||this;return"undefined"!=typeof XMLHttpRequest?n.httpClient=new Ne(e):n.httpClient=new Oe(e),n}return He(e,t),e.prototype.send=function(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new me):t.method?t.url?this.httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},e.prototype.getCookieString=function(t){return this.httpClient.getCookieString(t)},e}(we);!function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"}(Fe||(Fe={})),function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"}(Le||(Le={}));var je=function(){function t(){this.isAborted=!1,this.onabort=null}return t.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(t.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),t}(),Qe=function(t,e,n,i){return new(n||(n=Promise))((function(s,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){t.done?s(t.value):new n((function(e){e(t.value)})).then(r,a)}c((i=i.apply(t,e||[])).next())}))},Ue=function(t,e){var n,i,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=2&o[0]?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(t){o=[6,t],i=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},We=function(){function t(t,e,n,i){this.httpClient=t,this.accessTokenFactory=e,this.logger=n,this.pollAbort=new je,this.logMessageContent=i,this.running=!1,this.onreceive=null,this.onclose=null}return Object.defineProperty(t.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),t.prototype.connect=function(t,e){return Qe(this,void 0,void 0,(function(){var n,i,s,o;return Ue(this,(function(r){switch(r.label){case 0:if(Ce.isRequired(t,"url"),Ce.isRequired(e,"transferFormat"),Ce.isIn(e,Le,"transferFormat"),this.url=t,this.logger.log(he.Trace,"(LongPolling transport) Connecting."),e===Le.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return n={abortSignal:this.pollAbort.signal,headers:{},timeout:1e5},e===Le.Binary&&(n.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return i=r.sent(),this.updateHeaderToken(n,i),s=t+"&_="+Date.now(),this.logger.log(he.Trace,"(LongPolling transport) polling: "+s+"."),[4,this.httpClient.get(s,n)];case 2:return 200!==(o=r.sent()).statusCode?(this.logger.log(he.Error,"(LongPolling transport) Unexpected response code: "+o.statusCode+"."),this.closeError=new ge(o.statusText||"",o.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,n),[2]}}))}))},t.prototype.getAccessToken=function(){return Qe(this,void 0,void 0,(function(){return Ue(this,(function(t){switch(t.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,t.sent()];case 2:return[2,null]}}))}))},t.prototype.updateHeaderToken=function(t,e){t.headers||(t.headers={}),e?t.headers.Authorization="Bearer "+e:t.headers.Authorization&&delete t.headers.Authorization},t.prototype.poll=function(t,e){return Qe(this,void 0,void 0,(function(){var n,i,s,o;return Ue(this,(function(r){switch(r.label){case 0:r.trys.push([0,,8,9]),r.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:n=r.sent(),this.updateHeaderToken(e,n),r.label=3;case 3:return r.trys.push([3,5,,6]),i=t+"&_="+Date.now(),this.logger.log(he.Trace,"(LongPolling transport) polling: "+i+"."),[4,this.httpClient.get(i,e)];case 4:return 204===(s=r.sent()).statusCode?(this.logger.log(he.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1):200!==s.statusCode?(this.logger.log(he.Error,"(LongPolling transport) Unexpected response code: "+s.statusCode+"."),this.closeError=new ge(s.statusText||"",s.statusCode),this.running=!1):s.content?(this.logger.log(he.Trace,"(LongPolling transport) data received. "+Se(s.content,this.logMessageContent)+"."),this.onreceive&&this.onreceive(s.content)):this.logger.log(he.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,6];case 5:return o=r.sent(),this.running?o instanceof fe?this.logger.log(he.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=o,this.running=!1):this.logger.log(he.Trace,"(LongPolling transport) Poll errored after shutdown: "+o.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(he.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}}))}))},t.prototype.send=function(t){return Qe(this,void 0,void 0,(function(){return Ue(this,(function(e){return this.running?[2,Ee(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,t,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},t.prototype.stop=function(){return Qe(this,void 0,void 0,(function(){var t,e;return Ue(this,(function(n){switch(n.label){case 0:this.logger.log(he.Trace,"(LongPolling transport) Stopping polling."),this.running=!1,this.pollAbort.abort(),n.label=1;case 1:return n.trys.push([1,,5,6]),[4,this.receiving];case 2:return n.sent(),this.logger.log(he.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),t={headers:{}},[4,this.getAccessToken()];case 3:return e=n.sent(),this.updateHeaderToken(t,e),[4,this.httpClient.delete(this.url,t)];case 4:return n.sent(),this.logger.log(he.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(he.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}}))}))},t.prototype.raiseOnClose=function(){if(this.onclose){var t="(LongPolling transport) Firing onclose event.";this.closeError&&(t+=" Error: "+this.closeError),this.logger.log(he.Trace,t),this.onclose(this.closeError)}},t}(),Ge=function(t,e,n,i){return new(n||(n=Promise))((function(s,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){t.done?s(t.value):new n((function(e){e(t.value)})).then(r,a)}c((i=i.apply(t,e||[])).next())}))},qe=function(t,e){var n,i,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=2&o[0]?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(t){o=[6,t],i=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ve=function(){function t(t,e,n,i,s){this.httpClient=t,this.accessTokenFactory=e,this.logger=n,this.logMessageContent=i,this.eventSourceConstructor=s,this.onreceive=null,this.onclose=null}return t.prototype.connect=function(t,e){return Ge(this,void 0,void 0,(function(){var n,i=this;return qe(this,(function(s){switch(s.label){case 0:return Ce.isRequired(t,"url"),Ce.isRequired(e,"transferFormat"),Ce.isIn(e,Le,"transferFormat"),this.logger.log(he.Trace,"(SSE transport) Connecting."),this.url=t,this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=s.sent())&&(t+=(t.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),s.label=2;case 2:return[2,new Promise((function(n,s){var o=!1;if(e===Le.Text){var r;if(De.isBrowser||De.isWebWorker)r=new i.eventSourceConstructor(t,{withCredentials:!0});else{var a=i.httpClient.getCookieString(t);r=new i.eventSourceConstructor(t,{withCredentials:!0,headers:{Cookie:a}})}try{r.onmessage=function(t){if(i.onreceive)try{i.logger.log(he.Trace,"(SSE transport) data received. "+Se(t.data,i.logMessageContent)+"."),i.onreceive(t.data)}catch(t){return void i.close(t)}},r.onerror=function(t){var e=new Error(t.data||"Error occurred");o?i.close(e):s(e)},r.onopen=function(){i.logger.log(he.Information,"SSE connected to "+i.url),i.eventSource=r,o=!0,n()}}catch(t){return void s(t)}}else s(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))]}}))}))},t.prototype.send=function(t){return Ge(this,void 0,void 0,(function(){return qe(this,(function(e){return this.eventSource?[2,Ee(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,t,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},t.prototype.stop=function(){return this.close(),Promise.resolve()},t.prototype.close=function(t){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0,this.onclose&&this.onclose(t))},t}(),Ye=function(t,e){var n,i,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=2&o[0]?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(t){o=[6,t],i=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Xe=function(){function t(t,e,n,i,s){this.logger=n,this.accessTokenFactory=e,this.logMessageContent=i,this.webSocketConstructor=s,this.httpClient=t,this.onreceive=null,this.onclose=null}return t.prototype.connect=function(t,e){return function(t,e,n,i){return new(n||(n=Promise))((function(s,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){t.done?s(t.value):new n((function(e){e(t.value)})).then(r,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){var n,i=this;return Ye(this,(function(s){switch(s.label){case 0:return Ce.isRequired(t,"url"),Ce.isRequired(e,"transferFormat"),Ce.isIn(e,Le,"transferFormat"),this.logger.log(he.Trace,"(WebSockets transport) Connecting."),this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=s.sent())&&(t+=(t.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),s.label=2;case 2:return[2,new Promise((function(n,s){var o;t=t.replace(/^http/,"ws");var r=i.httpClient.getCookieString(t),a=!1;De.isNode&&r&&(o=new i.webSocketConstructor(t,void 0,{headers:{Cookie:""+r}})),o||(o=new i.webSocketConstructor(t)),e===Le.Binary&&(o.binaryType="arraybuffer"),o.onopen=function(e){i.logger.log(he.Information,"WebSocket connected to "+t+"."),i.webSocket=o,a=!0,n()},o.onerror=function(t){var e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:new Error("There was an error with the transport."),s(e)},o.onmessage=function(t){i.logger.log(he.Trace,"(WebSockets transport) data received. "+Se(t.data,i.logMessageContent)+"."),i.onreceive&&i.onreceive(t.data)},o.onclose=function(t){if(a)i.close(t);else{var e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:new Error("There was an error with the transport."),s(e)}}}))]}}))}))},t.prototype.send=function(t){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(he.Trace,"(WebSockets transport) sending data. "+Se(t,this.logMessageContent)+"."),this.webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},t.prototype.stop=function(){return this.webSocket&&this.close(void 0),Promise.resolve()},t.prototype.close=function(t){this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=void 0),this.logger.log(he.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!t||!1!==t.wasClean&&1e3===t.code?this.onclose():this.onclose(new Error("WebSocket closed with status code: "+t.code+" ("+t.reason+").")))},t}(),Ze=function(t,e,n,i){return new(n||(n=Promise))((function(s,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){t.done?s(t.value):new n((function(e){e(t.value)})).then(r,a)}c((i=i.apply(t,e||[])).next())}))},Je=function(t,e){var n,i,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=2&o[0]?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(t){o=[6,t],i=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ke=null,$e=null;if(De.isNode&&"undefined"!=typeof require){var tn="function"==typeof __webpack_require__?__non_webpack_require__:require;Ke=tn("ws"),$e=tn("eventsource")}var en=function(){function t(t,e){void 0===e&&(e={}),this.features={},this.negotiateVersion=1,Ce.isRequired(t,"url"),this.logger=function(t){return void 0===t?new Be(he.Information):null===t?be.instance:t.log?t:new Be(t)}(e.logger),this.baseUrl=this.resolveUrl(t),(e=e||{}).logMessageContent=e.logMessageContent||!1,De.isNode||"undefined"==typeof WebSocket||e.WebSocket?De.isNode&&!e.WebSocket&&Ke&&(e.WebSocket=Ke):e.WebSocket=WebSocket,De.isNode||"undefined"==typeof EventSource||e.EventSource?De.isNode&&!e.EventSource&&void 0!==$e&&(e.EventSource=$e):e.EventSource=EventSource,this.httpClient=e.httpClient||new ze(this.logger),this.connectionState="Disconnected",this.connectionStarted=!1,this.options=e,this.onreceive=null,this.onclose=null}return t.prototype.start=function(t){return Ze(this,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:return t=t||Le.Binary,Ce.isIn(t,Le,"transferFormat"),this.logger.log(he.Debug,"Starting connection with transfer format '"+Le[t]+"'."),"Disconnected"!==this.connectionState?[2,Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."))]:(this.connectionState="Connecting ",this.startInternalPromise=this.startInternal(t),[4,this.startInternalPromise]);case 1:return n.sent(),"Disconnecting"!==this.connectionState?[3,3]:(e="Failed to start the HttpConnection before stop() was called.",this.logger.log(he.Error,e),[4,this.stopPromise]);case 2:return n.sent(),[2,Promise.reject(new Error(e))];case 3:if("Connected"!==this.connectionState)return e="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!",this.logger.log(he.Error,e),[2,Promise.reject(new Error(e))];n.label=4;case 4:return this.connectionStarted=!0,[2]}}))}))},t.prototype.send=function(t){return"Connected"!==this.connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this.sendQueue||(this.sendQueue=new sn(this.transport)),this.sendQueue.send(t))},t.prototype.stop=function(t){return Ze(this,void 0,void 0,(function(){var e=this;return Je(this,(function(n){switch(n.label){case 0:return"Disconnected"===this.connectionState?(this.logger.log(he.Debug,"Call to HttpConnection.stop("+t+") ignored because the connection is already in the disconnected state."),[2,Promise.resolve()]):"Disconnecting"===this.connectionState?(this.logger.log(he.Debug,"Call to HttpConnection.stop("+t+") ignored because the connection is already in the disconnecting state."),[2,this.stopPromise]):(this.connectionState="Disconnecting",this.stopPromise=new Promise((function(t){e.stopPromiseResolver=t})),[4,this.stopInternal(t)]);case 1:return n.sent(),[4,this.stopPromise];case 2:return n.sent(),[2]}}))}))},t.prototype.stopInternal=function(t){return Ze(this,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:this.stopError=t,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.startInternalPromise];case 2:return n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:if(!this.transport)return[3,9];n.label=5;case 5:return n.trys.push([5,7,,8]),[4,this.transport.stop()];case 6:return n.sent(),[3,8];case 7:return e=n.sent(),this.logger.log(he.Error,"HttpConnection.transport.stop() threw error '"+e+"'."),this.stopConnection(),[3,8];case 8:return this.transport=void 0,[3,10];case 9:this.logger.log(he.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed."),this.stopConnection(),n.label=10;case 10:return[2]}}))}))},t.prototype.startInternal=function(t){return Ze(this,void 0,void 0,(function(){var e,n,i,s,o,r;return Je(this,(function(a){switch(a.label){case 0:e=this.baseUrl,this.accessTokenFactory=this.options.accessTokenFactory,a.label=1;case 1:return a.trys.push([1,12,,13]),this.options.skipNegotiation?this.options.transport!==Fe.WebSockets?[3,3]:(this.transport=this.constructTransport(Fe.WebSockets),[4,this.startTransport(e,t)]):[3,5];case 2:return a.sent(),[3,4];case 3:throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:n=null,i=0,s=function(){var t;return Je(this,(function(s){switch(s.label){case 0:return[4,o.getNegotiationResponse(e)];case 1:if(n=s.sent(),"Disconnecting"===o.connectionState||"Disconnected"===o.connectionState)throw new Error("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return n.url&&(e=n.url),n.accessToken&&(t=n.accessToken,o.accessTokenFactory=function(){return t}),i++,[2]}}))},o=this,a.label=6;case 6:return[5,s()];case 7:a.sent(),a.label=8;case 8:if(n.url&&i<100)return[3,6];a.label=9;case 9:if(100===i&&n.url)throw new Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(e,this.options.transport,n,t)];case 10:a.sent(),a.label=11;case 11:return this.transport instanceof We&&(this.features.inherentKeepAlive=!0),"Connecting "===this.connectionState&&(this.logger.log(he.Debug,"The HttpConnection connected successfully."),this.connectionState="Connected"),[3,13];case 12:return r=a.sent(),this.logger.log(he.Error,"Failed to start the connection: "+r),this.connectionState="Disconnected",this.transport=void 0,[2,Promise.reject(r)];case 13:return[2]}}))}))},t.prototype.getNegotiationResponse=function(t){return Ze(this,void 0,void 0,(function(){var e,n,i,s,o,r,a;return Je(this,(function(c){switch(c.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(i=c.sent())&&((e={}).Authorization="Bearer "+i,n=e),c.label=2;case 2:s=this.resolveNegotiateUrl(t),this.logger.log(he.Debug,"Sending negotiation request: "+s+"."),c.label=3;case 3:return c.trys.push([3,5,,6]),[4,this.httpClient.post(s,{content:"",headers:n})];case 4:return 200!==(o=c.sent()).statusCode?[2,Promise.reject(new Error("Unexpected status code returned from negotiate "+o.statusCode))]:((!(r=JSON.parse(o.content)).negotiateVersion||r.negotiateVersion<1)&&(r.connectionToken=r.connectionId),[2,r]);case 5:return a=c.sent(),this.logger.log(he.Error,"Failed to complete negotiation with the server: "+a),[2,Promise.reject(a)];case 6:return[2]}}))}))},t.prototype.createConnectUrl=function(t,e){return e?t+(-1===t.indexOf("?")?"?":"&")+"id="+e:t},t.prototype.createTransport=function(t,e,n,i){return Ze(this,void 0,void 0,(function(){var s,o,r,a,c,l,u,h,d,A,p;return Je(this,(function(g){switch(g.label){case 0:return s=this.createConnectUrl(t,n.connectionToken),this.isITransport(e)?(this.logger.log(he.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=e,[4,this.startTransport(s,i)]):[3,2];case 1:return g.sent(),this.connectionId=n.connectionId,[2];case 2:o=[],r=n.availableTransports||[],a=n,c=0,l=r,g.label=3;case 3:return c<l.length?(u=l[c],(h=this.resolveTransportOrError(u,e,i))instanceof Error?(o.push(u.transport+" failed: "+h),[3,12]):[3,4]):[3,13];case 4:if(!this.isITransport(h))return[3,12];if(this.transport=h,a)return[3,9];g.label=5;case 5:return g.trys.push([5,7,,8]),[4,this.getNegotiationResponse(t)];case 6:return a=g.sent(),[3,8];case 7:return d=g.sent(),[2,Promise.reject(d)];case 8:s=this.createConnectUrl(t,a.connectionToken),g.label=9;case 9:return g.trys.push([9,11,,12]),[4,this.startTransport(s,i)];case 10:return g.sent(),this.connectionId=a.connectionId,[2];case 11:return A=g.sent(),this.logger.log(he.Error,"Failed to start the transport '"+u.transport+"': "+A),a=void 0,o.push(u.transport+" failed: "+A),"Connecting "!==this.connectionState?(p="Failed to select transport before stop() was called.",this.logger.log(he.Debug,p),[2,Promise.reject(new Error(p))]):[3,12];case 12:return c++,[3,3];case 13:return o.length>0?[2,Promise.reject(new Error("Unable to connect to the server with any of the available transports. "+o.join(" ")))]:[2,Promise.reject(new Error("None of the transports supported by the client are supported by the server."))]}}))}))},t.prototype.constructTransport=function(t){switch(t){case Fe.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Xe(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket);case Fe.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Ve(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource);case Fe.LongPolling:return new We(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1);default:throw new Error("Unknown transport: "+t+".")}},t.prototype.startTransport=function(t,e){var n=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=function(t){return n.stopConnection(t)},this.transport.connect(t,e)},t.prototype.resolveTransportOrError=function(t,e,n){var i=Fe[t.transport];if(null==i)return this.logger.log(he.Debug,"Skipping transport '"+t.transport+"' because it is not supported by this client."),new Error("Skipping transport '"+t.transport+"' because it is not supported by this client.");if(!function(t,e){return!t||0!=(e&t)}(e,i))return this.logger.log(he.Debug,"Skipping transport '"+Fe[i]+"' because it was disabled by the client."),new Error("'"+Fe[i]+"' is disabled by the client.");if(!(t.transferFormats.map((function(t){return Le[t]})).indexOf(n)>=0))return this.logger.log(he.Debug,"Skipping transport '"+Fe[i]+"' because it does not support the requested transfer format '"+Le[n]+"'."),new Error("'"+Fe[i]+"' does not support "+Le[n]+".");if(i===Fe.WebSockets&&!this.options.WebSocket||i===Fe.ServerSentEvents&&!this.options.EventSource)return this.logger.log(he.Debug,"Skipping transport '"+Fe[i]+"' because it is not supported in your environment.'"),new Error("'"+Fe[i]+"' is not supported in your environment.");this.logger.log(he.Debug,"Selecting transport '"+Fe[i]+"'.");try{return this.constructTransport(i)}catch(t){return t}},t.prototype.isITransport=function(t){return t&&"object"==typeof t&&"connect"in t},t.prototype.stopConnection=function(t){var e=this;if(this.logger.log(he.Debug,"HttpConnection.stopConnection("+t+") called while in state "+this.connectionState+"."),this.transport=void 0,t=this.stopError||t,this.stopError=void 0,"Disconnected"!==this.connectionState)if("Connecting "!==this.connectionState){if("Disconnecting"===this.connectionState&&this.stopPromiseResolver(),t?this.logger.log(he.Error,"Connection disconnected with error '"+t+"'."):this.logger.log(he.Information,"Connection disconnected."),this.sendQueue&&(this.sendQueue.stop().catch((function(t){e.logger.log(he.Error,"TransportSendQueue.stop() threw error '"+t+"'.")})),this.sendQueue=void 0),this.connectionId=void 0,this.connectionState="Disconnected",this.connectionStarted){this.connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(e){this.logger.log(he.Error,"HttpConnection.onclose("+t+") threw error '"+e+"'.")}}}else this.logger.log(he.Warning,"Call to HttpConnection.stopConnection("+t+") was ignored because the connection hasn't yet left the in the connecting state.");else this.logger.log(he.Debug,"Call to HttpConnection.stopConnection("+t+") was ignored because the connection is already in the disconnected state.")},t.prototype.resolveUrl=function(t){if(0===t.lastIndexOf("https://",0)||0===t.lastIndexOf("http://",0))return t;if(!De.isBrowser||!window.document)throw new Error("Cannot resolve '"+t+"'.");var e=window.document.createElement("a");return e.href=t,this.logger.log(he.Information,"Normalizing '"+t+"' to '"+e.href+"'."),e.href},t.prototype.resolveNegotiateUrl=function(t){var e=t.indexOf("?"),n=t.substring(0,-1===e?t.length:e);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",-1===(n+=-1===e?"":t.substring(e)).indexOf("negotiateVersion")&&(n+=-1===e?"?":"&",n+="negotiateVersion="+this.negotiateVersion),n},t}();var nn,sn=function(){function t(t){this.transport=t,this.buffer=[],this.executing=!0,this.sendBufferedData=new on,this.transportResult=new on,this.sendLoopPromise=this.sendLoop()}return t.prototype.send=function(t){return this.bufferData(t),this.transportResult||(this.transportResult=new on),this.transportResult.promise},t.prototype.stop=function(){return this.executing=!1,this.sendBufferedData.resolve(),this.sendLoopPromise},t.prototype.bufferData=function(t){if(this.buffer.length&&typeof this.buffer[0]!=typeof t)throw new Error("Expected data to be of type "+typeof this.buffer+" but was of type "+typeof t);this.buffer.push(t),this.sendBufferedData.resolve()},t.prototype.sendLoop=function(){return Ze(this,void 0,void 0,(function(){var e,n,i;return Je(this,(function(s){switch(s.label){case 0:return[4,this.sendBufferedData.promise];case 1:if(s.sent(),!this.executing)return this.transportResult&&this.transportResult.reject("Connection stopped."),[3,6];this.sendBufferedData=new on,e=this.transportResult,this.transportResult=void 0,n="string"==typeof this.buffer[0]?this.buffer.join(""):t.concatBuffers(this.buffer),this.buffer.length=0,s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.transport.send(n)];case 3:return s.sent(),e.resolve(),[3,5];case 4:return i=s.sent(),e.reject(i),[3,5];case 5:return[3,0];case 6:return[2]}}))}))},t.concatBuffers=function(t){for(var e=t.map((function(t){return t.byteLength})).reduce((function(t,e){return t+e})),n=new Uint8Array(e),i=0,s=0,o=t;s<o.length;s++){var r=o[s];n.set(new Uint8Array(r),i),i+=r.byteLength}return n},t}(),on=function(){function t(){var t=this;this.promise=new Promise((function(e,n){var i;return i=[e,n],t.resolver=i[0],t.rejecter=i[1],i}))}return t.prototype.resolve=function(){this.resolver()},t.prototype.reject=function(t){this.rejecter(t)},t}(),rn=function(){function t(){}return t.write=function(e){return""+e+t.RecordSeparator},t.parse=function(e){if(e[e.length-1]!==t.RecordSeparator)throw new Error("Message is incomplete.");var n=e.split(t.RecordSeparator);return n.pop(),n},t.RecordSeparatorCode=30,t.RecordSeparator=String.fromCharCode(t.RecordSeparatorCode),t}(),an=function(){function t(){}return t.prototype.writeHandshakeRequest=function(t){return rn.write(JSON.stringify(t))},t.prototype.parseHandshakeResponse=function(t){var e,n;if(_e(t)||"undefined"!=typeof Buffer&&t instanceof Buffer){var i=new Uint8Array(t);if(-1===(o=i.indexOf(rn.RecordSeparatorCode)))throw new Error("Message is incomplete.");var s=o+1;e=String.fromCharCode.apply(null,i.slice(0,s)),n=i.byteLength>s?i.slice(s).buffer:null}else{var o,r=t;if(-1===(o=r.indexOf(rn.RecordSeparator)))throw new Error("Message is incomplete.");s=o+1;e=r.substring(0,s),n=r.length>s?r.substring(s):null}var a=rn.parse(e),c=JSON.parse(a[0]);if(c.type)throw new Error("Expected a handshake response from the server.");return[n,c]},t}();!function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close"}(nn||(nn={}));var cn,ln=function(){function t(){this.observers=[]}return t.prototype.next=function(t){for(var e=0,n=this.observers;e<n.length;e++){n[e].next(t)}},t.prototype.error=function(t){for(var e=0,n=this.observers;e<n.length;e++){var i=n[e];i.error&&i.error(t)}},t.prototype.complete=function(){for(var t=0,e=this.observers;t<e.length;t++){var n=e[t];n.complete&&n.complete()}},t.prototype.subscribe=function(t){return this.observers.push(t),new Me(this,t)},t}(),un=function(t,e,n,i){return new(n||(n=Promise))((function(s,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){t.done?s(t.value):new n((function(e){e(t.value)})).then(r,a)}c((i=i.apply(t,e||[])).next())}))},hn=function(t,e){var n,i,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=2&o[0]?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(t){o=[6,t],i=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};!function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"}(cn||(cn={}));var dn=function(){function t(t,e,n,i){var s=this;Ce.isRequired(t,"connection"),Ce.isRequired(e,"logger"),Ce.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this.logger=e,this.protocol=n,this.connection=t,this.reconnectPolicy=i,this.handshakeProtocol=new an,this.connection.onreceive=function(t){return s.processIncomingData(t)},this.connection.onclose=function(t){return s.connectionClosed(t)},this.callbacks={},this.methods={},this.closedCallbacks=[],this.reconnectingCallbacks=[],this.reconnectedCallbacks=[],this.invocationId=0,this.receivedHandshakeResponse=!1,this.connectionState=cn.Disconnected,this.connectionStarted=!1,this.cachedPingMessage=this.protocol.writeMessage({type:nn.Ping})}return t.create=function(e,n,i,s){return new t(e,n,i,s)},Object.defineProperty(t.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectionId",{get:function(){return this.connection&&this.connection.connectionId||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseUrl",{get:function(){return this.connection.baseUrl||""},set:function(t){if(this.connectionState!==cn.Disconnected&&this.connectionState!==cn.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t},enumerable:!0,configurable:!0}),t.prototype.start=function(){return this.startPromise=this.startWithStateTransitions(),this.startPromise},t.prototype.startWithStateTransitions=function(){return un(this,void 0,void 0,(function(){var t;return hn(this,(function(e){switch(e.label){case 0:if(this.connectionState!==cn.Disconnected)return[2,Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."))];this.connectionState=cn.Connecting,this.logger.log(he.Debug,"Starting HubConnection."),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.startInternal()];case 2:return e.sent(),this.connectionState=cn.Connected,this.connectionStarted=!0,this.logger.log(he.Debug,"HubConnection connected successfully."),[3,4];case 3:return t=e.sent(),this.connectionState=cn.Disconnected,this.logger.log(he.Debug,"HubConnection failed to start successfully because of error '"+t+"'."),[2,Promise.reject(t)];case 4:return[2]}}))}))},t.prototype.startInternal=function(){return un(this,void 0,void 0,(function(){var t,e,n,i=this;return hn(this,(function(s){switch(s.label){case 0:return this.stopDuringStartError=void 0,this.receivedHandshakeResponse=!1,t=new Promise((function(t,e){i.handshakeResolver=t,i.handshakeRejecter=e})),[4,this.connection.start(this.protocol.transferFormat)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),e={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(he.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(e))];case 3:return s.sent(),this.logger.log(he.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,t];case 4:if(s.sent(),this.stopDuringStartError)throw this.stopDuringStartError;return[3,7];case 5:return n=s.sent(),this.logger.log(he.Debug,"Hub handshake failed with error '"+n+"' during start(). Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),[4,this.connection.stop(n)];case 6:throw s.sent(),n;case 7:return[2]}}))}))},t.prototype.stop=function(){return un(this,void 0,void 0,(function(){var t;return hn(this,(function(e){switch(e.label){case 0:return t=this.startPromise,this.stopPromise=this.stopInternal(),[4,this.stopPromise];case 1:e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t];case 3:return e.sent(),[3,5];case 4:return e.sent(),[3,5];case 5:return[2]}}))}))},t.prototype.stopInternal=function(t){return this.connectionState===cn.Disconnected?(this.logger.log(he.Debug,"Call to HubConnection.stop("+t+") ignored because it is already in the disconnected state."),Promise.resolve()):this.connectionState===cn.Disconnecting?(this.logger.log(he.Debug,"Call to HttpConnection.stop("+t+") ignored because the connection is already in the disconnecting state."),this.stopPromise):(this.connectionState=cn.Disconnecting,this.logger.log(he.Debug,"Stopping HubConnection."),this.reconnectDelayHandle?(this.logger.log(he.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this.reconnectDelayHandle),this.reconnectDelayHandle=void 0,this.completeClose(),Promise.resolve()):(this.cleanupTimeout(),this.cleanupPingTimer(),this.stopDuringStartError=t||new Error("The connection was stopped before the hub handshake could complete."),this.connection.stop(t)))},t.prototype.stream=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var s,o=this.replaceStreamingParams(n),r=o[0],a=o[1],c=this.createStreamInvocation(t,n,a),l=new ln;return l.cancelCallback=function(){var t=e.createCancelInvocation(c.invocationId);return delete e.callbacks[c.invocationId],s.then((function(){return e.sendWithProtocol(t)}))},this.callbacks[c.invocationId]=function(t,e){e?l.error(e):t&&(t.type===nn.Completion?t.error?l.error(new Error(t.error)):l.complete():l.next(t.item))},s=this.sendWithProtocol(c).catch((function(t){l.error(t),delete e.callbacks[c.invocationId]})),this.launchStreams(r,s),l},t.prototype.sendMessage=function(t){return this.resetKeepAliveInterval(),this.connection.send(t)},t.prototype.sendWithProtocol=function(t){return this.sendMessage(this.protocol.writeMessage(t))},t.prototype.send=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.replaceStreamingParams(e),s=i[0],o=i[1],r=this.sendWithProtocol(this.createInvocation(t,e,!0,o));return this.launchStreams(s,r),r},t.prototype.invoke=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var s=this.replaceStreamingParams(n),o=s[0],r=s[1],a=this.createInvocation(t,n,!1,r),c=new Promise((function(t,n){e.callbacks[a.invocationId]=function(e,i){i?n(i):e&&(e.type===nn.Completion?e.error?n(new Error(e.error)):t(e.result):n(new Error("Unexpected message type: "+e.type)))};var i=e.sendWithProtocol(a).catch((function(t){n(t),delete e.callbacks[a.invocationId]}));e.launchStreams(o,i)}));return c},t.prototype.on=function(t,e){t&&e&&(t=t.toLowerCase(),this.methods[t]||(this.methods[t]=[]),-1===this.methods[t].indexOf(e)&&this.methods[t].push(e))},t.prototype.off=function(t,e){if(t){t=t.toLowerCase();var n=this.methods[t];if(n)if(e){var i=n.indexOf(e);-1!==i&&(n.splice(i,1),0===n.length&&delete this.methods[t])}else delete this.methods[t]}},t.prototype.onclose=function(t){t&&this.closedCallbacks.push(t)},t.prototype.onreconnecting=function(t){t&&this.reconnectingCallbacks.push(t)},t.prototype.onreconnected=function(t){t&&this.reconnectedCallbacks.push(t)},t.prototype.processIncomingData=function(t){if(this.cleanupTimeout(),this.receivedHandshakeResponse||(t=this.processHandshakeResponse(t),this.receivedHandshakeResponse=!0),t)for(var e=0,n=this.protocol.parseMessages(t,this.logger);e<n.length;e++){var i=n[e];switch(i.type){case nn.Invocation:this.invokeClientMethod(i);break;case nn.StreamItem:case nn.Completion:var s=this.callbacks[i.invocationId];s&&(i.type===nn.Completion&&delete this.callbacks[i.invocationId],s(i));break;case nn.Ping:break;case nn.Close:this.logger.log(he.Information,"Close message received from server.");var o=i.error?new Error("Server returned an error on close: "+i.error):void 0;!0===i.allowReconnect?this.connection.stop(o):this.stopPromise=this.stopInternal(o);break;default:this.logger.log(he.Warning,"Invalid message type: "+i.type+".")}}this.resetTimeoutPeriod()},t.prototype.processHandshakeResponse=function(t){var e,n,i;try{i=(e=this.handshakeProtocol.parseHandshakeResponse(t))[0],n=e[1]}catch(t){var s="Error parsing handshake response: "+t;this.logger.log(he.Error,s);var o=new Error(s);throw this.handshakeRejecter(o),o}if(n.error){s="Server returned handshake error: "+n.error;this.logger.log(he.Error,s);o=new Error(s);throw this.handshakeRejecter(o),o}return this.logger.log(he.Debug,"Server handshake complete."),this.handshakeResolver(),i},t.prototype.resetKeepAliveInterval=function(){var t=this;this.cleanupPingTimer(),this.pingServerHandle=setTimeout((function(){return un(t,void 0,void 0,(function(){return hn(this,(function(t){switch(t.label){case 0:if(this.connectionState!==cn.Connected)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return t.sent(),[3,4];case 3:return t.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}}))}))}),this.keepAliveIntervalInMilliseconds)},t.prototype.resetTimeoutPeriod=function(){var t=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout((function(){return t.serverTimeout()}),this.serverTimeoutInMilliseconds))},t.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},t.prototype.invokeClientMethod=function(t){var e=this,n=this.methods[t.target.toLowerCase()];if(n){try{n.forEach((function(n){return n.apply(e,t.arguments)}))}catch(e){this.logger.log(he.Error,"A callback for the method "+t.target.toLowerCase()+" threw error '"+e+"'.")}if(t.invocationId){var i="Server requested a response, which is not supported in this version of the client.";this.logger.log(he.Error,i),this.stopPromise=this.stopInternal(new Error(i))}}else this.logger.log(he.Warning,"No client method with the name '"+t.target+"' found.")},t.prototype.connectionClosed=function(t){this.logger.log(he.Debug,"HubConnection.connectionClosed("+t+") called while in state "+this.connectionState+"."),this.stopDuringStartError=this.stopDuringStartError||t||new Error("The underlying connection was closed before the hub handshake could complete."),this.handshakeResolver&&this.handshakeResolver(),this.cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this.cleanupTimeout(),this.cleanupPingTimer(),this.connectionState===cn.Disconnecting?this.completeClose(t):this.connectionState===cn.Connected&&this.reconnectPolicy?this.reconnect(t):this.connectionState===cn.Connected&&this.completeClose(t)},t.prototype.completeClose=function(t){var e=this;if(this.connectionStarted){this.connectionState=cn.Disconnected,this.connectionStarted=!1;try{this.closedCallbacks.forEach((function(n){return n.apply(e,[t])}))}catch(e){this.logger.log(he.Error,"An onclose callback called with error '"+t+"' threw error '"+e+"'.")}}},t.prototype.reconnect=function(t){return un(this,void 0,void 0,(function(){var e,n,i,s,o,r=this;return hn(this,(function(a){switch(a.label){case 0:if(e=Date.now(),n=0,i=void 0!==t?t:new Error("Attempting to reconnect due to a unknown error."),null===(s=this.getNextRetryDelay(n++,0,i)))return this.logger.log(he.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this.completeClose(t),[2];if(this.connectionState=cn.Reconnecting,t?this.logger.log(he.Information,"Connection reconnecting because of error '"+t+"'."):this.logger.log(he.Information,"Connection reconnecting."),this.onreconnecting){try{this.reconnectingCallbacks.forEach((function(e){return e.apply(r,[t])}))}catch(e){this.logger.log(he.Error,"An onreconnecting callback called with error '"+t+"' threw error '"+e+"'.")}if(this.connectionState!==cn.Reconnecting)return this.logger.log(he.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting."),[2]}a.label=1;case 1:return null===s?[3,7]:(this.logger.log(he.Information,"Reconnect attempt number "+n+" will start in "+s+" ms."),[4,new Promise((function(t){r.reconnectDelayHandle=setTimeout(t,s)}))]);case 2:if(a.sent(),this.reconnectDelayHandle=void 0,this.connectionState!==cn.Reconnecting)return this.logger.log(he.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting."),[2];a.label=3;case 3:return a.trys.push([3,5,,6]),[4,this.startInternal()];case 4:if(a.sent(),this.connectionState=cn.Connected,this.logger.log(he.Information,"HubConnection reconnected successfully."),this.onreconnected)try{this.reconnectedCallbacks.forEach((function(t){return t.apply(r,[r.connection.connectionId])}))}catch(t){this.logger.log(he.Error,"An onreconnected callback called with connectionId '"+this.connection.connectionId+"; threw error '"+t+"'.")}return[2];case 5:return o=a.sent(),this.logger.log(he.Information,"Reconnect attempt failed because of error '"+o+"'."),this.connectionState!==cn.Reconnecting?(this.logger.log(he.Debug,"Connection left the reconnecting state during reconnect attempt. Done reconnecting."),[2]):(i=o instanceof Error?o:new Error(o.toString()),s=this.getNextRetryDelay(n++,Date.now()-e,i),[3,6]);case 6:return[3,1];case 7:return this.logger.log(he.Information,"Reconnect retries have been exhausted after "+(Date.now()-e)+" ms and "+n+" failed attempts. Connection disconnecting."),this.completeClose(),[2]}}))}))},t.prototype.getNextRetryDelay=function(t,e,n){try{return this.reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:e,previousRetryCount:t,retryReason:n})}catch(n){return this.logger.log(he.Error,"IRetryPolicy.nextRetryDelayInMilliseconds("+t+", "+e+") threw error '"+n+"'."),null}},t.prototype.cancelCallbacksWithError=function(t){var e=this.callbacks;this.callbacks={},Object.keys(e).forEach((function(n){(0,e[n])(null,t)}))},t.prototype.cleanupPingTimer=function(){this.pingServerHandle&&clearTimeout(this.pingServerHandle)},t.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},t.prototype.createInvocation=function(t,e,n,i){if(n)return{arguments:e,streamIds:i,target:t,type:nn.Invocation};var s=this.invocationId;return this.invocationId++,{arguments:e,invocationId:s.toString(),streamIds:i,target:t,type:nn.Invocation}},t.prototype.launchStreams=function(t,e){var n=this;if(0!==t.length){e||(e=Promise.resolve());var i=function(i){t[i].subscribe({complete:function(){e=e.then((function(){return n.sendWithProtocol(n.createCompletionMessage(i))}))},error:function(t){var s;s=t instanceof Error?t.message:t&&t.toString?t.toString():"Unknown error",e=e.then((function(){return n.sendWithProtocol(n.createCompletionMessage(i,s))}))},next:function(t){e=e.then((function(){return n.sendWithProtocol(n.createStreamItemMessage(i,t))}))}})};for(var s in t)i(s)}},t.prototype.replaceStreamingParams=function(t){for(var e=[],n=[],i=0;i<t.length;i++){var s=t[i];if(this.isObservable(s)){var o=this.invocationId;this.invocationId++,e[o]=s,n.push(o.toString()),t.splice(i,1)}}return[e,n]},t.prototype.isObservable=function(t){return t&&t.subscribe&&"function"==typeof t.subscribe},t.prototype.createStreamInvocation=function(t,e,n){var i=this.invocationId;return this.invocationId++,{arguments:e,invocationId:i.toString(),streamIds:n,target:t,type:nn.StreamInvocation}},t.prototype.createCancelInvocation=function(t){return{invocationId:t,type:nn.CancelInvocation}},t.prototype.createStreamItemMessage=function(t,e){return{invocationId:t,item:e,type:nn.StreamItem}},t.prototype.createCompletionMessage=function(t,e,n){return e?{error:e,invocationId:t,type:nn.Completion}:{invocationId:t,result:n,type:nn.Completion}},t}(),An=function(){function t(){this.name="json",this.version=1,this.transferFormat=Le.Text}return t.prototype.parseMessages=function(t,e){if("string"!=typeof t)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];null===e&&(e=be.instance);for(var n=[],i=0,s=rn.parse(t);i<s.length;i++){var o=s[i],r=JSON.parse(o);if("number"!=typeof r.type)throw new Error("Invalid payload.");switch(r.type){case nn.Invocation:this.isInvocationMessage(r);break;case nn.StreamItem:this.isStreamItemMessage(r);break;case nn.Completion:this.isCompletionMessage(r);break;case nn.Ping:case nn.Close:break;default:e.log(he.Information,"Unknown message type '"+r.type+"' ignored.");continue}n.push(r)}return n},t.prototype.writeMessage=function(t){return rn.write(JSON.stringify(t))},t.prototype.isInvocationMessage=function(t){this.assertNotEmptyString(t.target,"Invalid payload for Invocation message."),void 0!==t.invocationId&&this.assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")},t.prototype.isStreamItemMessage=function(t){if(this.assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),void 0===t.item)throw new Error("Invalid payload for StreamItem message.")},t.prototype.isCompletionMessage=function(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this.assertNotEmptyString(t.error,"Invalid payload for Completion message."),this.assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")},t.prototype.assertNotEmptyString=function(t,e){if("string"!=typeof t||""===t)throw new Error(e)},t}(),pn=Object.assign,gn={trace:he.Trace,debug:he.Debug,info:he.Information,information:he.Information,warn:he.Warning,warning:he.Warning,error:he.Error,critical:he.Critical,none:he.None};var fn=function(){function t(){}return t.prototype.configureLogging=function(t){if(Ce.isRequired(t,"logging"),function(t){return void 0!==t.log}(t))this.logger=t;else if("string"==typeof t){var e=function(t){var e=gn[t.toLowerCase()];if(void 0!==e)return e;throw new Error("Unknown log level: "+t)}(t);this.logger=new Be(e)}else this.logger=new Be(t);return this},t.prototype.withUrl=function(t,e){return Ce.isRequired(t,"url"),this.url=t,this.httpConnectionOptions=pn({},this.httpConnectionOptions,"object"==typeof e?e:{transport:e}),this},t.prototype.withHubProtocol=function(t){return Ce.isRequired(t,"protocol"),this.protocol=t,this},t.prototype.withAutomaticReconnect=function(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new Ae(t):this.reconnectPolicy=t:this.reconnectPolicy=new Ae,this},t.prototype.build=function(){var t=this.httpConnectionOptions||{};if(void 0===t.logger&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var e=new en(this.url,t);return dn.create(e,this.logger||be.instance,this.protocol||new An,this.reconnectPolicy)},t}();const bv=Tt("lightgreen"),xv=Tt("rgba(65, 255, 202, 0.25)"),Cv=Tt("transparent"),Dv=Object.assign(new Event("warpTo"),{id:null}),Sv=new Event("chatFocusChanged"),_v=3e3;class Ev extends vm{constructor(){super("users"),this.roomName=null,this.userName=null,this.chatFocused=!1,this.usersList=jt(At("chatUsers")),this.messages=jt(At("chatMessages")),this.rows=new Map,this.users=new Map,this.avatarGs=new Map,this.chat=(new fn).withUrl("/Chat").build();let t=null;this.chat.on("ReceiveMessage",(e,n,i)=>{n!==t&&(t=n,n=""),this.messages.append(jt(n),jt(i)),this.messages.lastChild.scrollIntoView()});const e=async()=>{this.entry.value.length>0&&(this.send.disabled=this.entry.disabled=!0,await this.chat.invoke("SendMessage",this.roomName,this.userName,this.entry.value),this.entry.value="",this.entry.disabled=this.send.disabled=!1,this.entry.focus())},n=()=>this.dispatchEvent(Sv);var i;this.entry=Wt(At("chatEntry"),lt,h(()=>this.chatFocused=!0),h(n),l(()=>this.chatFocused=!1),l(n),new Mn("keypress",t=>{"Enter"===t.key&&e()},i)),this.send=Ht(At("chatSend"),lt,u(e)),Object.seal(this)}async startAsync(t,e){this.roomName=t,this.userName=e,await this.chat.start(),await this.chat.invoke("Join",this.roomName),this.entry.disabled=this.send.disabled=!1}update(){if(Dt(this))for(let t of this.users.entries()){const[e,n]=t;if(this.avatarGs.has(e)&&n.avatar){const t=this.avatarGs.get(e);t.clearRect(0,0,t.canvas.width,t.canvas.height),n.avatar.draw(t,t.canvas.width,t.canvas.height)}}}set(t){const e=!this.rows.has(t.id);this.delete(t.id);const n=this.rows.size+1;if(e){const e=jt(ne(1,n,2,1),Ot(-1),bv);setTimeout(()=>{this.usersList.removeChild(e)},_v),this.usersList.append(e),this.users.set(t.id,t),this.avatarGs.set(t.id,zt(Ct(32),ht(32)).getContext("2d"))}const i=this.avatarGs.get(t.id).canvas,s=[jt(ne(1,n),Ot(0),i),jt(ne(2,n),Ot(0),t.displayName),jt(ne(1,n,2,1),Ot(1),Cv,(o=function(){xv.apply(this)},new Mn("mouseover",o,r)),A((function(){Cv.apply(this)})),u(()=>{Mt(this),Dv.id=t.id,this.dispatchEvent(Dv)}))];var o,r;this.rows.set(t.id,s),this.usersList.append(...s)}delete(t){if(this.rows.has(t)){const e=this.rows.get(t);this.rows.delete(t);for(let t of e)this.usersList.removeChild(t);let n=1;for(let t of this.rows.values()){const e=ie(n++);for(let n of t)e.apply(n)}}}clear(){for(let t of this.rows.keys())this.delete(t)}warn(...t){const e=jt(ne(1,this.rows.size+1,2,1),Tt("yellow"),...t.map(t=>t.toString()));this.usersList.append(e),setTimeout(()=>{this.usersList.removeChild(e)},5e3)}}function mn(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var vn={search:function(t,e,n,i){t.cleanDirty();var s=(i=i||{}).heuristic||vn.heuristics.manhattan,o=i.closest||!1,r=new bn((function(t){return t.f})),a=e;for(e.h=s(e,n),t.markDirty(e),r.push(e);r.size()>0;){var c=r.pop();if(c===n)return mn(c);c.closed=!0;for(var l=t.neighbors(c),u=0,h=l.length;u<h;++u){var d=l[u];if(!d.closed&&!d.isWall()){var A=c.g+d.getCost(c),p=d.visited;(!p||A<d.g)&&(d.visited=!0,d.parent=c,d.h=d.h||s(d,n),d.g=A,d.f=d.g+d.h,t.markDirty(d),o&&(d.h<a.h||d.h===a.h&&d.g<a.g)&&(a=d),p?r.rescoreElement(d):r.push(d))}}}return o?mn(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);return 1*(i+s)+(n-2)*Math.min(i,s)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function yn(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var i=0,s=t[n];i<s.length;i++){var o=new wn(n,i,s[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function wn(t,e,n){this.x=t,this.y=e,this.weight=n}function bn(t){this.content=[],this.scoreFunction=t}yn.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)vn.cleanNode(this.nodes[t])},yn.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)vn.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},yn.prototype.markDirty=function(t){this.dirtyNodes.push(t)},yn.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,s=this.grid;return s[n-1]&&s[n-1][i]&&e.push(s[n-1][i]),s[n+1]&&s[n+1][i]&&e.push(s[n+1][i]),s[n]&&s[n][i-1]&&e.push(s[n][i-1]),s[n]&&s[n][i+1]&&e.push(s[n][i+1]),this.diagonal&&(s[n-1]&&s[n-1][i-1]&&e.push(s[n-1][i-1]),s[n+1]&&s[n+1][i-1]&&e.push(s[n+1][i-1]),s[n-1]&&s[n-1][i+1]&&e.push(s[n-1][i+1]),s[n+1]&&s[n+1][i+1]&&e.push(s[n+1][i+1])),e},yn.prototype.toString=function(){for(var t=[],e=this.grid,n=0;n<e.length;n++){for(var i=[],s=e[n],o=0;o<s.length;o++)i.push(s[o].weight);t.push(i.join(" "))}return t.join("\n")},wn.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},wn.prototype.getCost=function(t){return t&&t.x!=this.x&&t.y!=this.y?1.41421*this.weight:this.weight},wn.prototype.isWall=function(){return 0===this.weight},bn.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var s,o=t+1<<1,r=o-1,a=null;if(r<e){var c=this.content[r];(s=this.scoreFunction(c))<i&&(a=r)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?i:s)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};class Pv{constructor(t){this.url=t,this.tileWidth=0,this.tileHeight=0,this.tilesPerRow=0,this.image=new Image,this.collision={}}async load(){const t=await fetch(this.url),e=await t.text(),n=(new DOMParser).parseFromString(e,"text/xml").documentElement,i=new Promise((t,e)=>{this.image.addEventListener("load",e=>{this.tilesPerRow=Math.floor(this.image.width/this.tileWidth),t()}),this.image.addEventListener("error",e)}),s=n.querySelector("image").getAttribute("source"),o=new URL(s,this.url),r=n.querySelectorAll("tile");for(let t of r){const e=1*t.getAttribute("id"),n=t.querySelector("properties > property[name='Collision']").getAttribute("value");this.collision[e]="true"===n}this.name=n.getAttribute("name"),this.tileWidth=1*n.getAttribute("tilewidth"),this.tileHeight=1*n.getAttribute("tileheight"),this.tileCount=1*n.getAttribute("tilecount"),this.image.src=o.href,await i}isClear(t){return!this.collision[t-1]}draw(t,e,n,i){if(e>0){const s=e-1,o=this.tileWidth*(s%this.tilesPerRow),r=this.tileHeight*Math.floor(s/this.tilesPerRow),a=n*this.tileWidth,c=i*this.tileHeight;t.drawImage(this.image,o,r,this.tileWidth,this.tileHeight,a,c,this.tileWidth,this.tileHeight)}}}const Mv=new WeakMap;class Bv{constructor(t){this.url=new URL(`data/tilemaps/${t}.tmx`,document.baseURI),this.tileWidth=0,this.tileHeight=0,this.layers=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.tileset=null,this.tiles=null,this.graph=null,this.layerImages=[],Object.seal(this)}}class kv{constructor(t){Mv.set(this,new Bv(t))}async load(){const t=Mv.get(this),e=await fetch(t.url.href);if(!e.ok)throw new Error(`Failed to load TileMap from ${t.url.href}. Reason: [${e.status}] ${e.statusText}`);const n=await e.text(),i=(new DOMParser).parseFromString(n,"text/xml").documentElement,s=1*i.getAttribute("width"),o=1*i.getAttribute("height"),r=1*i.getAttribute("tilewidth"),a=1*i.getAttribute("tileheight"),c=i.querySelector("tileset").getAttribute("source"),l=i.querySelectorAll("layer > data");t.layers=l.length,t.width=s,t.height=o,t.offsetX=-Math.floor(s/2),t.offsetY=-Math.floor(o/2),t.tileWidth=r,t.tileHeight=a,t.tiles=[];for(let e of l){const n=e.innerHTML.replace(" ","").replace("\t","").replace("\n","").replace("\r","").split(",").map(t=>parseInt(t,10)),i=[];let o=[];for(let t of n)o.push(t),o.length===s&&(i.push(o),o=[]);o.length>0&&i.push(o),t.tiles.push(i)}t.tileset=new Pv(new URL(c,t.url)),await t.tileset.load(),t.tileWidth=t.tileset.tileWidth,t.tileHeight=t.tileset.tileHeight;for(let e=0;e<t.layers;++e){const n=Kt(this.width*this.tileWidth,this.height*this.tileHeight);t.layerImages.push(n);const i=n.getContext("2d"),s=t.tiles[e];for(let e=0;e<this.height;++e){const n=s[e];for(let s=0;s<this.width;++s){const o=n[s];t.tileset.draw(i,o,s,e)}}}let u=[];for(let e of t.tiles[0]){let n=[];for(let i of e)t.tileset.isClear(i)?n.push(1):n.push(0);u.push(n)}t.graph=new yn(u,{diagonal:!0})}get width(){return Mv.get(this).width}get height(){return Mv.get(this).height}get tileWidth(){return Mv.get(this).tileWidth}get tileHeight(){return Mv.get(this).tileHeight}isInBounds(t,e){return 0<=t&&t<this.width&&0<=e&&e<this.height}getGridNode(t,e){const n=Mv.get(this);return t-=n.offsetX,e-=n.offsetY,t=Math.round(t),e=Math.round(e),this.isInBounds(t,e)?n.graph.grid[e][t]:null}draw(t){const e=Mv.get(this);t.save(),t.translate(e.offsetX*this.tileWidth,e.offsetY*this.tileHeight);for(let n of e.layerImages)t.drawImage(n,0,0);t.restore()}searchPath(t,e){const n=Mv.get(this);return vn.search(n.graph,t,e).map(t=>({x:t.y+n.offsetX,y:t.x+n.offsetY}))}isClear(t,e,n){const i=Mv.get(this);return t-=i.offsetX,e-=i.offsetY,t=Math.round(t),e=Math.round(e),t<0||this.width<=t||e<0||this.height<=e||i.tileset&&i.tileset.isClear(i.tiles[0][e][t])||n&&n.canSwim}getClearTile(t,e,n,i,s){const o=t+n,r=e+i,a=t<o?1:-1,c=e<r?1:-1;let l=((n=Math.abs(o-t))>(i=Math.abs(r-e))?n:-i)/2;for(;t!==o||e!==r;){const o=l;if(o>-n){if(!this.isClear(t+a,e,s))break;l-=i,t+=a}if(o<i){if(!this.isClear(t,e+c,s))break;l+=n,e+=c}}return{x:t,y:e}}getClearTileNear(t,e,n,i){for(let s=1;s<=n;++s)for(let n=-s;n<=s;++n){const o=s-Math.abs(n),r=t+n,a=e+o,c=e-o;if(this.isClear(r,a,i))return{x:r,y:a};if(this.isClear(r,c,i))return{x:r,y:c}}return{x:t,y:e}}}class Tv extends Event{constructor(t){super(t),this.pointerType=null,this.pointerID=null,this.x=0,this.y=0,this.dx=0,this.dy=0,this.dz=0,this.u=0,this.v=0,this.du=0,this.dv=0,this.buttons=0,this.dragDistance=0,Object.seal(this)}}class Iv extends Event{constructor(t){super("inputtypechanging"),this.newInputType=t,Object.freeze(this)}}class Fv{constructor(t){this.type=t.pointerType,this.id=t.pointerId,this.buttons=t.buttons,this.moveDistance=0,this.dragDistance=0,this.x=t.offsetX,this.y=t.offsetY,this.dx=t.movementX,this.dy=t.movementY,Object.seal(this)}}const Lv=5,Ov=new Tv("pointerdown"),Rv=new Tv("pointerup"),Nv=new Tv("click"),Hv=new Tv("move"),zv=new Tv("drag");class jv extends kn{constructor(t){super(),this.pointers=new Map,this.currentInputType=null;let e=!0;const n=(e,n,i)=>{e.pointerType=n.type,e.pointerID=n.id,e.buttons=n.buttons,e.x=n.x,e.y=n.y,e.u=ue(b(e.x,0,t.clientWidth),-1,1),e.v=ue(b(e.y,0,t.clientHeight),-1,1),e.dx=n.dx,e.dy=n.dy,e.dz=i,e.du=2*e.dx/t.clientWidth,e.dv=2*e.dy/t.clientHeight,e.dragDistance=n.dragDistance,this.dispatchEvent(e)},i=t=>{const e=this.pointers.get(t.id);return e&&(t.dragDistance=e.dragDistance,document.pointerLockElement&&(t.x=e.x+t.dx,t.y=e.y+t.dy)),t.moveDistance=Math.sqrt(t.dx*t.dx+t.dy*t.dy),this.pointers.set(t.id,t),e};t.addEventListener("wheel",t=>{if(!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)){t.preventDefault();const e=new Fv(t),s=(i(e),-t.deltaY*(qm?1:.02));n(Hv,e,s)}},{passive:!1}),t.addEventListener("pointerdown",t=>{const s=this.pressCount,o=new Fv(t),r=(i(o),this.pressCount);o.type!==this.currentInputType&&(this.dispatchEvent(new Iv(o.type)),this.currentInputType=o.type),n(Ov,o,0),e=0===s&&1===r});t.addEventListener("pointermove",t=>{const s=this.pinchDistance,o=new Fv(t),r=i(o),a=this.pressCount,c=((t,n)=>{if(null!==t&&null!==n)return e=!1,(n-t)/10;return 0})(s,this.pinchDistance);n(Hv,o,c),1===a&&1===o.buttons&&r&&r.buttons===o.buttons&&(o.dragDistance+=o.moveDistance,o.dragDistance>Lv&&(e=!1,n(zv,o,0)))}),t.addEventListener("pointerup",t=>{const s=new Fv(t),o=i(s);s.buttons=o.buttons,n(Rv,s,0),e&&n(Nv,s,0),s.dragDistance=0,"touch"===s.type&&this.pointers.delete(s.id)}),t.addEventListener("contextmenu",t=>{t.preventDefault()}),t.addEventListener("pointercancel",t=>{this.pointers.has(t.pointerId)&&this.pointers.delete(t.pointerId)})}get primaryPointer(){for(let t of this.pointers.values())return t}getPointerCount(t){let e=0;for(const n of this.pointers.values())n.type===t&&++e;return e}get pressCount(){let t=0;for(let e of this.pointers.values())e.buttons>0&&++t;return t}get pinchDistance(){if(2!==this.pressCount)return null;let t,e;for(let n of this.pointers.values())if(1===n.buttons)if(t){if(e)break;e=n}else t=n;const n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}}const Qv=3;class Uv{constructor(t,e,n){this.emoji=t,this.x=e,this.y=n,this.dx=Math.random()-.5,this.dy=.5*-Math.random()-.5,this.life=1,this.width=-1,this.emoteText=new jm,this.emoteText.fontFamily="Noto Color Emoji",this.emoteText.value=t.value}isDead(){return this.life<=.01}update(t){this.life-=t/Qv,this.dx*=.99,this.dy*=.99,this.x+=this.dx*t,this.y+=this.dy*t}drawShadow(t,e){const n=ae(t).a;t.save(),t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowOffsetX=3*n,t.shadowOffsetY=3*n,t.shadowBlur=3*n,this.drawEmote(t,e),t.restore()}drawEmote(t,e){const n=t.globalAlpha,i=ae(t).a;t.globalAlpha=this.life,this.emoteText.fontSize=e.tileHeight/2,this.emoteText.scale=i,this.emoteText.draw(t,this.x*e.tileWidth-this.width/2,this.y*e.tileHeight),t.globalAlpha=n}}const Wv=.01,Gv=2,qv=.125,Vv=new Event("gameStarted"),Yv=new Event("gameEnded"),Xv=new Event("zoomChanged"),Zv=new Event("emojiNeeded"),Jv=new Event("toggleAudio"),Kv=new Event("toggleVideo"),$v=Object.assign(new Event("userMoved"),{x:0,y:0}),ty=Object.assign(new Event("emote"),{emoji:null}),ey=Object.assign(new Event("userJoined",{user:null})),ny=new Map;class iy extends kn{constructor(t,e){super(),this.zoomMin=t,this.zoomMax=e,this.element=zt(At("frontBuffer")),this.gFront=this.element.getContext("2d"),this.me=null,this.map=null,this.waypoints=[],this.keys={},this.users=new Map,this.lastMove=Number.MAX_VALUE,this.lastWalk=Number.MAX_VALUE,this.gridOffsetX=0,this.gridOffsetY=0,this.cameraX=this.offsetCameraX=this.targetOffsetCameraX=0,this.cameraY=this.offsetCameraY=this.targetOffsetCameraY=0,this.cameraZ=this.targetCameraZ=1.5,this.currentRoomName=null,this.fontSize=10,this.drawHearing=!1,this.audioDistanceMin=2,this.audioDistanceMax=10,this.rolloff=5,this.currentEmoji=null,this.emotes=[],this.inputBinding={keyButtonUp:"ArrowUp",keyButtonDown:"ArrowDown",keyButtonLeft:"ArrowLeft",keyButtonRight:"ArrowRight",keyButtonEmote:"e",keyButtonToggleAudio:"a",keyButtonZoomOut:"[",keyButtonZoomIn:"]",gpAxisLeftRight:0,gpAxisUpDown:1,gpButtonEmote:0,gpButtonToggleAudio:1,gpButtonZoomIn:6,gpButtonZoomOut:7,gpButtonUp:12,gpButtonDown:13,gpButtonLeft:14,gpButtonRight:15},this.lastGamepadIndex=-1,this.gamepadIndex=-1,this.transitionSpeed=.125,this.keyboardEnabled=!0,addEventListener("keydown",t=>{this.keys[t.key]=t,!this.keyboardEnabled||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||t.key!==this.inputBinding.keyButtonToggleAudio||!this.me||this.toggleMyAudio()}),addEventListener("keyup",t=>{this.keys[t.key]&&delete this.keys[t.key]}),this.screenControls=new jv(this.element),Y(this.screenControls,{move:t=>{Math.abs(t.dz)>0&&(this.zoom+=t.dz,this.dispatchEvent(Xv))},drag:t=>{this.targetOffsetCameraX=this.offsetCameraX+=t.dx,this.targetOffsetCameraY=this.offsetCameraY+=t.dy},click:t=>{if(this.me){const e=this.getTileAt(t),n=e.x-this.me.gridX,i=e.y-this.me.gridY;this.moveMeByPath(n,i)}}})}get style(){return this.element.style}initializeUser(t,e){this.withUser("initialize user",t,t=>{t.deserialize(e)})}updateAudioActivity(t,e){this.withUser("update audio activity",t,t=>{t.isActive=e})}emote(t,e){if(this.users.has(t)){const n=this.users.get(t);n.isMe&&((e=e||this.currentEmoji)?(ty.emoji=this.currentEmoji=e,this.dispatchEvent(ty)):this.dispatchEvent(Zv)),e&&this.emotes.push(new Uv(e,n.x,n.y))}}getTileAt(t){const e=t.x*devicePixelRatio-this.gridOffsetX-this.offsetCameraX,n=t.y*devicePixelRatio-this.gridOffsetY-this.offsetCameraY,i=e/this.cameraZ,s=n/this.cameraZ,o=i-this.cameraX,r=s-this.cameraY;return{x:o/this.map.tileWidth-.5,y:r/this.map.tileHeight-.5}}moveMeTo(t,e){this.map.isClear(t,e,this.me.avatar)&&(this.targetOffsetCameraX=0,this.targetOffsetCameraY=0,$v.x=t,$v.y=e,this.dispatchEvent($v))}moveMeBy(t,e){const n=this.map.getClearTile(this.me.gridX,this.me.gridY,t,e,this.me.avatar);this.moveMeTo(n.x,n.y)}moveMeByPath(t,e){p(this.waypoints);const n=this.me.gridX,i=this.me.gridY,s=this.map.getGridNode(n,i),o=n+t,r=i+e,a=o-Math.round(o),c=r-Math.round(r),l=this.map.getGridNode(o,r);if(s&&l){const t=this.map.searchPath(s,l);if(0===t.length)this.moveMeTo(o,r);else{for(let e of t)e.x+=a,e.y+=c;this.waypoints.push(...t)}}else this.moveMeTo(o,r)}warpMeTo(t,e){const n=this.map.getClearTileNear(t,e,3,this.me.avatar);this.moveMeTo(n.x,n.y)}visit(t){this.withUser("visit",t,t=>{this.warpMeTo(t.gridX,t.gridY)})}get zoom(){const t=b(this.targetCameraZ,this.zoomMin,this.zoomMax);return ue(Math.pow(t,1/Gv),this.zoomMin,this.zoomMax)}set zoom(t){const e=b(t=v(t,this.zoomMin,this.zoomMax),this.zoomMin,this.zoomMax),n=ue(Math.pow(e,Gv),this.zoomMin,this.zoomMax);this.targetCameraZ=n}addUser(t,e,n){this.users.has(t)&&this.removeUser(t);const i=new ev(t,e,n,!1);this.users.set(t,i),ey.user=i,this.dispatchEvent(ey)}toggleMyAudio(){this.dispatchEvent(Jv)}toggleMyVideo(){this.dispatchEvent(Kv)}muteUserAudio(t,e){this.withUser("mute audio",t,t=>{t.audioMuted=e})}muteUserVideo(t,e){this.withUser("mute video",t,t=>{t.videoMuted=e})}withUser(t,e,n,i){if(void 0===i&&(i=5e3),e)if(this.users.has(e)){n(this.users.get(e))}else console.warn(`No user "${e}" found to ${t}. Trying again in a quarter second.`),i>0&&setTimeout(this.withUser.bind(this,t,e,n,i-250),250)}changeUserName(t,e){this.withUser("change user name",t,t=>{t.displayName=e})}removeUser(t){this.users.has(t)&&this.users.delete(t)}setAvatarVideo(t,e){this.withUser("set avatar video",t,t=>{t.setAvatarVideo(e)})}setAvatarURL(t,e){this.withUser("set avatar image",t,t=>{t.avatarImage=e})}setAvatarEmoji(t,e){this.withUser("set avatar emoji",t,t=>{t.avatarEmoji=e})}async startAsync(t,e,n,i,s){this.currentRoomName=s.toLowerCase(),this.me=new ev(t,e,n,!0),o(i)&&(this.me.avatarImage=i),this.users.set(t,this.me),this.map=new kv(this.currentRoomName);let r=!1;for(let t=0;t<2;++t)try{await this.map.load(),r=!0}catch(e){0===t?(console.warn(e),console.warn("Retrying with default map."),this.map=new kv("default")):console.error(e)}r||console.error("Couldn't load any maps!"),this.startLoop(),this.dispatchEvent(Xv),this.dispatchEvent(Vv)}startLoop(){Pt(this),this.resize(),this.element.focus()}resize(){!function(t,e=1){ce(t,t.clientWidth,t.clientHeight,e)}(this.element,window.devicePixelRatio)}end(){this.currentRoomName=null,this.map=null,this.users.clear(),this.me=null,Mt(this),this.dispatchEvent(Yv)}update(t){if(null!==this.currentRoomName){if(t/=1e3,this.gridOffsetX=Math.floor(.5*this.element.width/this.map.tileWidth)*this.map.tileWidth,this.gridOffsetY=Math.floor(.5*this.element.height/this.map.tileHeight)*this.map.tileHeight,this.lastMove+=t,this.lastMove>=qv){let t=0,e=0,n=0;if(this.keyboardEnabled)for(let i of Object.values(this.keys))if(!(i.altKey||i.shiftKey||i.ctrlKey||i.metaKey))switch(i.key){case this.inputBinding.keyButtonUp:e--;break;case this.inputBinding.keyButtonDown:e++;break;case this.inputBinding.keyButtonLeft:t--;break;case this.inputBinding.keyButtonRight:t++;break;case this.inputBinding.keyButtonZoomIn:n++;break;case this.inputBinding.keyButtonZoomOut:n--;break;case this.inputBinding.keyButtonEmote:this.emote(this.me.id,this.currentEmoji)}const i=navigator.getGamepads()[this.gamepadIndex];if(i){ny.has(this)||ny.set(this,new Om(i));const s=ny.get(this);s.update(i),s.buttons[this.inputBinding.gpButtonEmote].pressed&&this.emote(this.me.id,this.currentEmoji),!s.lastButtons[this.inputBinding.gpButtonToggleAudio].pressed&&s.buttons[this.inputBinding.gpButtonToggleAudio].pressed&&this.toggleMyAudio(),s.buttons[this.inputBinding.gpButtonUp].pressed?--e:s.buttons[this.inputBinding.gpButtonDown].pressed&&++e,s.buttons[this.inputBinding.gpButtonLeft].pressed?--t:s.buttons[this.inputBinding.gpButtonRight].pressed&&++t,t+=Math.round(s.axes[this.inputBinding.gpAxisLeftRight]),e+=Math.round(s.axes[this.inputBinding.gpAxisUpDown]),n+=2*(s.buttons[this.inputBinding.gpButtonZoomIn].value-s.buttons[this.inputBinding.gpButtonZoomOut].value),this.targetOffsetCameraX+=-50*Math.round(2*s.axes[2]),this.targetOffsetCameraY+=-50*Math.round(2*s.axes[3]),this.dispatchEvent(Xv)}t=v(t,-1,1),e=v(e,-1,1),0===t&&0===e||(this.moveMeBy(t,e),p(this.waypoints)),0!==n&&(this.zoom+=n,this.dispatchEvent(Xv)),this.lastMove=0}if(this.lastWalk+=t,this.lastWalk>=this.transitionSpeed){if(this.waypoints.length>0){const t=this.waypoints.shift();this.moveMeTo(t.x,t.y)}this.lastWalk=0}for(let e of this.emotes)e.update(t);this.emotes=this.emotes.filter(t=>!t.isDead());for(let t of this.users.values())t.update(this.map,this.users);this.render()}}render(){const t=-this.me.x*this.map.tileWidth,e=-this.me.y*this.map.tileHeight;this.cameraZ=kt(this.cameraZ,this.targetCameraZ,Wv*this.cameraZ),this.cameraX=kt(this.cameraX,t,Wv*this.cameraZ),this.cameraY=kt(this.cameraY,e,Wv*this.cameraZ),this.offsetCameraX=kt(this.offsetCameraX,this.targetOffsetCameraX,Wv),this.offsetCameraY=kt(this.offsetCameraY,this.targetOffsetCameraY,Wv),this.gFront.resetTransform(),this.gFront.imageSmoothingEnabled=!1,this.gFront.clearRect(0,0,this.element.width,this.element.height),this.gFront.save(),this.gFront.translate(this.gridOffsetX+this.offsetCameraX,this.gridOffsetY+this.offsetCameraY),this.gFront.scale(this.cameraZ,this.cameraZ),this.gFront.translate(this.cameraX,this.cameraY),this.map.draw(this.gFront);for(let t of this.users.values())t.drawShadow(this.gFront,this.map);for(let t of this.emotes)t.drawShadow(this.gFront,this.map);for(let t of this.users.values())t.drawAvatar(this.gFront,this.map);this.drawCursor();for(let t of this.users.values())t.drawName(this.gFront,this.map,this.fontSize);this.drawHearing&&this.me.drawHearingRange(this.gFront,this.map,this.audioDistanceMin,this.audioDistanceMax);for(let t of this.emotes)t.drawEmote(this.gFront,this.map);this.gFront.restore()}drawCursor(){const t=this.screenControls.primaryPointer;if(t){const e=this.getTileAt(t);this.gFront.strokeStyle=this.map.isClear(e.x,e.y,this.me.avatar)?"green":"red",this.gFront.strokeRect(e.x*this.map.tileWidth,e.y*this.map.tileHeight,this.map.tileWidth,this.map.tileHeight)}}}const sy="CallaSettings",oy=Object.freeze({keyButtonUp:"ArrowUp",keyButtonDown:"ArrowDown",keyButtonLeft:"ArrowLeft",keyButtonRight:"ArrowRight",keyButtonEmote:"e",keyButtonToggleAudio:"a",keyButtonZoomOut:"[",keyButtonZoomIn:"]",gpButtonEmote:0,gpButtonToggleAudio:1,gpButtonZoomIn:6,gpButtonZoomOut:7,gpButtonUp:12,gpButtonDown:13,gpButtonLeft:14,gpButtonRight:15}),ry=new WeakMap;class ay{constructor(){this.drawHearing=!1,this.audioDistanceMin=1,this.audioDistanceMax=10,this.audioRolloff=1,this.fontSize=12,this.transitionSpeed=1,this.zoom=1.5,this.roomName="calla",this.userName="",this.email="",this.avatarEmoji=null,this.avatarURL=null,this.gamepadIndex=0,this.preferredAudioOutputID=null,this.preferredAudioInputID=null,this.preferredVideoInputID=null,this.inputBinding=oy;const t=localStorage.getItem(sy);for(var e in t&&Object.assign(this,JSON.parse(t)),oy)void 0===this.inputBinding[e]&&(this.inputBinding[e]=oy[e]);Object.seal(this)}commit(){localStorage.setItem(sy,JSON.stringify(this))}}class cy{constructor(){const t=new ay;ry.set(this,t),window.location.hash.length>0&&(t.roomName=window.location.hash.substring(1)),Object.seal(this)}get preferredAudioOutputID(){return ry.get(this).preferredAudioOutputID}set preferredAudioOutputID(t){if(t!==this.preferredAudioOutputID){const e=ry.get(this);e.preferredAudioOutputID=t,e.commit()}}get preferredAudioInputID(){return ry.get(this).preferredAudioInputID}set preferredAudioInputID(t){if(t!==this.preferredAudioInputID){const e=ry.get(this);e.preferredAudioInputID=t,e.commit()}}get preferredVideoInputID(){return ry.get(this).preferredVideoInputID}set preferredVideoInputID(t){if(t!==this.preferredVideoInputID){const e=ry.get(this);e.preferredVideoInputID=t,e.commit()}}get transitionSpeed(){return ry.get(this).transitionSpeed}set transitionSpeed(t){if(t!==this.transitionSpeed){const e=ry.get(this);e.transitionSpeed=t,e.commit()}}get drawHearing(){return ry.get(this).drawHearing}set drawHearing(t){if(t!==this.drawHearing){const e=ry.get(this);e.drawHearing=t,e.commit()}}get audioDistanceMin(){return ry.get(this).audioDistanceMin}set audioDistanceMin(t){if(t!==this.audioDistanceMin){const e=ry.get(this);e.audioDistanceMin=t,e.commit()}}get audioDistanceMax(){return ry.get(this).audioDistanceMax}set audioDistanceMax(t){if(t!==this.audioDistanceMax){const e=ry.get(this);e.audioDistanceMax=t,e.commit()}}get audioRolloff(){return ry.get(this).audioRolloff}set audioRolloff(t){if(t!==this.audioRolloff){const e=ry.get(this);e.audioRolloff=t,e.commit()}}get fontSize(){return ry.get(this).fontSize}set fontSize(t){if(t!==this.fontSize){const e=ry.get(this);e.fontSize=t,e.commit()}}get zoom(){return ry.get(this).zoom}set zoom(t){if(t!==this.zoom){const e=ry.get(this);e.zoom=t,e.commit()}}get userName(){return ry.get(this).userName}set userName(t){if(t!==this.userName){const e=ry.get(this);e.userName=t,e.commit()}}get email(){return ry.get(this).email}set email(t){if(t!==this.email){const e=ry.get(this);e.email=t,e.commit()}}get avatarEmoji(){return ry.get(this).avatarEmoji}set avatarEmoji(t){if(t!==this.avatarEmoji){const e=ry.get(this);e.avatarEmoji=t,e.commit()}}get avatarURL(){return ry.get(this).avatarURL}set avatarURL(t){if(t!==this.avatarURL){const e=ry.get(this);e.avatarURL=t,e.commit()}}get roomName(){return ry.get(this).roomName}set roomName(t){if(t!==this.roomName){const e=ry.get(this);e.roomName=t,e.commit()}}get gamepadIndex(){return ry.get(this).gamepadIndex}set gamepadIndex(t){if(t!==this.gamepadIndex){const e=ry.get(this);e.gamepadIndex=t,e.commit()}}get inputBinding(){return ry.get(this).inputBinding}set inputBinding(t){if(t!==this.inputBinding){const e=ry.get(this);for(let n in t)e.inputBinding[n]=t[n];e.commit()}}}const ly=.5,uy=20,hy=new cy,dy=new iy(ly,uy),Ay=new km,py=new Ev,gy=new um(dy.element,ly,uy),fy=new xm,my=new wv,vy=new vm("instructions"),yy=new Em,wy=new Gs(qs,Vs,Ys),by=new Xf,xy=lt(!0),Cy=lt(!1);let Dy=!1;async function xn(t,e){const n=fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),i=await n;return i.ok&&console.log("Thanks!"),i}Object.assign(window,{settings:hy,client:wy,game:dy,login:Ay,directory:py,controls:gy,devices:fy,options:my,emoji:yy,instructions:vy});const Sy=t=>()=>Cn(t);function Cn(t){Dy||(Mt(Ay),Mt(py),Mt(my),Mt(fy),Mt(yy),Mt(vy),Pt(t))}async function Dn(t){if(!Dt(yy)){Dy=!0,xy.apply(gy.optionsButton),xy.apply(gy.instructionsButton),xy.apply(gy.changeDevicesButton),Mt(my);const e=await yy.selectAsync();e&&t(e),Cy.apply(gy.optionsButton),Cy.apply(gy.instructionsButton),Cy.apply(gy.changeDevicesButton),Dy=!1}}async function Sn(){await Dn(t=>{dy.emote(wy.localUserID,t),gy.setEmojiButton(hy.inputBinding.keyButtonEmote,t)})}function _n(){wy.setAudioProperties(hy.audioDistanceMin=dy.audioDistanceMin=my.audioDistanceMin,hy.audioDistanceMax=dy.audioDistanceMax=my.audioDistanceMax,hy.audioRolloff=my.audioRolloff,hy.transitionSpeed)}function En(){my.gamepads=navigator.getGamepads(),my.gamepadIndex=dy.gamepadIndex}function Pn(t){dy.withUser("list user in directory",t,t=>py.set(t))}Y(window,{gamepadconnected:En,gamepaddisconnected:En,resize:()=>{dy.resize()}}),Y(gy,{toggleOptions:Sy(my),toggleInstructions:Sy(vy),toggleUserDirectory:Sy(py),changeDevices:Sy(fy),tweet:()=>{const t=encodeURIComponent("Join my #TeleParty "+document.location.href),e=new URL("https://twitter.com/intent/tweet?text="+t);window.open(e)},leave:async()=>{py.clear(),await wy.leaveAsync()},selectEmoji:Sn,emote:()=>{dy.emote(wy.localUserID,dy.currentEmoji)},toggleAudio:async()=>{await wy.toggleAudioMutedAsync()},toggleVideo:async()=>{await wy.toggleVideoMutedAsync()},zoomChanged:()=>{hy.zoom=dy.zoom=gy.zoom}}),Y(Ay,{login:async()=>{await wy.audio.createClip("join",!1,!1,!0,null,"audio/door-open.ogg","audio/door-open.mp3","audio/door-open.wav"),await wy.audio.createClip("leave",!1,!1,!0,null,"audio/door-close.ogg","audio/door-close.mp3","audio/door-close.wav"),_n();let t=Ay.roomName;Ay.roomSelectMode||(t=await async function(t){const e=await xn("/Game/Rooms",t);return await e.text()}(t)),await async function(t,e,n){await xn("/Contacts",{Name:t,Email:e,Room:n})}(hy.userName=Ay.userName,hy.email=Ay.email,hy.roomName=t);const e="Calla - chatting in "+t,n=`${window.location.pathname}#${t}`;window.history.replaceState({},e,n),await py.startAsync(t,Ay.userName),await wy.join(t,Ay.userName)}}),Y(my,{audioPropertiesChanged:_n,selectAvatar:async()=>{await Dn(t=>{hy.avatarEmoji=wy.avatarEmoji=dy.me.avatarEmoji=t,Pn(wy.localUserID)})},avatarURLChanged:()=>{hy.avatarURL=wy.avatarURL=dy.me.avatarImage=my.avatarURL,Pn(wy.localUserID)},toggleDrawHearing:()=>{hy.drawHearing=dy.drawHearing=my.drawHearing},fontSizeChanged:()=>{hy.fontSize=dy.fontSize=my.fontSize},gamepadChanged:()=>{hy.gamepadIndex=dy.gamepadIndex=my.gamepadIndex},inputBindingChanged:()=>{hy.inputBinding=dy.inputBinding=my.inputBinding},toggleVideo:async()=>{await wy.toggleVideoMutedAsync()}}),Y(fy,{audioInputChanged:async()=>{const t=fy.currentAudioInputDevice;await wy.setAudioInputDeviceAsync(t),hy.preferredAudioInputID=wy.preferredAudioInputID},audioOutputChanged:async()=>{const t=fy.currentAudioOutputDevice;await wy.setAudioOutputDeviceAsync(t),hy.preferredAudioOutputID=wy.preferredAudioOutputID},videoInputChanged:async()=>{const t=fy.currentVideoInputDevice;await wy.setVideoInputDeviceAsync(t),hy.preferredVideoInputID=wy.preferredVideoInputID}}),Y(dy,{emojiNeeded:Sn,emote:t=>{wy.emote(t.emoji)},userJoined:t=>{Pn(t.user.id)},toggleAudio:async()=>{await wy.toggleAudioMutedAsync(),hy.preferredAudioInputID=wy.preferredAudioInputID},toggleVideo:async()=>{await wy.toggleVideoMutedAsync(),hy.preferredVideoInputID=wy.preferredVideoInputID},gameStarted:()=>{dy.resize(),Mt(Ay),Pt(gy),my.user=dy.me,gy.enabled=!0,hy.avatarEmoji=wy.avatarEmoji=dy.me.avatarEmoji=hy.avatarEmoji||Ta.random(),Pn(wy.localUserID)},userMoved:t=>{wy.setLocalPosition(t.x,0,t.y)},gameEnded:()=>{Ay.connected=!1,Cn(Ay)},zoomChanged:()=>{hy.zoom=gy.zoom=dy.zoom}}),Y(py,{warpTo:t=>{dy.visit(t.id)},chatFocusChanged:()=>{dy.keyboardEnabled=!py.chatFocused}}),Y(wy,{videoConferenceJoined:async t=>{Ay.connected=!0,await dy.startAsync(t.id,t.displayName,t.pose,t.avatarURL,t.roomName),wy.avatarURL=dy.me.avatarImage=my.avatarURL=hy.avatarURL,fy.audioInputDevices=await wy.getAudioInputDevicesAsync(),fy.audioOutputDevices=await wy.getAudioOutputDevicesAsync(),fy.videoInputDevices=await wy.getVideoInputDevicesAsync(),hy.preferredAudioInputID=wy.preferredAudioInputID,hy.preferredAudioOutputID=wy.preferredAudioOutputID,hy.preferredVideoInputID=wy.preferredVideoInputID,fy.currentAudioInputDevice=await wy.getCurrentAudioInputDeviceAsync(),fy.currentAudioOutputDevice=await wy.getCurrentAudioOutputDeviceAsync(),fy.currentVideoInputDevice=await wy.getCurrentVideoInputDeviceAsync();const e=wy.isAudioMuted;dy.muteUserAudio(wy.localUserID,e),gy.audioEnabled=!e;const n=wy.isVideoMuted;dy.muteUserVideo(wy.localUserID,n),gy.videoEnabled=!n},videoConferenceLeft:()=>{dy.end()},participantJoined:t=>{wy.audio.playClip("join",.5),dy.addUser(t.id,t.displayName,t.pose)},participantLeft:t=>{wy.audio.playClip("leave",.5),dy.removeUser(t.id),py.delete(t.id)},audioChanged:t=>{Pn(t.id)},videoChanged:t=>{dy.setAvatarVideo(t.id,t.stream),Pn(t.id)},avatarChanged:t=>{dy.setAvatarURL(t.id,t.url),Pn(t.id)},displayNameChange:t=>{dy.changeUserName(t.id,t.displayName),Pn(t.id)},audioMuteStatusChanged:async t=>{dy.muteUserAudio(t.id,t.muted)},localAudioMuteStatusChanged:async t=>{gy.audioEnabled=!t.muted,fy.currentAudioInputDevice=await wy.getCurrentAudioInputDeviceAsync(),hy.preferredAudioInputID=wy.preferredAudioInputID},videoMuteStatusChanged:async t=>{dy.muteUserVideo(t.id,t.muted),hy.preferredVideoInputID=wy.preferredVideoInputID},localVideoMuteStatusChanged:async t=>{gy.videoEnabled=!t.muted,t.muted?my.setAvatarVideo(null):my.setAvatarVideo(dy.me.avatarVideo.element),fy.currentVideoInputDevice=await wy.getCurrentVideoInputDeviceAsync()},userInitRequest:t=>{wy.userInitResponse(t.id,dy.me.serialize())},userInitResponse:t=>{dy.initializeUser(t.id,t),Pn(t.id)},emote:t=>{dy.emote(t.id,t)},setAvatarEmoji:t=>{dy.setAvatarEmoji(t.id,t),Pn(t.id)},audioActivity:t=>{dy.updateAudioActivity(t.id,t.isActive)}}),Y(by,{tick:t=>{wy.update(),my.update(),py.update(),dy.update(t.dt)}}),my.drawHearing=dy.drawHearing=hy.drawHearing,my.audioDistanceMin=dy.audioDistanceMin=hy.audioDistanceMin,my.audioDistanceMax=dy.audioDistanceMax=hy.audioDistanceMax,my.audioRolloff=hy.audioRolloff,my.fontSize=dy.fontSize=hy.fontSize,my.gamepads=navigator.getGamepads(),my.gamepadIndex=dy.gamepadIndex=hy.gamepadIndex,my.inputBinding=dy.inputBinding=hy.inputBinding,gy.zoom=dy.zoom=hy.zoom,dy.cameraZ=dy.targetCameraZ,dy.transitionSpeed=hy.transitionSpeed=.5,Ay.userName=hy.userName,Ay.roomName=hy.roomName,Ay.email=hy.email,gy.enabled=!1,Cn(Ay),Ay.ready=!0,by.start(),rt(ot({fontFamily:"Noto Color Emoji",fontSize:100}))}catch(t){TraceKit.report(t)}
//# sourceMappingURL=game.min.js.map
